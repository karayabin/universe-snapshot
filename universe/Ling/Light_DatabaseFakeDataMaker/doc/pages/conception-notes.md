Light_DatabaseFakeDataMaker, conception notes
================
2021-07-02


Generate fake data for your database quickly.





Column generator
--------
2021-07-02


A **column generator** generates the value for a particular column.



A column generator can be:

- a special string (aka, any string that starts with an underscore).
    See the special strings section for more details.
- a string, in which case the string will be inserted as is in the db
- an array, in which case a randomly chosen value of this array will be inserted in the db
- a callable, in which case the return of this callable will be inserted in the db.
      The callable receives the custom index generated by the generate method as its first argument.
      Note: this generated index starts at 1 and is auto-incremented on every new item.
  


Special strings
=========
2021-07-02


When defining a column generator, you can use **special strings** to save some time.

Any string that starts with an underscore is considered a **special string**.

A **special string** is a colon separated string, where the first component is the name
of the function to call. 

Subsequent components are the parameters to that function.

So for instance:

- **_my_function**: this is just a call to the my_function **special function**, without arguments.
- **_my_function:hello**: this is a call to the my_function **special function**, with the string "hello" as its first argument.
- **_my_function:hello:42**: this is a call to the my_function **special function**, with the string "hello" as its first argument, and the string "42" as its second argument.



The following list describes the available **special strings**:


- _select: this function picks a random value in another table.
    Expected parameters:
        - 0: the table name (full table) to choose from
        - 1: the column (of that table name) to take the value from
    Example: 
        - _select:lks_user:id 
  
        In the above example, we select a random value from the "id" column of the "lks_user" table.
        Note that when the database is not specified, our generator uses the database it was already using. 
  



- _between: this function picks a random int value between two ints
    Expected parameters:
        - 0: the minimum value (int)
        - 1: the maximum value (int)
    Example: 
        - _between:1:100 
  
        In the above example, we select a random int between 1 and 100 
  







Usage example
-------
2021-07-02


Here is a snippet I used:


```php
//$light = new Light();
//$light->setDebug(true);
//$light->setContainer($container);
//$light->initialize();




$gen = new LightDatabaseFakeDataGenerator();
$gen
    ->addColumnGenerator("author_id", "1")
    ->addColumnGenerator("label", function($index){
        return "website$index";
    })
    ->addColumnGenerator("reference", function($index){
        return "kw$index";
    })
    ->addColumnGenerator("item_type", "1")
    ->addColumnGenerator("provider", function($index){
        return "x$index";
    })
    ->addColumnGenerator("identifier", function($index){
        return "x$index";
    })
    ->addColumnGenerator("description", function($index){
        return "This is the komin> website$index website. It's a basic website.";
    })
    ->addColumnGenerator("price_in_euro", "0.00")
    ->addColumnGenerator("screenshots", "- /libs/universe/Ling/Light_Kit_Store/img/kit-store-lightning.png

")
    ->addColumnGenerator("status", "1")
;

$table = 'kit_store.lks_item';
$table = 'lks_item';
$fm = $container->get("database_fake_data_maker");

$data = $fm->generate($table, 10, $gen);
az($data);

```





Related
========
2021-07-02


- [Light_Bullsheet](https://github.com/lingtalfi/Light_Bullsheet)

