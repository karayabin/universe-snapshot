Light Kit Admin DebugTrace
==================
2019-11-07



This is a debug tool for [light kit admin](https://github.com/lingtalfi/Light_Kit_Admin).

This debug tool gives access to basic information:


- the http request: url, $_GET, $_POST, $_FILE, $_COOKIE
- the matched route (if any)
- the controller being used
- the kit page being used
- the templates being used
- the csrf token values (if you use the [csrf_simple](/komin/jin_site_demo/universe/Ling/Light_CsrfSimple) service)
- events being used (i.e. events with some listeners attached to it)
- session variables




Prints to a file
-----------

It outputs everything to external file(s).
The idea here is to open that file in a text editor with live update capabilities (such as sublime text for instance),
and put your browser window and text editor side to side, so that you can work in a browser window,
and have your info updated next to it, in your text editor window (that's my preferred debug workflow).

There are actually two modes: 

- either put the last http request info on one file (use the **setTargetFile** method)
- or put each http request info on a separate file (use the **setTargetDir** method)


Or you could use both at the same time.



A live debugger
-----------
One nice thing about this debugger is that it's a live debugger: it writes to the file bit of information after bit.
That's because sometimes, you encounter an error (like a fatal error) that interrupts the application.
When that happens, you still have all the information that the debugTrace service could collect before the script was interrupted,
which is a valuable information for debugging. 



httpRequest filters
--------------

Not all requests are relevant to your debugging session.

For instance in my case I had this **/user-data?file=images/avatar.png** request, which renders an image,
and I wasn't interested in that.

Your mileage might vary, but the point is that we need to be able to filter out some requests.


The http request filters let you do that in the form of an array with the following properties:


- ?urlIgnoreIfStartWith: array|string. If the uri starts with one of the items defined by this property, it will be filtered out.  


Security warning
-------------

We recommend that you never use this plugin in production, only in a development environment.
Why, because this will log information to a file, and that information is potentially critical.

In particular, the following bits:

- http_request.$_POST: may contain the password in clear of an user which logs in
- csrf_token: may contain the session token, which if discovered by a malicious attacker makes all kind of csrf attacks very likely





Example of output
-----------
2019-11-07 -> 2019-11-08

Here is an example of output generated by this service.

Note: it's a bad idea to have PHPSESSID as a cookie, but that's just an example.


```yaml
http_request: 
    url: /
    $_GET: []
    $_POST: []
    $_FILES: []
    $_COOKIE: 
        _ga: GA1.1.1122014952.1558336159
        PHPSESSID: u0hrb5ijemvthhbdgma1dltoba
    

csrf_token: 4d05d942124feb8d96f7e2c20e5b97bf

route: 
    name: lka_route-home
    pattern: /
    controller: Ling\Light_Kit_Admin\Controller\DashboardController->render
    requirements: []
    url_params: []
    host: null
    is_secure_protocol: null
    is_ajax: false

kit_admin_page: Light_Kit_Admin/kit/zeroadmin/zeroadmin_home

kit_admin_conf: 
    layout: templates/Light_Kit_Admin/layouts/zeroadmin/zeroadmin_main_layout.php
    zones: 
        SUB_zeroadmin_header: 
            - 
                name: zeroadmin_header_icon_link_new_messages
                className: Ling\Light_Kit_BootstrapWidgetLibrary\Widget\Picasso\ZeroAdminHeaderNewMessagesIconLinkWidget (picasso)
                widgetFile: templates/Light_Kit_BootstrapWidgetLibrary/widgets/picasso/ZeroAdminHeaderNewMessagesIconLinkWidget/default.php
            
            - 
                name: zeroadmin_header_icon_link_new_notifications
                className: Ling\Light_Kit_BootstrapWidgetLibrary\Widget\Picasso\ZeroAdminHeaderNewNotificationsIconLinkWidget (picasso)
                widgetFile: templates/Light_Kit_BootstrapWidgetLibrary/widgets/picasso/ZeroAdminHeaderNewNotificationsIconLinkWidget/default.php
            
            - 
                name: zeroadmin_header_icon_link_profile_dropdown
                className: Ling\Light_Kit_BootstrapWidgetLibrary\Widget\Picasso\ZeroAdminHeaderProfileDropdownLinkWidget (picasso)
                widgetFile: templates/Light_Kit_BootstrapWidgetLibrary/widgets/picasso/ZeroAdminHeaderProfileDropdownLinkWidget/default.php
            
        
        header: 
            - 
                name: zeroadmin_header
                className: Ling\Light_Kit_BootstrapWidgetLibrary\Widget\Picasso\ZeroAdminHeaderWidget (picasso)
                widgetFile: templates/Light_Kit_BootstrapWidgetLibrary/widgets/picasso/ZeroAdminHeaderWidget/default.php
            
        
        sidebar: 
            - 
                name: zeroadmin_sidebar
                className: Ling\Light_Kit_BootstrapWidgetLibrary\Widget\Picasso\ZeroAdminSidebarWidget (picasso)
                widgetFile: templates/Light_Kit_BootstrapWidgetLibrary/widgets/picasso/ZeroAdminSidebarWidget/default.php
            
        
        body: 
            - 
                name: zeroadmin_breadcrumb
                className: Ling\Light_Kit_BootstrapWidgetLibrary\Widget\Picasso\ZeroAdminBreadcrumbWidget (picasso)
                widgetFile: templates/Light_Kit_BootstrapWidgetLibrary/widgets/picasso/ZeroAdminBreadcrumbWidget/default.php
            
            - 
                name: zeroadmin_statsummaryicon
                className: Ling\Light_Kit_BootstrapWidgetLibrary\Widget\Picasso\ZeroAdminStatSummaryIconWidget (picasso)
                widgetFile: templates/Light_Kit_BootstrapWidgetLibrary/widgets/picasso/ZeroAdminStatSummaryIconWidget/default.php
            
            - 
                name: zeroadmin_herograph
                className: Ling\Light_Kit_BootstrapWidgetLibrary\Widget\Picasso\ZeroAdminHeroGraphWidget (picasso)
                widgetFile: templates/Light_Kit_BootstrapWidgetLibrary/widgets/picasso/ZeroAdminHeroGraphWidget/default.php
            
        
        footer: 
            - 
                name: footer_with_button
                className: Ling\Light_Kit_BootstrapWidgetLibrary\Widget\Picasso\FooterWithButtonWidget (picasso)
                widgetFile: templates/Light_Kit_BootstrapWidgetLibrary/widgets/picasso/FooterWithButtonWidget/default.php
            
        
    
events: 
    - Light.initialize_1
    - Light.initialize_2
    - Light.on_route_found
    - Light.end_routine

session: 
    light_csrf_session: 4d05d942124feb8d96f7e2c20e5b97bf
    WebsiteUserManager: undefined

```

