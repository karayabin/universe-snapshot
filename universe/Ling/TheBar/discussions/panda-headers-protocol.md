Panda headers protocol 
=============
2020-04-06



Behind the **panda headers** protocol is the idea that when you request a file via an url, you can add meta information to it (such as the author,
or some tags for instance), so that you don't need a second http request to query those meta information.


The **panda headers** protocol defines a way in which a server and a client can implement this technique.



The server, along with the file, provides the information it wants to communicate via **panda headers**.
A **panda header** is a simple http header, but its name starts with the ```panda_``` prefix.

In addition to that, an extra **panda__arrays** header is reserved for declaring which **panda headers** are of type array.
More on this in a second.


So for instance let's say the server wants to add the following information to a file:

- author: boris
- tags:
    - judo
    - karate
    
    
It would add the following headers:

- panda_author: boris    
- panda_tags: judo
- panda_tags: karate
- panda__arrays: tags



Notice how the **panda_tags** is repeated twice.
The http response generated by the server would look like this:

- ...other headers
- panda_author: boris
- panda_tags: judo, karate
- panda__arrays: tags


Notice how the response headers for tags have been transformed into a csv.
That's why the **panda__arrays** header exists: it tells the client which **panda headers** are of type array, 
so that the client can process them as such (instead of a simple string with commas in it).

The **panda__arrays** special header is a comma separated list of the header names which type is an array.



If the **panda_header** is part of an array and it contains a comma, those commas need to be transformed into the
following reserved string: ```__panda_comma__```.

So for instance if the server wanted to pass along the following information:

- sports:
    - judo
    - karate
    - 1,2,3 go
    
It would send the following headers:

- panda_sports: judo
- panda_sports: karate
- panda_sports: 1__panda_comma__2__panda_comma__3__panda_comma__ go
- panda__arrays: sports


The generated http response would look like this:

- ...other headers
- panda_sports: judo, karate, 1__panda_comma__2__panda_comma__3__panda_comma__ go
- panda__arrays: sports


Then the client needs to reverts those ```__panda_comma__``` strings back to commas.


It goes without saying that your header names (sports in the previous example) should be using only alpha numerical characters and the underscore: don't 
use risky symbols, or you're on your own.





Some tools
==============


I've created some tools that you can use to use the **panda headers** protocol right away.



Server tools
--------
- [Panda Headers](https://github.com/lingtalfi/Panda_Headers)


Client tools
---------
- [panda-headers js client](https://github.com/lingtalfi/Panda-headers-js)






    







