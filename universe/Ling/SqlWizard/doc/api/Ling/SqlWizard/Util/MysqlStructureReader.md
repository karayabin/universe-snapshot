[Back to the Ling/SqlWizard api](https://github.com/lingtalfi/SqlWizard/blob/master/doc/api/Ling/SqlWizard.md)



The MysqlStructureReader class
================
2019-07-23 --> 2020-02-28






Introduction
============

The MysqlStructureReader class.

This tool can help with parsing a sql file containing CREATE TABLE statements,
and will extract some table information (the table name, the fields with their types, their nullability,
and if they have auto-incremented, the primary key,  the foreign keys, the unique indexes).

However, this will work only on very specific files which have the certain characteristics.
Typically, those files which are generated by tools such as MysqlWorkBench (which I tested).
Maybe it should work with the dump from phpMyAdmin (not tested).

See the [MysqlStructureReader example](https://github.com/lingtalfi/SqlWizard/blob/master/doc/pages/mysql-structure-reader-example.md) for more info.



Class synopsis
==============


class <span class="pl-k">MysqlStructureReader</span>  {

- Methods
    - public static [readerArrayToTableInfo](https://github.com/lingtalfi/SqlWizard/blob/master/doc/api/Ling/SqlWizard/Util/MysqlStructureReader/readerArrayToTableInfo.md)(array $readerArray, Ling\SimplePdoWrapper\SimplePdoWrapperInterface $pdoWrapper, ?string $defaultDb = null) : array
    - public [readFile](https://github.com/lingtalfi/SqlWizard/blob/master/doc/api/Ling/SqlWizard/Util/MysqlStructureReader/readFile.md)(string $file) : array
    - public [readContent](https://github.com/lingtalfi/SqlWizard/blob/master/doc/api/Ling/SqlWizard/Util/MysqlStructureReader/readContent.md)(string $content) : array
    - protected [getDatabaseAndTableFromLine](https://github.com/lingtalfi/SqlWizard/blob/master/doc/api/Ling/SqlWizard/Util/MysqlStructureReader/getDatabaseAndTableFromLine.md)(string $line) : array
    - protected [extractColumn](https://github.com/lingtalfi/SqlWizard/blob/master/doc/api/Ling/SqlWizard/Util/MysqlStructureReader/extractColumn.md)(string $line) : string
    - protected [extractColumns](https://github.com/lingtalfi/SqlWizard/blob/master/doc/api/Ling/SqlWizard/Util/MysqlStructureReader/extractColumns.md)(string $line) : array
    - protected [extractRegularColumnInfo](https://github.com/lingtalfi/SqlWizard/blob/master/doc/api/Ling/SqlWizard/Util/MysqlStructureReader/extractRegularColumnInfo.md)(string $line) : array | false

}






Methods
==============

- [MysqlStructureReader::readerArrayToTableInfo](https://github.com/lingtalfi/SqlWizard/blob/master/doc/api/Ling/SqlWizard/Util/MysqlStructureReader/readerArrayToTableInfo.md) &ndash; which structure is defined in the [Light_DatabaseInfo->getTableInfo](https://github.com/lingtalfi/Light_DatabaseInfo/blob/master/doc/api/Ling/Light_DatabaseInfo/Service/LightDatabaseInfoService/getTableInfo.md) method.
- [MysqlStructureReader::readFile](https://github.com/lingtalfi/SqlWizard/blob/master/doc/api/Ling/SqlWizard/Util/MysqlStructureReader/readFile.md) &ndash; Same as the readContent method, but takes a file as argument.
- [MysqlStructureReader::readContent](https://github.com/lingtalfi/SqlWizard/blob/master/doc/api/Ling/SqlWizard/Util/MysqlStructureReader/readContent.md) &ndash; Reads the given content and returns an array containing **table info items**, each of which having the following structure.
- [MysqlStructureReader::getDatabaseAndTableFromLine](https://github.com/lingtalfi/SqlWizard/blob/master/doc/api/Ling/SqlWizard/Util/MysqlStructureReader/getDatabaseAndTableFromLine.md) &ndash; Returns an array containing the database and the table name from the given line.
- [MysqlStructureReader::extractColumn](https://github.com/lingtalfi/SqlWizard/blob/master/doc/api/Ling/SqlWizard/Util/MysqlStructureReader/extractColumn.md) &ndash; or throws an exception if it doesn't find one.
- [MysqlStructureReader::extractColumns](https://github.com/lingtalfi/SqlWizard/blob/master/doc/api/Ling/SqlWizard/Util/MysqlStructureReader/extractColumns.md) &ndash; or throws an exception if it doesn't find any.
- [MysqlStructureReader::extractRegularColumnInfo](https://github.com/lingtalfi/SqlWizard/blob/master/doc/api/Ling/SqlWizard/Util/MysqlStructureReader/extractRegularColumnInfo.md) &ndash; Returns false if the line is not recognized as a column definition.





Location
=============
Ling\SqlWizard\Util\MysqlStructureReader<br>
See the source code of [Ling\SqlWizard\Util\MysqlStructureReader](https://github.com/lingtalfi/SqlWizard/blob/master/Util/MysqlStructureReader.php)



SeeAlso
==============
Previous class: [SqlWizardGeneralTool](https://github.com/lingtalfi/SqlWizard/blob/master/doc/api/Ling/SqlWizard/Tool/SqlWizardGeneralTool.md)<br>
