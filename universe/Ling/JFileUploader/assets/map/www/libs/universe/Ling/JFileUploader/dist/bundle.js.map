{"version":3,"file":"bundle.js","sources":["../../../../../../node_modules/svelte/internal/index.mjs","../../../../../../node_modules/js-extension-ling/index.js","../../../../../../node_modules/svelte/transition/index.mjs","../../../../../../node_modules/panda-headers/index.js","../src/modules/Validator.js","../src/modules/GlobalProgressTracker.js","../../../../../../node_modules/translatee/index.js","../../../../../../node_modules/js-dropzone-handler/index.js","../../../../../../node_modules/chunk-uploader/index.js","../../../../../../node_modules/atoa/atoa.js","../../../../../../node_modules/ticky/ticky-browser.js","../../../../../../node_modules/contra/debounce.js","../../../../../../node_modules/contra/emitter.js","../../../../../../node_modules/custom-event/index.js","../../../../../../node_modules/crossvent/src/eventmap.js","../../../../../../node_modules/crossvent/src/crossvent.js","../../../../../../node_modules/dragula/classes.js","../../../../../../node_modules/dragula/dragula.js","../../../../../../node_modules/svelte/store/index.mjs","../../../../../../node_modules/svelte-action-draggable/draggable.js","../../../../../../node_modules/svelte-mymodal/src/Component.svelte","../../../../../../node_modules/cropperjs/dist/cropper.js","../src/components/DefaultFileEditor.svelte","../src/DefaultFileUploader.svelte","../src/index.js"],"sourcesContent":["function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\nfunction is_promise(value) {\n    return value && typeof value === 'object' && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction is_empty(obj) {\n    return Object.keys(obj).length === 0;\n}\nfunction validate_store(store, name) {\n    if (store != null && typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, ...callbacks) {\n    if (store == null) {\n        return noop;\n    }\n    const unsub = store.subscribe(...callbacks);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, $$scope, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n    return definition[1] && fn\n        ? assign($$scope.ctx.slice(), definition[1](fn(ctx)))\n        : $$scope.ctx;\n}\nfunction get_slot_changes(definition, $$scope, dirty, fn) {\n    if (definition[2] && fn) {\n        const lets = definition[2](fn(dirty));\n        if ($$scope.dirty === undefined) {\n            return lets;\n        }\n        if (typeof lets === 'object') {\n            const merged = [];\n            const len = Math.max($$scope.dirty.length, lets.length);\n            for (let i = 0; i < len; i += 1) {\n                merged[i] = $$scope.dirty[i] | lets[i];\n            }\n            return merged;\n        }\n        return $$scope.dirty | lets;\n    }\n    return $$scope.dirty;\n}\nfunction update_slot(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction compute_rest_props(props, keys) {\n    const rest = {};\n    keys = new Set(keys);\n    for (const k in props)\n        if (!keys.has(k) && k[0] !== '$')\n            rest[k] = props[k];\n    return rest;\n}\nfunction compute_slots(slots) {\n    const result = {};\n    for (const key in slots) {\n        result[key] = true;\n    }\n    return result;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value = ret) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nfunction run_tasks(now) {\n    tasks.forEach(task => {\n        if (!task.c(now)) {\n            tasks.delete(task);\n            task.f();\n        }\n    });\n    if (tasks.size !== 0)\n        raf(run_tasks);\n}\n/**\n * For testing purposes only!\n */\nfunction clear_loops() {\n    tasks.clear();\n}\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n */\nfunction loop(callback) {\n    let task;\n    if (tasks.size === 0)\n        raf(run_tasks);\n    return {\n        promise: new Promise(fulfill => {\n            tasks.add(task = { c: callback, f: fulfill });\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key === '__value') {\n            node.value = node[key] = attributes[key];\n        }\n        else if (descriptors[key] && descriptors[key].set) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group, __value, checked) {\n    const value = new Set();\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.add(group[i].__value);\n    }\n    if (!checked) {\n        value.delete(__value);\n    }\n    return Array.from(value);\n}\nfunction to_number(value) {\n    return value === '' ? null : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction claim_element(nodes, name, attributes, svg) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeName === name) {\n            let j = 0;\n            const remove = [];\n            while (j < node.attributes.length) {\n                const attribute = node.attributes[j++];\n                if (!attributes[attribute.name]) {\n                    remove.push(attribute.name);\n                }\n            }\n            for (let k = 0; k < remove.length; k++) {\n                node.removeAttribute(remove[k]);\n            }\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return svg ? svg_element(name) : element(name);\n}\nfunction claim_text(nodes, data) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 3) {\n            node.data = '' + data;\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return text(data);\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.wholeText !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    input.value = value == null ? '' : value;\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    node.style.setProperty(key, value, important ? 'important' : '');\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\nlet crossorigin;\nfunction is_crossorigin() {\n    if (crossorigin === undefined) {\n        crossorigin = false;\n        try {\n            if (typeof window !== 'undefined' && window.parent) {\n                void window.parent.document;\n            }\n        }\n        catch (error) {\n            crossorigin = true;\n        }\n    }\n    return crossorigin;\n}\nfunction add_resize_listener(node, fn) {\n    const computed_style = getComputedStyle(node);\n    const z_index = (parseInt(computed_style.zIndex) || 0) - 1;\n    if (computed_style.position === 'static') {\n        node.style.position = 'relative';\n    }\n    const iframe = element('iframe');\n    iframe.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n        `overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: ${z_index};`);\n    iframe.setAttribute('aria-hidden', 'true');\n    iframe.tabIndex = -1;\n    const crossorigin = is_crossorigin();\n    let unsubscribe;\n    if (crossorigin) {\n        iframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n        unsubscribe = listen(window, 'message', (event) => {\n            if (event.source === iframe.contentWindow)\n                fn();\n        });\n    }\n    else {\n        iframe.src = 'about:blank';\n        iframe.onload = () => {\n            unsubscribe = listen(iframe.contentWindow, 'resize', fn);\n        };\n    }\n    append(node, iframe);\n    return () => {\n        if (crossorigin) {\n            unsubscribe();\n        }\n        else if (unsubscribe && iframe.contentWindow) {\n            unsubscribe();\n        }\n        detach(iframe);\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, false, false, detail);\n    return e;\n}\nfunction query_selector_all(selector, parent = document.body) {\n    return Array.from(parent.querySelectorAll(selector));\n}\nclass HtmlTag {\n    constructor(anchor = null) {\n        this.a = anchor;\n        this.e = this.n = null;\n    }\n    m(html, target, anchor = null) {\n        if (!this.e) {\n            this.e = element(target.nodeName);\n            this.t = target;\n            this.h(html);\n        }\n        this.i(anchor);\n    }\n    h(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(this.t, this.n[i], anchor);\n        }\n    }\n    p(html) {\n        this.d();\n        this.h(html);\n        this.i(this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\n\nconst active_docs = new Set();\nlet active = 0;\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    const doc = node.ownerDocument;\n    active_docs.add(doc);\n    const stylesheet = doc.__svelte_stylesheet || (doc.__svelte_stylesheet = doc.head.appendChild(element('style')).sheet);\n    const current_rules = doc.__svelte_rules || (doc.__svelte_rules = {});\n    if (!current_rules[name]) {\n        current_rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ''}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    const previous = (node.style.animation || '').split(', ');\n    const next = previous.filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    );\n    const deleted = previous.length - next.length;\n    if (deleted) {\n        node.style.animation = next.join(', ');\n        active -= deleted;\n        if (!active)\n            clear_rules();\n    }\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        active_docs.forEach(doc => {\n            const stylesheet = doc.__svelte_stylesheet;\n            let i = stylesheet.cssRules.length;\n            while (i--)\n                stylesheet.deleteRule(i);\n            doc.__svelte_rules = {};\n        });\n        active_docs.clear();\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error('Function called outside component initialization');\n    return current_component;\n}\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail);\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n        }\n    };\n}\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n}\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        callbacks.slice().forEach(fn => fn(event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\nlet flushing = false;\nconst seen_callbacks = new Set();\nfunction flush() {\n    if (flushing)\n        return;\n    flushing = true;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        for (let i = 0; i < dirty_components.length; i += 1) {\n            const component = dirty_components[i];\n            set_current_component(component);\n            update(component.$$);\n        }\n        set_current_component(null);\n        dirty_components.length = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    flushing = false;\n    seen_callbacks.clear();\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config();\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config();\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    let config = fn(node, params);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = program.b - t;\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program || pending_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro — we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro — needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config();\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = value;\n        let child_ctx = info.ctx;\n        if (key !== undefined) {\n            child_ctx = child_ctx.slice();\n            child_ctx[key] = value;\n        }\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            info.blocks[i] = null;\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n            if (!info.hasCatch) {\n                throw error;\n            }\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = promise;\n    }\n}\n\nconst globals = (typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n        ? globalThis\n        : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(child_ctx, dirty);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction validate_each_keys(ctx, list, get_context, get_key) {\n    const keys = new Set();\n    for (let i = 0; i < list.length; i++) {\n        const key = get_key(get_context(ctx, list, i));\n        if (keys.has(key)) {\n            throw new Error('Cannot have duplicate keys in a keyed each');\n        }\n        keys.add(key);\n    }\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\n// source: https://html.spec.whatwg.org/multipage/indices.html\nconst boolean_attributes = new Set([\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n]);\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, classes_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (classes_to_add) {\n        if (attributes.class == null) {\n            attributes.class = classes_to_add;\n        }\n        else {\n            attributes.class += ' ' + classes_to_add;\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += ' ' + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += ' ' + name;\n        }\n        else if (value != null) {\n            str += ` ${name}=\"${String(value).replace(/\"/g, '&#34;').replace(/'/g, '&#39;')}\"`;\n        }\n    });\n    return str;\n}\nconst escaped = {\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;'\n};\nfunction escape(html) {\n    return String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(parent_component ? parent_component.$$.context : []),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, options = {}) => {\n            on_destroy = [];\n            const result = { title: '', head: '', css: new Set() };\n            const html = $$render(result, props, {}, options);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.title + result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    return ` ${name}${value === true ? '' : `=${typeof value === 'string' ? JSON.stringify(escape(value)) : `\"${value}\"`}`}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : '';\n}\n\nfunction bind(component, name, callback) {\n    const index = component.$$.props[name];\n    if (index !== undefined) {\n        component.$$.bound[index] = callback;\n        callback(component.$$.ctx[index]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    // onMount happens before the initial afterUpdate\n    add_render_callback(() => {\n        const new_on_destroy = on_mount.map(run).filter(is_function);\n        if (on_destroy) {\n            on_destroy.push(...new_on_destroy);\n        }\n        else {\n            // Edge case - component was destroyed immediately,\n            // most likely as a result of a binding initialising\n            run_all(new_on_destroy);\n        }\n        component.$$.on_mount = [];\n    });\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const prop_values = options.props || {};\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(parent_component ? parent_component.$$.context : []),\n        // everything else\n        callbacks: blank_object(),\n        dirty,\n        skip_bound: false\n    };\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, prop_values, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if (!$$.skip_bound && $$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            const nodes = children(options.target);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(nodes);\n            nodes.forEach(detach);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor);\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set($$props) {\n            if (this.$$set && !is_empty($$props)) {\n                this.$$.skip_bound = true;\n                this.$$set($$props);\n                this.$$.skip_bound = false;\n            }\n        }\n    };\n}\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set($$props) {\n        if (this.$$set && !is_empty($$props)) {\n            this.$$.skip_bound = true;\n            this.$$set($$props);\n            this.$$.skip_bound = false;\n        }\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.29.4' }, detail)));\n}\nfunction append_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev('SvelteDOMRemove', { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? ['capture'] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev('SvelteDOMAddEventListener', { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev('SvelteDOMRemoveEventListener', { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev('SvelteDOMRemoveAttribute', { node, attribute });\n    else\n        dispatch_dev('SvelteDOMSetAttribute', { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev('SvelteDOMSetProperty', { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev('SvelteDOMSetDataset', { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.wholeText === data)\n        return;\n    dispatch_dev('SvelteDOMSetData', { node: text, data });\n    text.data = data;\n}\nfunction validate_each_argument(arg) {\n    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {\n        let msg = '{#each} only iterates over array-like objects.';\n        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {\n            msg += ' You can use a spread to convert this iterable into an array.';\n        }\n        throw new Error(msg);\n    }\n}\nfunction validate_slots(name, slot, keys) {\n    for (const slot_key of Object.keys(slot)) {\n        if (!~keys.indexOf(slot_key)) {\n            console.warn(`<${name}> received an unexpected slot \"${slot_key}\".`);\n        }\n    }\n}\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(\"'target' is a required option\");\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn('Component was already destroyed'); // eslint-disable-line no-console\n        };\n    }\n    $capture_state() { }\n    $inject_state() { }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error('Infinite loop detected');\n        }\n    };\n}\n\nexport { HtmlTag, SvelteComponent, SvelteComponentDev, SvelteElement, action_destroyer, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_transform, afterUpdate, append, append_dev, assign, attr, attr_dev, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_component, claim_element, claim_space, claim_text, clear_loops, component_subscribe, compute_rest_props, compute_slots, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, escape, escaped, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getContext, get_binding_group_value, get_current_component, get_slot_changes, get_slot_context, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, has_prop, identity, init, insert, insert_dev, intros, invalid_attribute_name_character, is_client, is_crossorigin, is_empty, is_function, is_promise, listen, listen_dev, loop, loop_guard, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, query_selector_all, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, update_keyed_each, update_slot, validate_component, validate_each_argument, validate_each_keys, validate_slots, validate_store, xlink_attr };\n","var jsx = {\n\n    arrayKeyExists: function (key, object) {\n        return (key in object);\n    },\n\n\n    //https://gist.github.com/jdnichollsc/78a6eb093731cf3e8dfd536dbe4befb3\n    b64toBlob: function (b64Data, contentType, sliceSize) {\n        contentType = contentType || 'image/png';\n        sliceSize = sliceSize || 512;\n\n        var byteCharacters = atob(b64Data);\n        var byteArrays = [];\n\n        for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n            var slice = byteCharacters.slice(offset, offset + sliceSize);\n\n            var byteNumbers = new Array(slice.length);\n            for (var i = 0; i < slice.length; i++) {\n                byteNumbers[i] = slice.charCodeAt(i);\n            }\n\n            var byteArray = new Uint8Array(byteNumbers);\n\n            byteArrays.push(byteArray);\n        }\n\n        var blob = new Blob(byteArrays, {type: contentType});\n        return blob;\n    },\n\n\n    basename: function (path, returnExtension = true) {\n        let basename = path.split(/[\\\\/]/).pop();\n        if (false === returnExtension) {\n            if (false === this.str_contains(basename, \".\")) {\n                return basename;\n            }\n            let p = basename.split('.');\n            p.pop();\n            return p.join(\".\");\n        }\n        return basename;\n    },\n\n\n    compareBlobs: async function (blob1, blob2, useTrick = true) {\n        if (blob1.size !== blob2.size) {\n            return false;\n        }\n\n        /**\n         * I use the trick below for performances sake.\n         * From my test, comparing a 172M file to itself without the trick took about 8 seconds,\n         * which was unacceptable for my needs.\n         * So with this trick, the comparison is almost instant.\n         *\n         *\n         * If the size is more than 1M (more than 1 million bytes), then\n         * it's likely than no difference in size means no difference in the blob,\n         * unless you create some kind of blocks of data that have exactly the same size, in which case this function\n         * might not be appropriate for your needs.\n         *\n         * My original case is a file uploader, I just want to see if the user has uploaded a different file or not.\n         *\n         *\n         *\n         */\n        if (true === useTrick) {\n            if (blob1.size > 1024 * 1024) {\n                return true;\n            }\n        }\n\n\n        let buffer = await blob1.arrayBuffer();\n        let buffer2 = await blob2.arrayBuffer();\n        return this._compareBuffers(buffer, buffer2);\n    },\n\n    // https://stackoverflow.com/questions/201183/how-to-determine-equality-for-two-javascript-objects\n    compareObjects: function (x, y) {\n\n        if (x === null || x === undefined || y === null || y === undefined) {\n            return x === y;\n        }\n        // after this just checking type of one would be enough\n        if (x.constructor !== y.constructor) {\n            return false;\n        }\n        // if they are functions, they should exactly refer to same one (because of closures)\n        if (x instanceof Function) {\n            return x === y;\n        }\n        // if they are regexps, they should exactly refer to same one (it is hard to better equality check on current ES)\n        if (x instanceof RegExp) {\n            return x === y;\n        }\n        if (x === y || x.valueOf() === y.valueOf()) {\n            return true;\n        }\n        if (Array.isArray(x) && x.length !== y.length) {\n            return false;\n        }\n\n        // if they are dates, they must had equal valueOf\n        if (x instanceof Date) {\n            return false;\n        }\n\n        // if they are strictly equal, they both need to be object at least\n        if (!(x instanceof Object)) {\n            return false;\n        }\n        if (!(y instanceof Object)) {\n            return false;\n        }\n\n        // recursive object equality check\n        var p = Object.keys(x);\n        return Object.keys(y).every((i) => {\n                return p.indexOf(i) !== -1;\n            }) &&\n            p.every((i) => {\n                return this.compareObjects(x[i], y[i]);\n            });\n    },\n    convertHumanSizeToBytes: function(){\n\n    },\n    cssId: function (prefix = 'jsx') {\n        return prefix + '-' + this.getRandomNumber(0, 1000000);\n    },\n\n    // adapted from https://locutus.io/php/filesystem/dirname/\n    dirname: function (path) {\n        var ret = path.replace(/\\\\/g, '/').replace(/\\/[^/]*\\/?$/, '');\n        if ('/' === ret.charAt(ret.length - 1)) {\n            ret = ret.substr(0, ret.length - 1);\n        }\n        return ret;\n    },\n\n    // https://stackoverflow.com/questions/1787322/htmlspecialchars-equivalent-in-javascript\n    escapeHtml: function (text) {\n        var map = {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            '\"': '&quot;',\n            \"'\": '&#039;'\n        };\n        return text.replace(/[&<>\"']/g, function (m) {\n            return map[m];\n        });\n    },\n\n\n    // adapted from https://gomakethings.com/vanilla-javascript-version-of-jquery-extend/\n    extend: function () {\n\n\n        // Variables\n        var extended = {};\n        var deep = false;\n        var i = 0;\n        var length = arguments.length;\n\n        // Check if a deep merge\n        if (Object.prototype.toString.call(arguments[0]) === '[object Boolean]') {\n            deep = arguments[0];\n            i++;\n        }\n\n        // Merge the object into the extended object\n        var merge = obj => {\n            for (var prop in obj) {\n                if (Object.prototype.hasOwnProperty.call(obj, prop)) {\n                    // If deep merge and property is an object, merge properties\n                    if (deep && Object.prototype.toString.call(obj[prop]) === '[object Object]') {\n                        extended[prop] = this.extend(true, extended[prop], obj[prop]);\n                    } else {\n                        extended[prop] = obj[prop];\n                    }\n                }\n            }\n        };\n\n        // Loop through each object and conduct a merge\n        for (; i < length; i++) {\n            var obj = arguments[i];\n            merge(obj);\n        }\n\n        return extended;\n    },\n\n\n    fetchBlob: async function (url, fetchInit = {}) {\n        let response = await fetch(url, fetchInit);\n        if (false === response.ok) {\n            throw new Error(`Unexpected response with status ${response.status}: ${response.statusText}.`);\n        }\n        return await response.blob();\n    },\n    fetchJson: async function (url, fetchInit = {}) {\n        let response = await fetch(url, fetchInit);\n        if (false === response.ok) {\n            throw new Error(`Unexpected response with status ${response.status}: ${response.statusText}.`);\n        }\n        return await response.json();\n    },\n\n    getFileExtension: function (path) {\n        if (false === this.str_contains(path, \".\")) {\n            return \"\";\n        }\n        return path.split('.').pop();\n    },\n\n\n    getRandomNumber: function (min, max) {\n        return Math.floor(Math.random() * max) + min;\n    },\n\n    // https://stackoverflow.com/questions/15900485/correct-way-to-convert-size-in-bytes-to-kb-mb-gb-in-javascript\n    humanSize: function (bytes, decimals) {\n        if (0 === bytes) {\n            return \"0 Bytes\";\n        }\n        var c = 1024, d = decimals || 2, e = [\"B\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\"],\n            f = Math.floor(Math.log(bytes) / Math.log(c));\n        return parseFloat((bytes / Math.pow(c, f)).toFixed(d)) + \" \" + e[f]\n    },\n\n    inArray: function (needle, haystack) {\n        var length = haystack.length;\n        for (var i = 0; i < length; i++) {\n            if (needle === haystack[i]) {\n                return true;\n            }\n        }\n        return false;\n    },\n    isArray: function (thing) {\n        return '[object Array]' === Object.prototype.toString.call(thing);\n    },\n\n\n    // https://code.jquery.com/jquery-3.4.1.js\n    isEmptyObject: function (obj) {\n        var name;\n        for (name in obj) {\n            return false;\n        }\n        return true;\n    },\n    isPlainObject: function (thing) {\n        return '[object Object]' === Object.prototype.toString.call(thing);\n    },\n\n    isFunction: function (thing) {\n        return '[object Function]' === Object.prototype.toString.call(thing);\n    },\n\n    mimeIsImage: function (mime) {\n        if (!mime.match(/^image\\//)) {\n            return false;\n        }\n        return true;\n    },\n    objectToQueryString: function (obj, encodeParams) {\n        return this._serialize(obj, encodeParams);\n    },\n\n    /**\n     * An asynchronous wrapper around fetch that posts data so that you can access them via $_POST, $_FILES (and $_GET) in a php server.\n     *\n     * The payload argument can be many things:\n     *\n     * - a js FormData\n     * - a plain object (aka map) containing key/value pairs (will be passed via POST).\n     * - a mixed object containing the following properties (all 3 must be declared, even if empty):\n     *      - post: the map to send to $_POST\n     *      - get: the map to send to $_GET\n     *      - files: the map to send to $_FILES, it's a map of name => File (js object)\n     *\n     *\n     *\n     * @param url\n     * @param payload\n     * @returns {Promise<Response>}\n     */\n    async post(url, payload) {\n\n\n        var body = null;\n        if (payload instanceof FormData) {\n            body = payload;\n        } else if (this.isPlainObject(payload)) {\n\n            if (\n                true === payload.hasOwnProperty(\"post\") &&\n                true === payload.hasOwnProperty(\"get\") &&\n                true === payload.hasOwnProperty(\"files\")\n            ) {\n\n                var post = payload.post;\n                var get = payload.get;\n                var files = payload.files;\n\n                if (false === this.isEmptyObject(get)) {\n                    url = this.url_merge_params(url, get);\n                }\n\n                body = new FormData();\n                this.toFormData(post, body);\n                this.toFormData(files, body);\n\n            } else {\n                body = this.toFormData(payload);\n            }\n        } else {\n            console.error(payload);\n            throw new Error(\"Unknown payload case.\");\n        }\n\n\n        return await fetch(url, {\n            method: \"POST\",\n            body: body,\n        });\n    },\n\n\n    // https://stackoverflow.com/questions/8648892/how-to-convert-url-parameters-to-a-javascript-object\n    queryStringToObject: function (queryString) {\n        let q = queryString.split(\"?\").pop();\n        let ret = {};\n        this._parse_str(q, ret)\n        return ret;\n    },\n\n\n    // https://stackoverflow.com/questions/4759745/javascript-reindexing-an-array\n    reindex: function (array) {\n        return array.filter(function (item) {\n            return item !== undefined\n        });\n    },\n\n\n    removeEntryByIndex: function (array, index) {\n        array.splice(index, 1);\n    },\n\n    startsWith: function (haystack, needle) {\n        return haystack.substring(0, needle.length) === needle;\n    },\n\n\n    str_contains: function (haystack, needle) {\n        return haystack.indexOf(needle) !== -1;\n    },\n\n\n    toBool: function (thing) {\n        if (\"0\" === thing) {\n            return false;\n        }\n        return !!thing;\n    },\n\n    /**\n     * Note: this function requires a environment with the FormData object\n     * available (i.e. a web browser) to work properly.\n     */\n    toFormData: function (obj, fd = null) {\n\n        if (null === fd) {\n            fd = new FormData();\n        }\n\n        // https://stackoverflow.com/questions/22783108/convert-js-object-to-form-data\n        let toFormData = (f => f(f))(h => f => f(x => h(h)(f)(x)))(f => fd => pk => d => {\n            if (d instanceof Object) {\n                Object.keys(d).forEach(k => {\n                    const v = d[k]\n                    if (pk) k = `${pk}[${k}]`\n                    if (v instanceof Object && !(v instanceof Date) && !(v instanceof File)) {\n                        return f(fd)(k)(v)\n                    } else {\n                        fd.append(k, v)\n                    }\n                })\n            }\n            return fd\n        })(fd)();\n\n        return toFormData(obj);\n    },\n\n    toInt: function (thing) {\n        if (true === thing) {\n            return 1;\n        }\n        if (false === thing) {\n            return 0;\n        }\n        let res = parseInt(thing);\n        if (isNaN(res)) {\n            return 0;\n        }\n        return res;\n    },\n\n    /**\n     * Note: at the time of writing (2020-04-06), the growing fetch api doesn't have a support\n     * for upload progress monitoring yet (at least not that I know of), so this method uses\n     * the older XMLHttpRequest api.\n     */\n    uploadFileProgress: async function (url, data, onProgress, decorator) {\n\n\n        return new Promise((resolve, reject) => {\n\n\n            let formdata;\n\n            if (data instanceof FormData) {\n                formdata = data;\n            } else {\n                formdata = new FormData();\n                for (let i in data) {\n                    formdata.append(i, data[i]);\n                }\n            }\n\n\n            var ajax = new XMLHttpRequest();\n            // ajax.overrideMimeType(\"application/json\");\n\n            if (this.isFunction(decorator)) {\n                decorator(ajax);\n            }\n\n            ajax.upload.addEventListener(\"progress\", function (e) {\n                var percent = Math.round((e.loaded / e.total) * 100, 2);\n                onProgress(e, percent, e.loaded, e.total);\n            }, false);\n\n\n            ajax.addEventListener(\"load\", function (e) {\n                e.stopPropagation();\n                e.preventDefault();\n            }, false);\n            ajax.addEventListener(\"error\", function (e) {\n                e.stopPropagation();\n                e.preventDefault();\n                if (\"onError\" in options) {\n                    reject(e);\n                }\n            }, false);\n            ajax.addEventListener(\"abort\", function (e) {\n                e.stopPropagation();\n                e.preventDefault();\n                if (\"onAbort\" in options) {\n                    reject(e);\n                }\n            }, false);\n\n\n            ajax.open(\"POST\", url);\n            ajax.onreadystatechange = function () {\n                if (ajax.readyState === 4) {\n                    resolve(ajax);\n                }\n            };\n            ajax.send(formdata);\n\n        });\n    },\n\n\n    url_merge_params: function (url, params, encodeParams = true) {\n        let split = url.split('?', 2);\n        let qs = '';\n        let baseUrl = split.shift();\n        if (1 === split.length) {\n            qs = split.shift();\n        }\n        let urlParams = this.queryStringToObject(qs);\n        let allParams = this.extend(urlParams, params);\n        let q = this.objectToQueryString(allParams, encodeParams);\n        if (q.length > 0) {\n            baseUrl += '?' + q;\n        }\n        return baseUrl;\n    },\n\n\n    //----------------------------------------\n    // PRIVATE\n    //----------------------------------------\n    // adapted from https://stackoverflow.com/questions/1714786/query-string-encoding-of-a-javascript-object\n    _serialize: function (obj, useEncoder, prefix) {\n        var str = [],\n            p;\n        for (p in obj) {\n            if (obj.hasOwnProperty(p)) {\n                var k = prefix ? prefix + \"[\" + p + \"]\" : p,\n                    v = obj[p];\n\n                if (v !== null && typeof v === \"object\") {\n                    str.push(this._serialize(v, useEncoder, k));\n                } else {\n                    if (true === useEncoder) {\n                        str.push(encodeURIComponent(k) + \"=\" + encodeURIComponent(v));\n                    } else {\n                        str.push(k + \"=\" + v);\n                    }\n                }\n            }\n        }\n        return str.join(\"&\");\n    },\n    _testTypes: function () {\n        // https://ultimatecourses.com/blog/understanding-javascript-types-and-reliable-type-checking\n\n        // last tested in node (v8) and firefox 2020-04-03\n\n        // check from times to times to see if implementation has changed.\n        console.log(Object.prototype.toString.call([])); // [object Array]\n        console.log(Object.prototype.toString.call({})); // [object Object]\n        console.log(Object.prototype.toString.call('')); // [object String]\n        console.log(Object.prototype.toString.call(new Date())); // [object Date]\n        console.log(Object.prototype.toString.call(1)); // [object Number]\n        console.log(Object.prototype.toString.call(function () {\n        })); // [object Function]\n        console.log(Object.prototype.toString.call(/test/i)); // [object RegExp]\n        console.log(Object.prototype.toString.call(true)); // [object Boolean]\n        console.log(Object.prototype.toString.call(null)); // [object Null]\n        console.log(Object.prototype.toString.call()); // [object Undefined]\n    },\n\n    _compareBuffers: function (buf1, buf2) {\n        if (buf1 === buf2) {\n            return true;\n        }\n        if (buf1.byteLength !== buf2.byteLength) {\n            return false;\n        }\n        const d1 = new DataView(buf1), d2 = new DataView(buf2);\n        var i = buf1.byteLength;\n        while (i--) {\n            if (d1.getUint8(i) !== d2.getUint8(i)) {\n                return false;\n            }\n        }\n        return true;\n    },\n    // https://locutus.io/php/strings/parse_str/\n    _parse_str: function (str, array) { // eslint-disable-line camelcase\n        //       discuss at: https://locutus.io/php/parse_str/\n        //      original by: Cagri Ekin\n        //      improved by: Michael White (https://getsprink.com)\n        //      improved by: Jack\n        //      improved by: Brett Zamir (https://brett-zamir.me)\n        //      bugfixed by: Onno Marsman (https://twitter.com/onnomarsman)\n        //      bugfixed by: Brett Zamir (https://brett-zamir.me)\n        //      bugfixed by: stag019\n        //      bugfixed by: Brett Zamir (https://brett-zamir.me)\n        //      bugfixed by: MIO_KODUKI (https://mio-koduki.blogspot.com/)\n        // reimplemented by: stag019\n        //         input by: Dreamer\n        //         input by: Zaide (https://zaidesthings.com/)\n        //         input by: David Pesta (https://davidpesta.com/)\n        //         input by: jeicquest\n        //      bugfixed by: Rafał Kukawski\n        //           note 1: When no argument is specified, will put variables in global scope.\n        //           note 1: When a particular argument has been passed, and the\n        //           note 1: returned value is different parse_str of PHP.\n        //           note 1: For example, a=b=c&d====c\n        //        example 1: var $arr = {}\n        //        example 1: parse_str('first=foo&second=bar', $arr)\n        //        example 1: var $result = $arr\n        //        returns 1: { first: 'foo', second: 'bar' }\n        //        example 2: var $arr = {}\n        //        example 2: parse_str('str_a=Jack+and+Jill+didn%27t+see+the+well.', $arr)\n        //        example 2: var $result = $arr\n        //        returns 2: { str_a: \"Jack and Jill didn't see the well.\" }\n        //        example 3: var $abc = {3:'a'}\n        //        example 3: parse_str('a[b][\"c\"]=def&a[q]=t+5', $abc)\n        //        example 3: var $result = $abc\n        //        returns 3: {\"3\":\"a\",\"a\":{\"b\":{\"c\":\"def\"},\"q\":\"t 5\"}}\n        //        example 4: var $arr = {}\n        //        example 4: parse_str('a[][]=value', $arr)\n        //        example 4: var $result = $arr\n        //        returns 4: {\"a\":{\"0\":{\"0\":\"value\"}}}\n        //        example 5: var $arr = {}\n        //        example 5: parse_str('a=1&a[]=2', $arr)\n        //        example 5: var $result = $arr\n        //        returns 5: {\"a\":{\"0\":\"2\"}}\n\n        var strArr = String(str).replace(/^&/, '').replace(/&$/, '').split('&')\n        var sal = strArr.length\n        var i\n        var j\n        var ct\n        var p\n        var lastObj\n        var obj\n        var chr\n        var tmp\n        var key\n        var value\n        var postLeftBracketPos\n        var keys\n        var keysLen\n\n        var _fixStr = function (str) {\n            return decodeURIComponent(str.replace(/\\+/g, '%20'))\n        }\n\n        var $global = (typeof window !== 'undefined' ? window : global)\n        $global.$locutus = $global.$locutus || {}\n        var $locutus = $global.$locutus\n        $locutus.php = $locutus.php || {}\n\n        if (!array) {\n            array = $global\n        }\n\n        for (i = 0; i < sal; i++) {\n            tmp = strArr[i].split('=')\n            key = _fixStr(tmp[0])\n            value = (tmp.length < 2) ? '' : _fixStr(tmp[1])\n\n            while (key.charAt(0) === ' ') {\n                key = key.slice(1)\n            }\n\n            if (key.indexOf('\\x00') > -1) {\n                key = key.slice(0, key.indexOf('\\x00'))\n            }\n\n            if (key && key.charAt(0) !== '[') {\n                keys = []\n                postLeftBracketPos = 0\n\n                for (j = 0; j < key.length; j++) {\n                    if (key.charAt(j) === '[' && !postLeftBracketPos) {\n                        postLeftBracketPos = j + 1\n                    } else if (key.charAt(j) === ']') {\n                        if (postLeftBracketPos) {\n                            if (!keys.length) {\n                                keys.push(key.slice(0, postLeftBracketPos - 1))\n                            }\n\n                            keys.push(key.substr(postLeftBracketPos, j - postLeftBracketPos))\n                            postLeftBracketPos = 0\n\n                            if (key.charAt(j + 1) !== '[') {\n                                break\n                            }\n                        }\n                    }\n                }\n\n                if (!keys.length) {\n                    keys = [key]\n                }\n\n                for (j = 0; j < keys[0].length; j++) {\n                    chr = keys[0].charAt(j)\n\n                    if (chr === ' ' || chr === '.' || chr === '[') {\n                        keys[0] = keys[0].substr(0, j) + '_' + keys[0].substr(j + 1)\n                    }\n\n                    if (chr === '[') {\n                        break\n                    }\n                }\n\n                obj = array\n\n                for (j = 0, keysLen = keys.length; j < keysLen; j++) {\n                    key = keys[j].replace(/^['\"]/, '').replace(/['\"]$/, '')\n                    lastObj = obj\n\n                    if ((key === '' || key === ' ') && j !== 0) {\n                        // Insert new dimension\n                        ct = -1\n\n                        for (p in obj) {\n                            if (obj.hasOwnProperty(p)) {\n                                if (+p > ct && p.match(/^\\d+$/g)) {\n                                    ct = +p\n                                }\n                            }\n                        }\n\n                        key = ct + 1\n                    }\n\n                    // if primitive value, replace with object\n                    if (Object(obj[key]) !== obj[key]) {\n                        obj[key] = {}\n                    }\n\n                    obj = obj[key]\n                }\n\n                lastObj[key] = value\n            }\n        }\n    },\n\n\n};\n\n\nmodule.exports = jsx;","import { cubicInOut, linear, cubicOut } from '../easing';\nimport { is_function, assign } from '../internal';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\n\nfunction blur(node, { delay = 0, duration = 400, easing = cubicInOut, amount = 5, opacity = 0 }) {\n    const style = getComputedStyle(node);\n    const target_opacity = +style.opacity;\n    const f = style.filter === 'none' ? '' : style.filter;\n    const od = target_opacity * (1 - opacity);\n    return {\n        delay,\n        duration,\n        easing,\n        css: (_t, u) => `opacity: ${target_opacity - (od * u)}; filter: ${f} blur(${u * amount}px);`\n    };\n}\nfunction fade(node, { delay = 0, duration = 400, easing = linear }) {\n    const o = +getComputedStyle(node).opacity;\n    return {\n        delay,\n        duration,\n        easing,\n        css: t => `opacity: ${t * o}`\n    };\n}\nfunction fly(node, { delay = 0, duration = 400, easing = cubicOut, x = 0, y = 0, opacity = 0 }) {\n    const style = getComputedStyle(node);\n    const target_opacity = +style.opacity;\n    const transform = style.transform === 'none' ? '' : style.transform;\n    const od = target_opacity * (1 - opacity);\n    return {\n        delay,\n        duration,\n        easing,\n        css: (t, u) => `\n\t\t\ttransform: ${transform} translate(${(1 - t) * x}px, ${(1 - t) * y}px);\n\t\t\topacity: ${target_opacity - (od * u)}`\n    };\n}\nfunction slide(node, { delay = 0, duration = 400, easing = cubicOut }) {\n    const style = getComputedStyle(node);\n    const opacity = +style.opacity;\n    const height = parseFloat(style.height);\n    const padding_top = parseFloat(style.paddingTop);\n    const padding_bottom = parseFloat(style.paddingBottom);\n    const margin_top = parseFloat(style.marginTop);\n    const margin_bottom = parseFloat(style.marginBottom);\n    const border_top_width = parseFloat(style.borderTopWidth);\n    const border_bottom_width = parseFloat(style.borderBottomWidth);\n    return {\n        delay,\n        duration,\n        easing,\n        css: t => 'overflow: hidden;' +\n            `opacity: ${Math.min(t * 20, 1) * opacity};` +\n            `height: ${t * height}px;` +\n            `padding-top: ${t * padding_top}px;` +\n            `padding-bottom: ${t * padding_bottom}px;` +\n            `margin-top: ${t * margin_top}px;` +\n            `margin-bottom: ${t * margin_bottom}px;` +\n            `border-top-width: ${t * border_top_width}px;` +\n            `border-bottom-width: ${t * border_bottom_width}px;`\n    };\n}\nfunction scale(node, { delay = 0, duration = 400, easing = cubicOut, start = 0, opacity = 0 }) {\n    const style = getComputedStyle(node);\n    const target_opacity = +style.opacity;\n    const transform = style.transform === 'none' ? '' : style.transform;\n    const sd = 1 - start;\n    const od = target_opacity * (1 - opacity);\n    return {\n        delay,\n        duration,\n        easing,\n        css: (_t, u) => `\n\t\t\ttransform: ${transform} scale(${1 - (sd * u)});\n\t\t\topacity: ${target_opacity - (od * u)}\n\t\t`\n    };\n}\nfunction draw(node, { delay = 0, speed, duration, easing = cubicInOut }) {\n    const len = node.getTotalLength();\n    if (duration === undefined) {\n        if (speed === undefined) {\n            duration = 800;\n        }\n        else {\n            duration = len / speed;\n        }\n    }\n    else if (typeof duration === 'function') {\n        duration = duration(len);\n    }\n    return {\n        delay,\n        duration,\n        easing,\n        css: (t, u) => `stroke-dasharray: ${t * len} ${u * len}`\n    };\n}\nfunction crossfade(_a) {\n    var { fallback } = _a, defaults = __rest(_a, [\"fallback\"]);\n    const to_receive = new Map();\n    const to_send = new Map();\n    function crossfade(from, node, params) {\n        const { delay = 0, duration = d => Math.sqrt(d) * 30, easing = cubicOut } = assign(assign({}, defaults), params);\n        const to = node.getBoundingClientRect();\n        const dx = from.left - to.left;\n        const dy = from.top - to.top;\n        const dw = from.width / to.width;\n        const dh = from.height / to.height;\n        const d = Math.sqrt(dx * dx + dy * dy);\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        const opacity = +style.opacity;\n        return {\n            delay,\n            duration: is_function(duration) ? duration(d) : duration,\n            easing,\n            css: (t, u) => `\n\t\t\t\topacity: ${t * opacity};\n\t\t\t\ttransform-origin: top left;\n\t\t\t\ttransform: ${transform} translate(${u * dx}px,${u * dy}px) scale(${t + (1 - t) * dw}, ${t + (1 - t) * dh});\n\t\t\t`\n        };\n    }\n    function transition(items, counterparts, intro) {\n        return (node, params) => {\n            items.set(params.key, {\n                rect: node.getBoundingClientRect()\n            });\n            return () => {\n                if (counterparts.has(params.key)) {\n                    const { rect } = counterparts.get(params.key);\n                    counterparts.delete(params.key);\n                    return crossfade(rect, node, params);\n                }\n                // if the node is disappearing altogether\n                // (i.e. wasn't claimed by the other list)\n                // then we need to supply an outro\n                items.delete(params.key);\n                return fallback && fallback(node, params, intro);\n            };\n        };\n    }\n    return [\n        transition(to_send, to_receive, false),\n        transition(to_receive, to_send, true)\n    ];\n}\n\nexport { blur, crossfade, draw, fade, fly, scale, slide };\n","const jsx = require('js-extension-ling');\n\n\nvar escapeCommaAndTrim = function (str) {\n    return str.replace(/__panda_comma__/g, \",\", str).trim();\n};\n\n\nfunction _getPandaHeaders(headers, arrays) {\n    var ret = {};\n    for (let v of headers) {\n        var [key, value] = v;\n        if (\"panda__arrays\" === key) {\n            continue;\n        }\n\n        if (jsx.startsWith(key, \"panda_\")) {\n            key = key.substr(6);\n\n\n            if (jsx.inArray(key, arrays)) {\n                if (false === jsx.arrayKeyExists(key, ret)) {\n                    ret[key] = [];\n                }\n                let values = value.split(\",\");\n                for (let j in values) {\n                    let val = escapeCommaAndTrim(values[j]);\n                    ret[key].push(val);\n                }\n            } else {\n                value = escapeCommaAndTrim(value);\n                ret[key] = value;\n            }\n        }\n\n    }\n    return ret;\n}\n\nvar pandaHeaders = {\n\n    getPandaHeaders: function (headers) {\n        var arrays = [];\n        if (headers.has(\"panda__arrays\")) {\n            arrays = headers.get('panda__arrays').split(\",\");\n        }\n\n        return _getPandaHeaders(headers, arrays);\n    },\n    getPandaHeadersByXMLHttpRequest: function (request) {\n\n\n        // Get the raw header string\n        var headers = request.getAllResponseHeaders();\n\n        // Convert the header string into an array\n        // of individual headers\n        var arr = headers.trim().split(/[\\r\\n]+/);\n\n        // Create a map of header names to values\n        var headerMap = {};\n        arr.forEach(function (line) {\n            let parts = line.split(': ');\n            let header = parts.shift();\n            let value = parts.join(': ');\n            headerMap[header] = value;\n        });\n\n\n\n        var arrays = [];\n        if (\"panda__arrays\" in headerMap) {\n            arrays = headerMap['panda__arrays'].split(\",\");\n        }\n        return _getPandaHeaders(Object.entries(headerMap), arrays);\n    }\n};\n\n\nmodule.exports = pandaHeaders;","import jsx from 'js-extension-ling';\n\n\nexport default class Validator {\n\n    constructor() {\n        this.events = null;\n        this.rules = [];\n        this.translatee = null;\n    }\n\n    addRule(cb) {\n        this.rules.push(cb);\n    }\n\n\n    setTranslator(translator) {\n        this.translatee = translator;\n    }\n\n\n    /**\n     * Tests the given file against the rules, and returns either true (if all rules passed) or an error message.\n     */\n    test(oFile) {\n\n        var errMsg;\n        for (var i in this.rules) {\n            var rule = this.rules[i];\n            errMsg = rule(oFile);\n            if (true !== errMsg) {\n                return errMsg;\n            }\n        }\n        return true;\n    }\n\n\n    init(options) {\n\n        // adding maxFileSize rule\n        if (options.hasOwnProperty(\"maxFileSize\")) {\n            if (options.maxFileSize !== -1) {\n                var bytesMaxFileSize = jsx.convertHumanSizeToBytes(options.maxFileSize);\n\n                this.addRule(oFile => {\n                    if (oFile.size > bytesMaxFileSize) {\n                        var tags = {\n                            \"fileName\": '<strong>' + oFile.name + '</strong>',\n                            \"maxSize\": jsx.humanSize(bytesMaxFileSize),\n                            \"fileSize\": jsx.humanSize(oFile.size),\n                        };\n                        return this.translatee._(\"err.maxFileExceeded\", tags);\n                    }\n                    return true;\n                });\n            }\n        }\n\n        // adding maxFileNameLength rule\n        if (options.hasOwnProperty(\"maxFileNameLength\")) {\n            this.addRule(oFile => {\n                if (oFile.name.length > options.maxFileNameLength) {\n                    var tags = {\n                        \"fileName\": '<strong>' + oFile.name + '</strong>',\n                        \"maxLength\": options.maxFileNameLength,\n                        \"length\": oFile.name.length,\n                    };\n                    return this.translatee._(\"err.maxFileNameLength\", tags);\n                }\n                return true;\n            });\n        }\n\n\n        // adding mime type rule\n        if (options.hasOwnProperty(\"mimeType\")) {\n            if (options.mimeType !== null) {\n                var allowedMimeTypes = options.mimeType;\n                if ('string' === typeof allowedMimeTypes) {\n                    allowedMimeTypes = [allowedMimeTypes];\n                }\n\n                this.addRule(oFile => {\n                    if (-1 === allowedMimeTypes.indexOf(oFile.type)) {\n                        var tags = {\n                            \"fileName\": '<strong>' + oFile.name + '</strong>',\n                            \"fileMimeType\": '<strong>' + oFile.type + '</strong>',\n                            \"allowedMimeTypes\": allowedMimeTypes.join(', '),\n                        };\n                        return this.translatee._(\"err.wrongMimeType\", tags);\n                    }\n                    return true;\n                });\n            }\n\n        }\n\n\n        // adding file extension rule\n        if (options.hasOwnProperty(\"allowedFileExtension\")) {\n\n            if (options.allowedFileExtension !== null) {\n                var allowedFileExtensions = options.allowedFileExtension;\n                if ('string' === typeof allowedFileExtensions) {\n                    allowedFileExtensions = [allowedFileExtensions];\n                }\n\n                this.addRule(oFile => {\n                    var name = oFile.name;\n                    var extension = jsx.getFileExtension(oFile.name);\n                    if (-1 === allowedFileExtensions.indexOf(extension)) {\n                        var tags = {\n                            \"fileName\": '<strong>' + oFile.name + '</strong>',\n                            \"fileExtension\": '<strong>' + extension + '</strong>',\n                            \"allowedFileExtensions\": allowedFileExtensions.join(', '),\n                        };\n                        return this.translatee._(\"err.wrongFileExtension\", tags);\n                    }\n                    return true;\n                });\n            }\n        }\n\n\n    }\n}\n\n","export default class GlobalProgressTracker {\n\n    constructor() {\n        this.nbItems = 0;\n        this.totalWeight = 0;\n        this.slots = {};\n    }\n\n    registerItems(uFiles) {\n\n        this.nbItems = 0;\n        this.totalWeight = 0;\n        this.slots = {};\n\n        for (let uFile of uFiles) {\n            if (2 === uFile.status) {\n                this.slots[uFile.id] = 0;\n                this.totalWeight += uFile.size;\n                this.nbItems++;\n            }\n        }\n    }\n\n    addProgress(id, percent) {\n        var maxPercentPerSlot = Math.round(100 / this.nbItems, 2);\n        this.slots[id] = percent * maxPercentPerSlot / 100;\n    }\n\n    getPercent() {\n        var percent = 0;\n        for (var id in this.slots) {\n            percent += this.slots[id];\n        }\n        return percent;\n    }\n\n    getTotalWeight() {\n        return this.totalWeight;\n    }\n\n}\n\n","/**\n *\n * Plural/non-plural\n * --------------\n * Translatee distinguishes two types of strings:\n *\n * - non-plural string (which doesn't involve a plural)\n * - plural string (which involves a plural)\n *\n * The _ method fetches non-plural translations.\n * The _n method fetches plural translations.\n *\n *\n * Plural selector and dictionary structure\n * ---------------\n * The **plural selector** is a function that returns a plural index.\n * The plural index indicates which translation (in the dictionary) to choose from when a plural form is required.\n *\n * The dictionary is a map of msgId to array of translations.\n * In singular string (aka non-plural string), the array contains only one translation.\n * In plural strings, the array contains more than one translation, depending on the language,\n * and the **plural selector** function returns the index of the translation to return.\n * The order of the translation depends on the person who creates the dictionary.\n *\n * In translatee, the plural selector function is always bound to a dictionary.\n *\n *\n *\n * Strict mode\n * -----------\n * With strict mode on, all errors throw an exception.\n * With strict mode off, the translation methods always return the msg id if there is an error.\n *\n *\n */\nclass Translatee {\n\n    constructor() {\n        this.dictionaries = {};\n        this.pluralSelectors = {};\n        this.defaultLang = 'eng';\n        this.strictMode = true;\n    }\n\n    setDefaultLang(langId) {\n        this.defaultLang = langId;\n    }\n\n    setStrictMode(bool) {\n        this.strictMode = bool;\n    }\n\n    addDictionary(langId, dictionary, pluralSelector = null) {\n        if (null === pluralSelector) {\n            pluralSelector = this._getDefaultPluralSelector(langId);\n        }\n        this.pluralSelectors[langId] = pluralSelector;\n        this.dictionaries[langId] = dictionary;\n    }\n\n\n    /**\n     * Fetches a non-plural translation.\n     * Tags are automatically wrapped with the curly bracket and will replace their dictionary string counterpart if found.\n     * If langId is null, the default lang will be used.\n     */\n    _(msgId, tags = {}, langId = null) {\n        if (null === langId) {\n            langId = this.defaultLang;\n        }\n        if (langId in this.dictionaries) {\n\n            var dict = this.dictionaries[langId];\n            if (msgId in dict) {\n                var msg = dict[msgId][0];\n                for (var key in tags) {\n                    msg = msg.replace('{' + key + '}', tags[key]);\n                }\n                return msg;\n            } else {\n                if (true === this.strictMode) {\n                    this._error(`Message not found with id = ${msgId} and langId = ${langId}.`);\n                }\n                return msgId;\n            }\n        } else {\n            if (true === this.strictMode) {\n                this._error(`Dictionary not loaded with langId = ${langId}.`);\n            }\n            return msgId;\n        }\n    }\n\n\n    /**\n     * Fetches a plural translation.\n     * Tags are automatically wrapped with the curly bracket and will replace their dictionary string counterpart if found.\n     * If langId is null, the default lang will be used.\n     *\n     * The special tag {x} is used to replace the number in the translation.\n     */\n    _n(msgId, number, tags = {}, langId = null) {\n        if (null === langId) {\n            langId = this.defaultLang;\n        }\n        if (langId in this.dictionaries) {\n\n            var dict = this.dictionaries[langId];\n            if (msgId in dict) {\n\n                var pluralSelector = this.pluralSelectors[langId];\n                var pluralIndex = pluralSelector(number);\n                var messages = dict[msgId];\n                if (pluralIndex < messages.length) {\n                    var msg = dict[msgId][pluralIndex];\n                    for (var key in tags) {\n                        msg = msg.replace('{' + key + '}', tags[key]);\n                    }\n                    msg = msg.replace('{x}', number);\n                    return msg;\n                } else {\n                    if (true === this.strictMode) {\n                        this._error(`Plural form not found with id = ${msgId}, pluralIndex=${pluralIndex} and langId = ${langId}.`);\n                    }\n                    return msgId;\n                }\n\n            } else {\n                if (true === this.strictMode) {\n                    this._error(`Message not found with id = ${msgId} and langId = ${langId}.`);\n                }\n                return msgId;\n            }\n        } else {\n            if (true === this.strictMode) {\n                this._error(`Dictionary not loaded with langId = ${langId}.`);\n            }\n            return msgId;\n        }\n    }\n\n\n    //----------------------------------------\n    // PRIVATE STUFF\n    //----------------------------------------\n    _error(msg) {\n        throw new Error(\"Translatee error: \" + msg);\n    }\n\n    _getDefaultPluralSelector(langId) {\n        switch (langId) {\n            case 'en':\n            case 'eng':\n            case 'fr':\n            case 'fra':\n            default:\n\n                return function (n) {\n                    if (1 === n) {\n                        return 0;\n                    }\n                    return 1;\n                };\n        }\n    }\n}\n\n\nmodule.exports = Translatee;\n","class DropZoneHandler {\n\n    constructor(options) {\n        this.options = Object.assign({\n            container: null,\n            cssClass: \"dropzone-hover\",\n            onDrop: function (files) {\n                console.log(\"the files have been dropped.\", files);\n            },\n        }, options);\n\n\n        this.container = this.options.container;\n    }\n\n\n    start() {\n\n\n        const cssClass = this.options.cssClass;\n        const onDrop = this.options.onDrop;\n        const elDropZone = this.container;\n\n\n        function dragstart(e) {\n            e.stopPropagation();\n            e.preventDefault();\n\n            // https://stackoverflow.com/questions/10119514/html5-drag-drop-change-icon-cursor-while-dragging\n            e.dataTransfer.effectAllowed = \"copyMove\";\n        }\n\n        function dragenter(e) {\n            e.stopPropagation();\n            e.preventDefault();\n\n            // https://stackoverflow.com/questions/10119514/html5-drag-drop-change-icon-cursor-while-dragging\n            e.dataTransfer.dropEffect = \"copy\";\n        }\n\n        function dragover(e) {\n            e.stopPropagation();\n            e.preventDefault();\n            if (false === elDropZone.classList.contains(cssClass)) {\n                elDropZone.classList.add(cssClass);\n            }\n\n            // https://stackoverflow.com/questions/10119514/html5-drag-drop-change-icon-cursor-while-dragging\n            e.dataTransfer.dropEffect = \"copy\";\n        }\n\n        function dragleave(e) {\n            e.stopPropagation();\n            e.preventDefault();\n            elDropZone.classList.remove(cssClass);\n        }\n\n        function drop(e) {\n            e.stopPropagation();\n            e.preventDefault();\n            elDropZone.classList.remove(cssClass);\n\n\n            const dt = e.dataTransfer;\n            const files = dt.files;\n            let filesArray = [];\n            for (let i = 0; i < files.length; i++) {\n                filesArray.push(files[i]);\n            }\n            onDrop(filesArray);\n        }\n\n\n        elDropZone.addEventListener(\"dragstart\", dragstart, false);\n        elDropZone.addEventListener(\"dragenter\", dragenter, false);\n        elDropZone.addEventListener(\"dragleave\", dragleave, false);\n        elDropZone.addEventListener(\"dragover\", dragover, false);\n        elDropZone.addEventListener(\"drop\", drop, false);\n\n\n    }\n\n\n}\n\n\nmodule.exports = DropZoneHandler;","const jsx = require(\"js-extension-ling\");\n\nclass ChunkUploader {\n\n    constructor(options) {\n        /**\n         * Defaults: 5M every 100ms (50M every second)\n         */\n        this.timer = options.timer || 1;\n        this.sliceSize = options.chunkSize || 5 * 1024 * 1024;\n        this.serverUrl = options.serverUrl || \"/chunk-uploader.php\";\n\n\n        // this.onRequestError = function (e) {\n        //     console.log(\"ChunkUploader: an error occurred with the request.\")\n        // };\n        this.onChunkLoaded = options.onChunkLoaded || function (start, end, size, isLastChunk) {\n            let percent = Math.round(end / size * 100, 2);\n            console.log(`${percent}% of the chunks loaded`);\n        };\n\n        this.onChunkAborted = options.onChunkAborted || function (start, end, isLastChunk) {\n            console.log(`The chunk has been aborted: ${start}-${end}, isLastChunk=${isLastChunk}.`);\n        };\n        /**\n         * Sets a callback to control whether the received chunk is ok.\n         * Use this callback to interrupt the upload process at any chunk.\n         *\n         *\n         * The callback receives a clone of the response.\n         * (a clone is used so that the callback can analyze the response without consuming the real response\n         * body, which is eventually returned by the sendByChunks method.\n         *\n         * If the callback returns something else than true, the promise will be rejected.\n         * If the callback returns false, a default error message will be generated.\n         * If the callback returns a string, this string will be used as the error message.\n         *\n         * Note: this should be an async function.\n         *\n         */\n        this.onChunkResponseReceived = options.onChunkResponseReceived || async function (response) {\n            return true;\n        };\n\n        this._xhr = null;\n        this.controller = new AbortController();\n        this._is_aborted = false;\n        this._chunkFailed = false;\n\n    }\n\n\n    abort() {\n        this._is_aborted = true;\n        if (null !== this._xhr) {\n            this._xhr.abort();\n        } else {\n            this.controller.abort();\n        }\n    }\n\n\n    /**\n     * Returns a promise that resolves only when all chunks are uploaded.\n     * Note: you can use the abort method to abort at anytime before the promise resolves.\n     *\n     *\n     * - file: the js File/Blob object to upload.\n     * - data: map of key/value pairs to add to the request.\n     *      The following property names are reserved (i.e. you cannot use them):\n     *        - start\n     *        - end\n     *        - isLastChunk\n     *        - file\n     *\n     *\n     *\n     * Options:\n     *      - start: int=0, the byte of the blob to start the upload with.\n     *\n     *\n     * adapted from https://gist.github.com/shiawuen/1534477\n     **/\n    async sendByChunks(file, data, options) {\n\n        var start = options.start || 0;\n\n        this._is_aborted = false;\n        this._chunkFailed = false;\n        let $this = this;\n        return new Promise((resolve, reject) => {\n\n\n            var $this = this;\n            var size = file.size;\n\n            setTimeout(loop, this.timer);\n\n            async function loop() {\n                var isLastChunk = false;\n                var end = start + $this.sliceSize;\n\n                if (size - end <= 0) {\n                    isLastChunk = true;\n                    end = size;\n                }\n\n                var s = $this._slice(file, start, end);\n\n                if (false === $this._chunkFailed) {\n                    await $this._send(resolve, reject, s, start, end, size, isLastChunk, data);\n\n\n                    if (end < size) {\n                        start += $this.sliceSize;\n                        setTimeout(loop, $this.timer);\n                    }\n                }\n            }\n        });\n    }\n\n\n    //----------------------------------------\n    // PRIVATE\n    //----------------------------------------\n    async _send(resolve, reject, piece, start, end, size, isLastChunk, userData) {\n\n\n        var formdata = new FormData();\n        formdata.append('start', start);\n        formdata.append('end', end);\n        formdata.append('file', piece);\n        formdata.append('last_chunk', (isLastChunk ? 1 : 0));\n\n        formdata = jsx.toFormData(userData, formdata);\n\n\n        return this._sendViaFetch(resolve, reject, formdata, start, end, size, isLastChunk);\n        // return this._sendViaXMLHttpRequest(resolve, reject, formdata, start, end, size, isLastChunk);\n\n    }\n\n\n    /**\n     * Formalize file.slice\n     */\n    _slice(file, start, end) {\n        var slice = file.mozSlice ? file.mozSlice :\n            file.webkitSlice ? file.webkitSlice :\n                file.slice ? file.slice : this._noop;\n\n        return slice.bind(file)(start, end);\n    }\n\n    _noop() {\n\n    }\n\n\n    _sendViaFetch(resolve, reject, formdata, start, end, size, isLastChunk) {\n\n\n        return new Promise(async (_resolve, _reject) => {\n\n            let errMsg = `ChunkUploader: an error occurred with the chunk request (start:${start}, end: ${end}).`;\n\n            var response = await fetch(this.serverUrl, {\n                body: formdata,\n                method: \"POST\",\n                signal: this.controller.signal,\n            }).catch(e => {\n                if (true === this._is_aborted) {\n                    this.onChunkAborted(start, end, isLastChunk);\n                } else {\n                    _reject(errMsg);\n                }\n            });\n\n\n            if (true === this._is_aborted) {\n                this.onChunkAborted(start, end, isLastChunk);\n            } else {\n                if (true === response.ok) {\n\n\n                    let ret = await this.onChunkResponseReceived(response.clone());\n\n                    if (true === ret) {\n                        this.onChunkLoaded(start, end, size, isLastChunk);\n                        _resolve();\n\n                        if (true === isLastChunk) {\n                            resolve(response);\n                        }\n                    } else {\n                        if ('string' === typeof ret) {\n                            errMsg = ret;\n                        }\n                        _reject(errMsg);\n                    }\n                } else {\n                    _reject(errMsg);\n                }\n            }\n        }).catch((e) => {\n            reject(e);\n            this._chunkFailed = true;\n        });\n\n    }\n\n    /**\n     * Old, don't use this, I just keep it for reference\n     */\n    _sendViaXMLHttpRequest(resolve, reject, formdata, start, end, size, isLastChunk) {\n\n        return new Promise((_resolve, _reject) => {\n\n            var ajax = new XMLHttpRequest();\n            this._xhr = ajax;\n            ajax.open('POST', this.serverUrl, true);\n\n\n            // ajax.upload.addEventListener(\"progress\", function (e) {\n            //     var percent = Math.round((e.loaded / e.total) * 100, 2);\n            //     // console.log(\"progress\", e, percent, e.loaded, e.total);\n            // }, false);\n\n\n            // ajax.addEventListener(\"load\", function (e) {\n            //     e.stopPropagation();\n            //     e.preventDefault();\n            //     // console.log(\"load\", e);\n            // }, false);\n\n            ajax.addEventListener(\"error\", e => {\n                e.stopPropagation();\n                e.preventDefault();\n                let errMsg = `ChunkUploader: an error occurred with the chunk request (start:${start}, end: ${end}).`;\n                _reject(errMsg);\n                reject(errMsg);\n                // this.onRequestError(e);\n            }, false);\n\n\n            // ajax.addEventListener(\"abort\", function (e) {\n            //     e.stopPropagation();\n            //     e.preventDefault();\n            //     console.log(\"abort\", e);\n            // }, false);\n\n            ajax.onreadystatechange = () => {\n                if (ajax.readyState === 4) {\n                    this.onChunkLoaded(start, end, size, isLastChunk);\n\n                    _resolve();\n\n                    if (true === isLastChunk) {\n                        resolve(ajax);\n                    }\n                }\n            };\n            ajax.send(formdata);\n        });\n\n    }\n\n}\n\n\nmodule.exports = ChunkUploader;","module.exports = function atoa (a, n) { return Array.prototype.slice.call(a, n); }\n","var si = typeof setImmediate === 'function', tick;\nif (si) {\n  tick = function (fn) { setImmediate(fn); };\n} else {\n  tick = function (fn) { setTimeout(fn, 0); };\n}\n\nmodule.exports = tick;","'use strict';\n\nvar ticky = require('ticky');\n\nmodule.exports = function debounce (fn, args, ctx) {\n  if (!fn) { return; }\n  ticky(function run () {\n    fn.apply(ctx || null, args || []);\n  });\n};\n","'use strict';\n\nvar atoa = require('atoa');\nvar debounce = require('./debounce');\n\nmodule.exports = function emitter (thing, options) {\n  var opts = options || {};\n  var evt = {};\n  if (thing === undefined) { thing = {}; }\n  thing.on = function (type, fn) {\n    if (!evt[type]) {\n      evt[type] = [fn];\n    } else {\n      evt[type].push(fn);\n    }\n    return thing;\n  };\n  thing.once = function (type, fn) {\n    fn._once = true; // thing.off(fn) still works!\n    thing.on(type, fn);\n    return thing;\n  };\n  thing.off = function (type, fn) {\n    var c = arguments.length;\n    if (c === 1) {\n      delete evt[type];\n    } else if (c === 0) {\n      evt = {};\n    } else {\n      var et = evt[type];\n      if (!et) { return thing; }\n      et.splice(et.indexOf(fn), 1);\n    }\n    return thing;\n  };\n  thing.emit = function () {\n    var args = atoa(arguments);\n    return thing.emitterSnapshot(args.shift()).apply(this, args);\n  };\n  thing.emitterSnapshot = function (type) {\n    var et = (evt[type] || []).slice(0);\n    return function () {\n      var args = atoa(arguments);\n      var ctx = this || thing;\n      if (type === 'error' && opts.throws !== false && !et.length) { throw args.length === 1 ? args[0] : args; }\n      et.forEach(function emitter (listen) {\n        if (opts.async) { debounce(listen, args, ctx); } else { listen.apply(ctx, args); }\n        if (listen._once) { thing.off(type, listen); }\n      });\n      return thing;\n    };\n  };\n  return thing;\n};\n","\nvar NativeCustomEvent = global.CustomEvent;\n\nfunction useNative () {\n  try {\n    var p = new NativeCustomEvent('cat', { detail: { foo: 'bar' } });\n    return  'cat' === p.type && 'bar' === p.detail.foo;\n  } catch (e) {\n  }\n  return false;\n}\n\n/**\n * Cross-browser `CustomEvent` constructor.\n *\n * https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent.CustomEvent\n *\n * @public\n */\n\nmodule.exports = useNative() ? NativeCustomEvent :\n\n// IE >= 9\n'function' === typeof document.createEvent ? function CustomEvent (type, params) {\n  var e = document.createEvent('CustomEvent');\n  if (params) {\n    e.initCustomEvent(type, params.bubbles, params.cancelable, params.detail);\n  } else {\n    e.initCustomEvent(type, false, false, void 0);\n  }\n  return e;\n} :\n\n// IE <= 8\nfunction CustomEvent (type, params) {\n  var e = document.createEventObject();\n  e.type = type;\n  if (params) {\n    e.bubbles = Boolean(params.bubbles);\n    e.cancelable = Boolean(params.cancelable);\n    e.detail = params.detail;\n  } else {\n    e.bubbles = false;\n    e.cancelable = false;\n    e.detail = void 0;\n  }\n  return e;\n}\n","'use strict';\n\nvar eventmap = [];\nvar eventname = '';\nvar ron = /^on/;\n\nfor (eventname in global) {\n  if (ron.test(eventname)) {\n    eventmap.push(eventname.slice(2));\n  }\n}\n\nmodule.exports = eventmap;\n","'use strict';\n\nvar customEvent = require('custom-event');\nvar eventmap = require('./eventmap');\nvar doc = global.document;\nvar addEvent = addEventEasy;\nvar removeEvent = removeEventEasy;\nvar hardCache = [];\n\nif (!global.addEventListener) {\n  addEvent = addEventHard;\n  removeEvent = removeEventHard;\n}\n\nmodule.exports = {\n  add: addEvent,\n  remove: removeEvent,\n  fabricate: fabricateEvent\n};\n\nfunction addEventEasy (el, type, fn, capturing) {\n  return el.addEventListener(type, fn, capturing);\n}\n\nfunction addEventHard (el, type, fn) {\n  return el.attachEvent('on' + type, wrap(el, type, fn));\n}\n\nfunction removeEventEasy (el, type, fn, capturing) {\n  return el.removeEventListener(type, fn, capturing);\n}\n\nfunction removeEventHard (el, type, fn) {\n  var listener = unwrap(el, type, fn);\n  if (listener) {\n    return el.detachEvent('on' + type, listener);\n  }\n}\n\nfunction fabricateEvent (el, type, model) {\n  var e = eventmap.indexOf(type) === -1 ? makeCustomEvent() : makeClassicEvent();\n  if (el.dispatchEvent) {\n    el.dispatchEvent(e);\n  } else {\n    el.fireEvent('on' + type, e);\n  }\n  function makeClassicEvent () {\n    var e;\n    if (doc.createEvent) {\n      e = doc.createEvent('Event');\n      e.initEvent(type, true, true);\n    } else if (doc.createEventObject) {\n      e = doc.createEventObject();\n    }\n    return e;\n  }\n  function makeCustomEvent () {\n    return new customEvent(type, { detail: model });\n  }\n}\n\nfunction wrapperFactory (el, type, fn) {\n  return function wrapper (originalEvent) {\n    var e = originalEvent || global.event;\n    e.target = e.target || e.srcElement;\n    e.preventDefault = e.preventDefault || function preventDefault () { e.returnValue = false; };\n    e.stopPropagation = e.stopPropagation || function stopPropagation () { e.cancelBubble = true; };\n    e.which = e.which || e.keyCode;\n    fn.call(el, e);\n  };\n}\n\nfunction wrap (el, type, fn) {\n  var wrapper = unwrap(el, type, fn) || wrapperFactory(el, type, fn);\n  hardCache.push({\n    wrapper: wrapper,\n    element: el,\n    type: type,\n    fn: fn\n  });\n  return wrapper;\n}\n\nfunction unwrap (el, type, fn) {\n  var i = find(el, type, fn);\n  if (i) {\n    var wrapper = hardCache[i].wrapper;\n    hardCache.splice(i, 1); // free up a tad of memory\n    return wrapper;\n  }\n}\n\nfunction find (el, type, fn) {\n  var i, item;\n  for (i = 0; i < hardCache.length; i++) {\n    item = hardCache[i];\n    if (item.element === el && item.type === type && item.fn === fn) {\n      return i;\n    }\n  }\n}\n","'use strict';\n\nvar cache = {};\nvar start = '(?:^|\\\\s)';\nvar end = '(?:\\\\s|$)';\n\nfunction lookupClass (className) {\n  var cached = cache[className];\n  if (cached) {\n    cached.lastIndex = 0;\n  } else {\n    cache[className] = cached = new RegExp(start + className + end, 'g');\n  }\n  return cached;\n}\n\nfunction addClass (el, className) {\n  var current = el.className;\n  if (!current.length) {\n    el.className = className;\n  } else if (!lookupClass(className).test(current)) {\n    el.className += ' ' + className;\n  }\n}\n\nfunction rmClass (el, className) {\n  el.className = el.className.replace(lookupClass(className), ' ').trim();\n}\n\nmodule.exports = {\n  add: addClass,\n  rm: rmClass\n};\n","'use strict';\n\nvar emitter = require('contra/emitter');\nvar crossvent = require('crossvent');\nvar classes = require('./classes');\nvar doc = document;\nvar documentElement = doc.documentElement;\n\nfunction dragula (initialContainers, options) {\n  var len = arguments.length;\n  if (len === 1 && Array.isArray(initialContainers) === false) {\n    options = initialContainers;\n    initialContainers = [];\n  }\n  var _mirror; // mirror image\n  var _source; // source container\n  var _item; // item being dragged\n  var _offsetX; // reference x\n  var _offsetY; // reference y\n  var _moveX; // reference move x\n  var _moveY; // reference move y\n  var _initialSibling; // reference sibling when grabbed\n  var _currentSibling; // reference sibling now\n  var _copy; // item used for copying\n  var _renderTimer; // timer for setTimeout renderMirrorImage\n  var _lastDropTarget = null; // last container item was over\n  var _grabbed; // holds mousedown context until first mousemove\n\n  var o = options || {};\n  if (o.moves === void 0) { o.moves = always; }\n  if (o.accepts === void 0) { o.accepts = always; }\n  if (o.invalid === void 0) { o.invalid = invalidTarget; }\n  if (o.containers === void 0) { o.containers = initialContainers || []; }\n  if (o.isContainer === void 0) { o.isContainer = never; }\n  if (o.copy === void 0) { o.copy = false; }\n  if (o.copySortSource === void 0) { o.copySortSource = false; }\n  if (o.revertOnSpill === void 0) { o.revertOnSpill = false; }\n  if (o.removeOnSpill === void 0) { o.removeOnSpill = false; }\n  if (o.direction === void 0) { o.direction = 'vertical'; }\n  if (o.ignoreInputTextSelection === void 0) { o.ignoreInputTextSelection = true; }\n  if (o.mirrorContainer === void 0) { o.mirrorContainer = doc.body; }\n\n  var drake = emitter({\n    containers: o.containers,\n    start: manualStart,\n    end: end,\n    cancel: cancel,\n    remove: remove,\n    destroy: destroy,\n    canMove: canMove,\n    dragging: false\n  });\n\n  if (o.removeOnSpill === true) {\n    drake.on('over', spillOver).on('out', spillOut);\n  }\n\n  events();\n\n  return drake;\n\n  function isContainer (el) {\n    return drake.containers.indexOf(el) !== -1 || o.isContainer(el);\n  }\n\n  function events (remove) {\n    var op = remove ? 'remove' : 'add';\n    touchy(documentElement, op, 'mousedown', grab);\n    touchy(documentElement, op, 'mouseup', release);\n  }\n\n  function eventualMovements (remove) {\n    var op = remove ? 'remove' : 'add';\n    touchy(documentElement, op, 'mousemove', startBecauseMouseMoved);\n  }\n\n  function movements (remove) {\n    var op = remove ? 'remove' : 'add';\n    crossvent[op](documentElement, 'selectstart', preventGrabbed); // IE8\n    crossvent[op](documentElement, 'click', preventGrabbed);\n  }\n\n  function destroy () {\n    events(true);\n    release({});\n  }\n\n  function preventGrabbed (e) {\n    if (_grabbed) {\n      e.preventDefault();\n    }\n  }\n\n  function grab (e) {\n    _moveX = e.clientX;\n    _moveY = e.clientY;\n\n    var ignore = whichMouseButton(e) !== 1 || e.metaKey || e.ctrlKey;\n    if (ignore) {\n      return; // we only care about honest-to-god left clicks and touch events\n    }\n    var item = e.target;\n    var context = canStart(item);\n    if (!context) {\n      return;\n    }\n    _grabbed = context;\n    eventualMovements();\n    if (e.type === 'mousedown') {\n      if (isInput(item)) { // see also: https://github.com/bevacqua/dragula/issues/208\n        item.focus(); // fixes https://github.com/bevacqua/dragula/issues/176\n      } else {\n        e.preventDefault(); // fixes https://github.com/bevacqua/dragula/issues/155\n      }\n    }\n  }\n\n  function startBecauseMouseMoved (e) {\n    if (!_grabbed) {\n      return;\n    }\n    if (whichMouseButton(e) === 0) {\n      release({});\n      return; // when text is selected on an input and then dragged, mouseup doesn't fire. this is our only hope\n    }\n    // truthy check fixes #239, equality fixes #207\n    if (e.clientX !== void 0 && e.clientX === _moveX && e.clientY !== void 0 && e.clientY === _moveY) {\n      return;\n    }\n    if (o.ignoreInputTextSelection) {\n      var clientX = getCoord('clientX', e);\n      var clientY = getCoord('clientY', e);\n      var elementBehindCursor = doc.elementFromPoint(clientX, clientY);\n      if (isInput(elementBehindCursor)) {\n        return;\n      }\n    }\n\n    var grabbed = _grabbed; // call to end() unsets _grabbed\n    eventualMovements(true);\n    movements();\n    end();\n    start(grabbed);\n\n    var offset = getOffset(_item);\n    _offsetX = getCoord('pageX', e) - offset.left;\n    _offsetY = getCoord('pageY', e) - offset.top;\n\n    classes.add(_copy || _item, 'gu-transit');\n    renderMirrorImage();\n    drag(e);\n  }\n\n  function canStart (item) {\n    if (drake.dragging && _mirror) {\n      return;\n    }\n    if (isContainer(item)) {\n      return; // don't drag container itself\n    }\n    var handle = item;\n    while (getParent(item) && isContainer(getParent(item)) === false) {\n      if (o.invalid(item, handle)) {\n        return;\n      }\n      item = getParent(item); // drag target should be a top element\n      if (!item) {\n        return;\n      }\n    }\n    var source = getParent(item);\n    if (!source) {\n      return;\n    }\n    if (o.invalid(item, handle)) {\n      return;\n    }\n\n    var movable = o.moves(item, source, handle, nextEl(item));\n    if (!movable) {\n      return;\n    }\n\n    return {\n      item: item,\n      source: source\n    };\n  }\n\n  function canMove (item) {\n    return !!canStart(item);\n  }\n\n  function manualStart (item) {\n    var context = canStart(item);\n    if (context) {\n      start(context);\n    }\n  }\n\n  function start (context) {\n    if (isCopy(context.item, context.source)) {\n      _copy = context.item.cloneNode(true);\n      drake.emit('cloned', _copy, context.item, 'copy');\n    }\n\n    _source = context.source;\n    _item = context.item;\n    _initialSibling = _currentSibling = nextEl(context.item);\n\n    drake.dragging = true;\n    drake.emit('drag', _item, _source);\n  }\n\n  function invalidTarget () {\n    return false;\n  }\n\n  function end () {\n    if (!drake.dragging) {\n      return;\n    }\n    var item = _copy || _item;\n    drop(item, getParent(item));\n  }\n\n  function ungrab () {\n    _grabbed = false;\n    eventualMovements(true);\n    movements(true);\n  }\n\n  function release (e) {\n    ungrab();\n\n    if (!drake.dragging) {\n      return;\n    }\n    var item = _copy || _item;\n    var clientX = getCoord('clientX', e);\n    var clientY = getCoord('clientY', e);\n    var elementBehindCursor = getElementBehindPoint(_mirror, clientX, clientY);\n    var dropTarget = findDropTarget(elementBehindCursor, clientX, clientY);\n    if (dropTarget && ((_copy && o.copySortSource) || (!_copy || dropTarget !== _source))) {\n      drop(item, dropTarget);\n    } else if (o.removeOnSpill) {\n      remove();\n    } else {\n      cancel();\n    }\n  }\n\n  function drop (item, target) {\n    var parent = getParent(item);\n    if (_copy && o.copySortSource && target === _source) {\n      parent.removeChild(_item);\n    }\n    if (isInitialPlacement(target)) {\n      drake.emit('cancel', item, _source, _source);\n    } else {\n      drake.emit('drop', item, target, _source, _currentSibling);\n    }\n    cleanup();\n  }\n\n  function remove () {\n    if (!drake.dragging) {\n      return;\n    }\n    var item = _copy || _item;\n    var parent = getParent(item);\n    if (parent) {\n      parent.removeChild(item);\n    }\n    drake.emit(_copy ? 'cancel' : 'remove', item, parent, _source);\n    cleanup();\n  }\n\n  function cancel (revert) {\n    if (!drake.dragging) {\n      return;\n    }\n    var reverts = arguments.length > 0 ? revert : o.revertOnSpill;\n    var item = _copy || _item;\n    var parent = getParent(item);\n    var initial = isInitialPlacement(parent);\n    if (initial === false && reverts) {\n      if (_copy) {\n        if (parent) {\n          parent.removeChild(_copy);\n        }\n      } else {\n        _source.insertBefore(item, _initialSibling);\n      }\n    }\n    if (initial || reverts) {\n      drake.emit('cancel', item, _source, _source);\n    } else {\n      drake.emit('drop', item, parent, _source, _currentSibling);\n    }\n    cleanup();\n  }\n\n  function cleanup () {\n    var item = _copy || _item;\n    ungrab();\n    removeMirrorImage();\n    if (item) {\n      classes.rm(item, 'gu-transit');\n    }\n    if (_renderTimer) {\n      clearTimeout(_renderTimer);\n    }\n    drake.dragging = false;\n    if (_lastDropTarget) {\n      drake.emit('out', item, _lastDropTarget, _source);\n    }\n    drake.emit('dragend', item);\n    _source = _item = _copy = _initialSibling = _currentSibling = _renderTimer = _lastDropTarget = null;\n  }\n\n  function isInitialPlacement (target, s) {\n    var sibling;\n    if (s !== void 0) {\n      sibling = s;\n    } else if (_mirror) {\n      sibling = _currentSibling;\n    } else {\n      sibling = nextEl(_copy || _item);\n    }\n    return target === _source && sibling === _initialSibling;\n  }\n\n  function findDropTarget (elementBehindCursor, clientX, clientY) {\n    var target = elementBehindCursor;\n    while (target && !accepted()) {\n      target = getParent(target);\n    }\n    return target;\n\n    function accepted () {\n      var droppable = isContainer(target);\n      if (droppable === false) {\n        return false;\n      }\n\n      var immediate = getImmediateChild(target, elementBehindCursor);\n      var reference = getReference(target, immediate, clientX, clientY);\n      var initial = isInitialPlacement(target, reference);\n      if (initial) {\n        return true; // should always be able to drop it right back where it was\n      }\n      return o.accepts(_item, target, _source, reference);\n    }\n  }\n\n  function drag (e) {\n    if (!_mirror) {\n      return;\n    }\n    e.preventDefault();\n\n    var clientX = getCoord('clientX', e);\n    var clientY = getCoord('clientY', e);\n    var x = clientX - _offsetX;\n    var y = clientY - _offsetY;\n\n    _mirror.style.left = x + 'px';\n    _mirror.style.top = y + 'px';\n\n    var item = _copy || _item;\n    var elementBehindCursor = getElementBehindPoint(_mirror, clientX, clientY);\n    var dropTarget = findDropTarget(elementBehindCursor, clientX, clientY);\n    var changed = dropTarget !== null && dropTarget !== _lastDropTarget;\n    if (changed || dropTarget === null) {\n      out();\n      _lastDropTarget = dropTarget;\n      over();\n    }\n    var parent = getParent(item);\n    if (dropTarget === _source && _copy && !o.copySortSource) {\n      if (parent) {\n        parent.removeChild(item);\n      }\n      return;\n    }\n    var reference;\n    var immediate = getImmediateChild(dropTarget, elementBehindCursor);\n    if (immediate !== null) {\n      reference = getReference(dropTarget, immediate, clientX, clientY);\n    } else if (o.revertOnSpill === true && !_copy) {\n      reference = _initialSibling;\n      dropTarget = _source;\n    } else {\n      if (_copy && parent) {\n        parent.removeChild(item);\n      }\n      return;\n    }\n    if (\n      (reference === null && changed) ||\n      reference !== item &&\n      reference !== nextEl(item)\n    ) {\n      _currentSibling = reference;\n      dropTarget.insertBefore(item, reference);\n      drake.emit('shadow', item, dropTarget, _source);\n    }\n    function moved (type) { drake.emit(type, item, _lastDropTarget, _source); }\n    function over () { if (changed) { moved('over'); } }\n    function out () { if (_lastDropTarget) { moved('out'); } }\n  }\n\n  function spillOver (el) {\n    classes.rm(el, 'gu-hide');\n  }\n\n  function spillOut (el) {\n    if (drake.dragging) { classes.add(el, 'gu-hide'); }\n  }\n\n  function renderMirrorImage () {\n    if (_mirror) {\n      return;\n    }\n    var rect = _item.getBoundingClientRect();\n    _mirror = _item.cloneNode(true);\n    _mirror.style.width = getRectWidth(rect) + 'px';\n    _mirror.style.height = getRectHeight(rect) + 'px';\n    classes.rm(_mirror, 'gu-transit');\n    classes.add(_mirror, 'gu-mirror');\n    o.mirrorContainer.appendChild(_mirror);\n    touchy(documentElement, 'add', 'mousemove', drag);\n    classes.add(o.mirrorContainer, 'gu-unselectable');\n    drake.emit('cloned', _mirror, _item, 'mirror');\n  }\n\n  function removeMirrorImage () {\n    if (_mirror) {\n      classes.rm(o.mirrorContainer, 'gu-unselectable');\n      touchy(documentElement, 'remove', 'mousemove', drag);\n      getParent(_mirror).removeChild(_mirror);\n      _mirror = null;\n    }\n  }\n\n  function getImmediateChild (dropTarget, target) {\n    var immediate = target;\n    while (immediate !== dropTarget && getParent(immediate) !== dropTarget) {\n      immediate = getParent(immediate);\n    }\n    if (immediate === documentElement) {\n      return null;\n    }\n    return immediate;\n  }\n\n  function getReference (dropTarget, target, x, y) {\n    var horizontal = o.direction === 'horizontal';\n    var reference = target !== dropTarget ? inside() : outside();\n    return reference;\n\n    function outside () { // slower, but able to figure out any position\n      var len = dropTarget.children.length;\n      var i;\n      var el;\n      var rect;\n      for (i = 0; i < len; i++) {\n        el = dropTarget.children[i];\n        rect = el.getBoundingClientRect();\n        if (horizontal && (rect.left + rect.width / 2) > x) { return el; }\n        if (!horizontal && (rect.top + rect.height / 2) > y) { return el; }\n      }\n      return null;\n    }\n\n    function inside () { // faster, but only available if dropped inside a child element\n      var rect = target.getBoundingClientRect();\n      if (horizontal) {\n        return resolve(x > rect.left + getRectWidth(rect) / 2);\n      }\n      return resolve(y > rect.top + getRectHeight(rect) / 2);\n    }\n\n    function resolve (after) {\n      return after ? nextEl(target) : target;\n    }\n  }\n\n  function isCopy (item, container) {\n    return typeof o.copy === 'boolean' ? o.copy : o.copy(item, container);\n  }\n}\n\nfunction touchy (el, op, type, fn) {\n  var touch = {\n    mouseup: 'touchend',\n    mousedown: 'touchstart',\n    mousemove: 'touchmove'\n  };\n  var pointers = {\n    mouseup: 'pointerup',\n    mousedown: 'pointerdown',\n    mousemove: 'pointermove'\n  };\n  var microsoft = {\n    mouseup: 'MSPointerUp',\n    mousedown: 'MSPointerDown',\n    mousemove: 'MSPointerMove'\n  };\n  if (global.navigator.pointerEnabled) {\n    crossvent[op](el, pointers[type], fn);\n  } else if (global.navigator.msPointerEnabled) {\n    crossvent[op](el, microsoft[type], fn);\n  } else {\n    crossvent[op](el, touch[type], fn);\n    crossvent[op](el, type, fn);\n  }\n}\n\nfunction whichMouseButton (e) {\n  if (e.touches !== void 0) { return e.touches.length; }\n  if (e.which !== void 0 && e.which !== 0) { return e.which; } // see https://github.com/bevacqua/dragula/issues/261\n  if (e.buttons !== void 0) { return e.buttons; }\n  var button = e.button;\n  if (button !== void 0) { // see https://github.com/jquery/jquery/blob/99e8ff1baa7ae341e94bb89c3e84570c7c3ad9ea/src/event.js#L573-L575\n    return button & 1 ? 1 : button & 2 ? 3 : (button & 4 ? 2 : 0);\n  }\n}\n\nfunction getOffset (el) {\n  var rect = el.getBoundingClientRect();\n  return {\n    left: rect.left + getScroll('scrollLeft', 'pageXOffset'),\n    top: rect.top + getScroll('scrollTop', 'pageYOffset')\n  };\n}\n\nfunction getScroll (scrollProp, offsetProp) {\n  if (typeof global[offsetProp] !== 'undefined') {\n    return global[offsetProp];\n  }\n  if (documentElement.clientHeight) {\n    return documentElement[scrollProp];\n  }\n  return doc.body[scrollProp];\n}\n\nfunction getElementBehindPoint (point, x, y) {\n  var p = point || {};\n  var state = p.className;\n  var el;\n  p.className += ' gu-hide';\n  el = doc.elementFromPoint(x, y);\n  p.className = state;\n  return el;\n}\n\nfunction never () { return false; }\nfunction always () { return true; }\nfunction getRectWidth (rect) { return rect.width || (rect.right - rect.left); }\nfunction getRectHeight (rect) { return rect.height || (rect.bottom - rect.top); }\nfunction getParent (el) { return el.parentNode === doc ? null : el.parentNode; }\nfunction isInput (el) { return el.tagName === 'INPUT' || el.tagName === 'TEXTAREA' || el.tagName === 'SELECT' || isEditable(el); }\nfunction isEditable (el) {\n  if (!el) { return false; } // no parents were editable\n  if (el.contentEditable === 'false') { return false; } // stop the lookup\n  if (el.contentEditable === 'true') { return true; } // found a contentEditable element in the chain\n  return isEditable(getParent(el)); // contentEditable is set to 'inherit'\n}\n\nfunction nextEl (el) {\n  return el.nextElementSibling || manually();\n  function manually () {\n    var sibling = el;\n    do {\n      sibling = sibling.nextSibling;\n    } while (sibling && sibling.nodeType !== 1);\n    return sibling;\n  }\n}\n\nfunction getEventHost (e) {\n  // on touchend event, we have to use `e.changedTouches`\n  // see http://stackoverflow.com/questions/7192563/touchend-event-properties\n  // see https://github.com/bevacqua/dragula/issues/34\n  if (e.targetTouches && e.targetTouches.length) {\n    return e.targetTouches[0];\n  }\n  if (e.changedTouches && e.changedTouches.length) {\n    return e.changedTouches[0];\n  }\n  return e;\n}\n\nfunction getCoord (coord, e) {\n  var host = getEventHost(e);\n  var missMap = {\n    pageX: 'clientX', // IE8\n    pageY: 'clientY' // IE8\n  };\n  if (coord in missMap && !(coord in host) && missMap[coord] in host) {\n    coord = missMap[coord];\n  }\n  return host[coord];\n}\n\nmodule.exports = dragula;\n","import { noop, safe_not_equal, subscribe, run_all, is_function } from '../internal';\nexport { get_store_value as get } from '../internal';\n\nconst subscriber_queue = [];\n/**\n * Creates a `Readable` store that allows reading by subscription.\n * @param value initial value\n * @param {StartStopNotifier}start start and stop notifications for subscriptions\n */\nfunction readable(value, start) {\n    return {\n        subscribe: writable(value, start).subscribe\n    };\n}\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n * @param {*=}value initial value\n * @param {StartStopNotifier=}start start and stop notifications for subscriptions\n */\nfunction writable(value, start = noop) {\n    let stop;\n    const subscribers = [];\n    function set(new_value) {\n        if (safe_not_equal(value, new_value)) {\n            value = new_value;\n            if (stop) { // store is ready\n                const run_queue = !subscriber_queue.length;\n                for (let i = 0; i < subscribers.length; i += 1) {\n                    const s = subscribers[i];\n                    s[1]();\n                    subscriber_queue.push(s, value);\n                }\n                if (run_queue) {\n                    for (let i = 0; i < subscriber_queue.length; i += 2) {\n                        subscriber_queue[i][0](subscriber_queue[i + 1]);\n                    }\n                    subscriber_queue.length = 0;\n                }\n            }\n        }\n    }\n    function update(fn) {\n        set(fn(value));\n    }\n    function subscribe(run, invalidate = noop) {\n        const subscriber = [run, invalidate];\n        subscribers.push(subscriber);\n        if (subscribers.length === 1) {\n            stop = start(set) || noop;\n        }\n        run(value);\n        return () => {\n            const index = subscribers.indexOf(subscriber);\n            if (index !== -1) {\n                subscribers.splice(index, 1);\n            }\n            if (subscribers.length === 0) {\n                stop();\n                stop = null;\n            }\n        };\n    }\n    return { set, update, subscribe };\n}\nfunction derived(stores, fn, initial_value) {\n    const single = !Array.isArray(stores);\n    const stores_array = single\n        ? [stores]\n        : stores;\n    const auto = fn.length < 2;\n    return readable(initial_value, (set) => {\n        let inited = false;\n        const values = [];\n        let pending = 0;\n        let cleanup = noop;\n        const sync = () => {\n            if (pending) {\n                return;\n            }\n            cleanup();\n            const result = fn(single ? values[0] : values, set);\n            if (auto) {\n                set(result);\n            }\n            else {\n                cleanup = is_function(result) ? result : noop;\n            }\n        };\n        const unsubscribers = stores_array.map((store, i) => subscribe(store, (value) => {\n            values[i] = value;\n            pending &= ~(1 << i);\n            if (inited) {\n                sync();\n            }\n        }, () => {\n            pending |= (1 << i);\n        }));\n        inited = true;\n        sync();\n        return function stop() {\n            run_all(unsubscribers);\n            cleanup();\n        };\n    });\n}\n\nexport { derived, readable, writable };\n","export default function draggable(node, _options = {}) {\n    let x;\n    let y;\n    let options = Object.assign({\n        /**\n         *\n         * Defines which mouse button(s) will initiate the drag.\n         *\n         * https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/button\n         * - main: left\n         * - aux: middle wheel\n         * - secondary: right\n         *\n         * You can pass an array.\n         */\n        startClick: \"main\",\n        /**\n         * Triggered before the dragging starts.\n         * Opportunity to prevent the dragging by returning false.\n         *\n         * The callback accepts the following parameters:\n         * - event: the mousedown event received by this action when the user mouses down the element.\n         */\n        onStartDragBefore: function (event) {\n\n\n        },\n    }, _options);\n    let isDragging = false;\n\n\n\n    function handleMousedown(event) {\n\n        //----------------------------------------\n        // MOUSE BUTTON FILTERING\n        //----------------------------------------\n        let startClick = options.startClick;\n        if (false === Array.isArray(options.startClick)) {\n            startClick = [options.startClick];\n        }\n        startClick = startClick.map(btn => {\n            let ret;\n            switch (btn) {\n                case 'main':\n                    ret = 0;\n                    break;\n                case 'aux':\n                    ret = 1;\n                    break;\n                case 'secondary':\n                    ret = 2;\n                    break;\n            }\n            return ret;\n        });\n        if (false === startClick.includes(event.button)) {\n            return;\n        }\n\n\n        let userRet = options.onStartDragBefore(event);\n        if (false === userRet) {\n            return;\n        }\n        isDragging = true;\n\n\n        //----------------------------------------\n        //\n        //----------------------------------------\n\n        x = event.clientX;\n        y = event.clientY;\n\n        node.dispatchEvent(new CustomEvent('dragstart', {\n            detail: { x, y }\n        }));\n\n\n        window.addEventListener('mousemove', handleMousemove);\n        window.addEventListener('mouseup', handleMouseup);\n\n        // document.body.addEventListener('mouseleave', handleMouseLeave);\n        // document.body.addEventListener('mouseenter', handleMouseEnter);\n\n\n        document.body\n\n\n    }\n\n    function handleMouseLeave(event) {\n        console.log(\"mouse leaving body\");\n    }\n\n    function handleMouseEnter(event) {\n        console.log(\"mouse enters body\");\n    }\n\n\n\n    function handleMousemove(event) {\n        if (false === isDragging) {\n            return;\n        }\n\n        const dx = event.clientX - x;\n        const dy = event.clientY - y;\n        x = event.clientX;\n        y = event.clientY;\n\n        node.dispatchEvent(new CustomEvent('dragmove', {\n            detail: { x, y, dx, dy }\n        }));\n    }\n\n    function handleMouseup(event) {\n        isDragging = false;        \n        x = event.clientX;\n        y = event.clientY;\n\n        node.dispatchEvent(new CustomEvent('dragend', {\n            detail: { x, y }\n        }));\n\n        window.removeEventListener('mousemove', handleMousemove);\n        window.removeEventListener('mouseup', handleMouseup);\n    }\n\n    node.addEventListener('mousedown', handleMousedown);\n\n    return {\n        destroy() {\n            node.removeEventListener('mousedown', handleMousedown);\n        }\n    };\n}","<script>\n\n\n    import {writable} from 'svelte/store';\n    import {createEventDispatcher} from 'svelte';\n    import {beforeUpdate} from 'svelte';\n    import draggable from \"svelte-action-draggable\";\n\n\n    export let options = {};\n    export let open = true;\n\n\n    let maxTop = 0;\n    let maxRight = 0;\n    let maxBottom = 0;\n    let maxLeft = 0;\n\n\n    const coords = writable({x: 0, y: 0});\n    const styleId = \"my-draggable-tmp-style\";\n    const dispatch = createEventDispatcher();\n    let draggableOptions = {\n        startClick: \"main\",\n        onStartDragBefore: function (event) {\n\n            if (null !== modalOptions.dragHandle) {\n                let dragHandle = event.target.closest(modalOptions.dragHandle);\n                if (null === dragHandle) {\n                    return false;\n                }\n            }\n        },\n    };\n    let displayStyle = '';\n\n\n    let modalOptions = Object.assign({\n        /**\n         * A selector identifying the drag handle.\n         * If null, the whole modal serves as a drag handle.\n         */\n        dragHandle: null,\n        /**\n         * Whether the modal should be trapped into the viewport.\n         * If false, the user can drag the modal out of the window (and loose it).\n         */\n        keepInViewport: true,\n    }, options);\n\n\n    function handleDragMove(event) {\n        coords.update($coords => {\n            let newX = $coords.x + event.detail.dx;\n            let newY = $coords.y + event.detail.dy;\n\n\n            if (true === modalOptions.keepInViewport) {\n                if (newX < maxLeft) {\n                    newX = maxLeft;\n                }\n                if (newX > maxRight) {\n                    newX = maxRight;\n                }\n                if (newY < maxTop) {\n                    newY = maxTop;\n                }\n                if (newY > maxBottom) {\n                    newY = maxBottom;\n                }\n            }\n\n            return ({\n                x: newX,\n                y: newY,\n            });\n        });\n\n        dispatch('dragmove', event.detail);\n\n\n    }\n\n    function handleDragStart(event) {\n\n        //----------------------------------------\n        // REMOVE BACKGROUND SELECTION WHILE DRAGGING\n        //----------------------------------------\n        let elStyle = document.getElementById(styleId);\n        if (null === elStyle) {\n            var elHead = document.getElementsByTagName('head')[0];\n            elStyle = document.createElement('style');\n            elStyle.type = 'text/css';\n            elHead.appendChild(elStyle);\n            elStyle.id = styleId;\n            elStyle.innerHTML = '.draggable-unselectable > * {user-select: none;}';\n        }\n        this.classList.add('draggable-unselectable');\n\n\n        if (true === modalOptions.keepInViewport) {\n\n            let r = event.target.firstChild.getBoundingClientRect();\n            maxLeft = -r.left + $coords.x;\n            maxRight = window.innerWidth - r.right + $coords.x;\n            maxTop = -r.top + $coords.y;\n            maxBottom = window.innerHeight - r.bottom + $coords.y;\n        }\n\n    }\n\n    function handleDragEnd(event) {\n        this.classList.remove('draggable-unselectable');\n        let elStyle = document.getElementById(styleId);\n        if (null !== elStyle) {\n            elStyle.remove();\n        }\n    }\n\n\n    //----------------------------------------\n    // POLYFILLS\n    //----------------------------------------\n    // CustomEvent polyfill ie11\n    // https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent#Polyfill\n    (function () {\n        if (typeof window.CustomEvent === \"function\") return false;\n\n        function CustomEvent(event, params) {\n            params = params || {bubbles: false, cancelable: false, detail: null};\n            var evt = document.createEvent('CustomEvent');\n            evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n            return evt;\n        }\n\n        window.CustomEvent = CustomEvent;\n    })();\n\n\n    beforeUpdate(() => {\n        if (true === open) {\n            // note: could be display: block, or display: inline, or etc... so we don't set it\n            displayStyle = '';\n        } else {\n            displayStyle = 'display: none;'\n        }\n    });\n\n    function closeModal() {\n        open = false;\n    }\n\n\n</script>\n\n\n<div\n        use:draggable={draggableOptions}\n        on:dragstart={handleDragStart}\n        on:dragmove={handleDragMove}\n        on:dragend={handleDragEnd}\n        style=\"\n        {displayStyle}\n        transform: translate({$coords.x}px,{$coords.y}px)\n        \"\n>\n    <slot></slot>\n</div>\n\n\n","/*!\n * Cropper.js v1.5.6\n * https://fengyuanchen.github.io/cropperjs\n *\n * Copyright 2015-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2019-10-04T04:33:48.372Z\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, global.Cropper = factory());\n}(this, function () { 'use strict';\n\n  function _typeof(obj) {\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      _typeof = function (obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return _typeof(obj);\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n      if (enumerableOnly) symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n      keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n  }\n\n  function _objectSpread2(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n\n      if (i % 2) {\n        ownKeys(source, true).forEach(function (key) {\n          _defineProperty(target, key, source[key]);\n        });\n      } else if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n      } else {\n        ownKeys(source).forEach(function (key) {\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n      }\n    }\n\n    return target;\n  }\n\n  function _toConsumableArray(arr) {\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n  }\n\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) {\n      for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n      return arr2;\n    }\n  }\n\n  function _iterableToArray(iter) {\n    if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n  }\n\n  function _nonIterableSpread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n  }\n\n  var IS_BROWSER = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  var WINDOW = IS_BROWSER ? window : {};\n  var IS_TOUCH_DEVICE = IS_BROWSER ? 'ontouchstart' in WINDOW.document.documentElement : false;\n  var HAS_POINTER_EVENT = IS_BROWSER ? 'PointerEvent' in WINDOW : false;\n  var NAMESPACE = 'cropper'; // Actions\n\n  var ACTION_ALL = 'all';\n  var ACTION_CROP = 'crop';\n  var ACTION_MOVE = 'move';\n  var ACTION_ZOOM = 'zoom';\n  var ACTION_EAST = 'e';\n  var ACTION_WEST = 'w';\n  var ACTION_SOUTH = 's';\n  var ACTION_NORTH = 'n';\n  var ACTION_NORTH_EAST = 'ne';\n  var ACTION_NORTH_WEST = 'nw';\n  var ACTION_SOUTH_EAST = 'se';\n  var ACTION_SOUTH_WEST = 'sw'; // Classes\n\n  var CLASS_CROP = \"\".concat(NAMESPACE, \"-crop\");\n  var CLASS_DISABLED = \"\".concat(NAMESPACE, \"-disabled\");\n  var CLASS_HIDDEN = \"\".concat(NAMESPACE, \"-hidden\");\n  var CLASS_HIDE = \"\".concat(NAMESPACE, \"-hide\");\n  var CLASS_INVISIBLE = \"\".concat(NAMESPACE, \"-invisible\");\n  var CLASS_MODAL = \"\".concat(NAMESPACE, \"-modal\");\n  var CLASS_MOVE = \"\".concat(NAMESPACE, \"-move\"); // Data keys\n\n  var DATA_ACTION = \"\".concat(NAMESPACE, \"Action\");\n  var DATA_PREVIEW = \"\".concat(NAMESPACE, \"Preview\"); // Drag modes\n\n  var DRAG_MODE_CROP = 'crop';\n  var DRAG_MODE_MOVE = 'move';\n  var DRAG_MODE_NONE = 'none'; // Events\n\n  var EVENT_CROP = 'crop';\n  var EVENT_CROP_END = 'cropend';\n  var EVENT_CROP_MOVE = 'cropmove';\n  var EVENT_CROP_START = 'cropstart';\n  var EVENT_DBLCLICK = 'dblclick';\n  var EVENT_TOUCH_START = IS_TOUCH_DEVICE ? 'touchstart' : 'mousedown';\n  var EVENT_TOUCH_MOVE = IS_TOUCH_DEVICE ? 'touchmove' : 'mousemove';\n  var EVENT_TOUCH_END = IS_TOUCH_DEVICE ? 'touchend touchcancel' : 'mouseup';\n  var EVENT_POINTER_DOWN = HAS_POINTER_EVENT ? 'pointerdown' : EVENT_TOUCH_START;\n  var EVENT_POINTER_MOVE = HAS_POINTER_EVENT ? 'pointermove' : EVENT_TOUCH_MOVE;\n  var EVENT_POINTER_UP = HAS_POINTER_EVENT ? 'pointerup pointercancel' : EVENT_TOUCH_END;\n  var EVENT_READY = 'ready';\n  var EVENT_RESIZE = 'resize';\n  var EVENT_WHEEL = 'wheel';\n  var EVENT_ZOOM = 'zoom'; // Mime types\n\n  var MIME_TYPE_JPEG = 'image/jpeg'; // RegExps\n\n  var REGEXP_ACTIONS = /^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/;\n  var REGEXP_DATA_URL = /^data:/;\n  var REGEXP_DATA_URL_JPEG = /^data:image\\/jpeg;base64,/;\n  var REGEXP_TAG_NAME = /^img|canvas$/i; // Misc\n  // Inspired by the default width and height of a canvas element.\n\n  var MIN_CONTAINER_WIDTH = 200;\n  var MIN_CONTAINER_HEIGHT = 100;\n\n  var DEFAULTS = {\n    // Define the view mode of the cropper\n    viewMode: 0,\n    // 0, 1, 2, 3\n    // Define the dragging mode of the cropper\n    dragMode: DRAG_MODE_CROP,\n    // 'crop', 'move' or 'none'\n    // Define the initial aspect ratio of the crop box\n    initialAspectRatio: NaN,\n    // Define the aspect ratio of the crop box\n    aspectRatio: NaN,\n    // An object with the previous cropping result data\n    data: null,\n    // A selector for adding extra containers to preview\n    preview: '',\n    // Re-render the cropper when resize the window\n    responsive: true,\n    // Restore the cropped area after resize the window\n    restore: true,\n    // Check if the current image is a cross-origin image\n    checkCrossOrigin: true,\n    // Check the current image's Exif Orientation information\n    checkOrientation: true,\n    // Show the black modal\n    modal: true,\n    // Show the dashed lines for guiding\n    guides: true,\n    // Show the center indicator for guiding\n    center: true,\n    // Show the white modal to highlight the crop box\n    highlight: true,\n    // Show the grid background\n    background: true,\n    // Enable to crop the image automatically when initialize\n    autoCrop: true,\n    // Define the percentage of automatic cropping area when initializes\n    autoCropArea: 0.8,\n    // Enable to move the image\n    movable: true,\n    // Enable to rotate the image\n    rotatable: true,\n    // Enable to scale the image\n    scalable: true,\n    // Enable to zoom the image\n    zoomable: true,\n    // Enable to zoom the image by dragging touch\n    zoomOnTouch: true,\n    // Enable to zoom the image by wheeling mouse\n    zoomOnWheel: true,\n    // Define zoom ratio when zoom the image by wheeling mouse\n    wheelZoomRatio: 0.1,\n    // Enable to move the crop box\n    cropBoxMovable: true,\n    // Enable to resize the crop box\n    cropBoxResizable: true,\n    // Toggle drag mode between \"crop\" and \"move\" when click twice on the cropper\n    toggleDragModeOnDblclick: true,\n    // Size limitation\n    minCanvasWidth: 0,\n    minCanvasHeight: 0,\n    minCropBoxWidth: 0,\n    minCropBoxHeight: 0,\n    minContainerWidth: 200,\n    minContainerHeight: 100,\n    // Shortcuts of events\n    ready: null,\n    cropstart: null,\n    cropmove: null,\n    cropend: null,\n    crop: null,\n    zoom: null\n  };\n\n  var TEMPLATE = '<div class=\"cropper-container\" touch-action=\"none\">' + '<div class=\"cropper-wrap-box\">' + '<div class=\"cropper-canvas\"></div>' + '</div>' + '<div class=\"cropper-drag-box\"></div>' + '<div class=\"cropper-crop-box\">' + '<span class=\"cropper-view-box\"></span>' + '<span class=\"cropper-dashed dashed-h\"></span>' + '<span class=\"cropper-dashed dashed-v\"></span>' + '<span class=\"cropper-center\"></span>' + '<span class=\"cropper-face\"></span>' + '<span class=\"cropper-line line-e\" data-cropper-action=\"e\"></span>' + '<span class=\"cropper-line line-n\" data-cropper-action=\"n\"></span>' + '<span class=\"cropper-line line-w\" data-cropper-action=\"w\"></span>' + '<span class=\"cropper-line line-s\" data-cropper-action=\"s\"></span>' + '<span class=\"cropper-point point-e\" data-cropper-action=\"e\"></span>' + '<span class=\"cropper-point point-n\" data-cropper-action=\"n\"></span>' + '<span class=\"cropper-point point-w\" data-cropper-action=\"w\"></span>' + '<span class=\"cropper-point point-s\" data-cropper-action=\"s\"></span>' + '<span class=\"cropper-point point-ne\" data-cropper-action=\"ne\"></span>' + '<span class=\"cropper-point point-nw\" data-cropper-action=\"nw\"></span>' + '<span class=\"cropper-point point-sw\" data-cropper-action=\"sw\"></span>' + '<span class=\"cropper-point point-se\" data-cropper-action=\"se\"></span>' + '</div>' + '</div>';\n\n  /**\n   * Check if the given value is not a number.\n   */\n\n  var isNaN = Number.isNaN || WINDOW.isNaN;\n  /**\n   * Check if the given value is a number.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a number, else `false`.\n   */\n\n  function isNumber(value) {\n    return typeof value === 'number' && !isNaN(value);\n  }\n  /**\n   * Check if the given value is a positive number.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a positive number, else `false`.\n   */\n\n  var isPositiveNumber = function isPositiveNumber(value) {\n    return value > 0 && value < Infinity;\n  };\n  /**\n   * Check if the given value is undefined.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is undefined, else `false`.\n   */\n\n  function isUndefined(value) {\n    return typeof value === 'undefined';\n  }\n  /**\n   * Check if the given value is an object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is an object, else `false`.\n   */\n\n  function isObject(value) {\n    return _typeof(value) === 'object' && value !== null;\n  }\n  var hasOwnProperty = Object.prototype.hasOwnProperty;\n  /**\n   * Check if the given value is a plain object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a plain object, else `false`.\n   */\n\n  function isPlainObject(value) {\n    if (!isObject(value)) {\n      return false;\n    }\n\n    try {\n      var _constructor = value.constructor;\n      var prototype = _constructor.prototype;\n      return _constructor && prototype && hasOwnProperty.call(prototype, 'isPrototypeOf');\n    } catch (error) {\n      return false;\n    }\n  }\n  /**\n   * Check if the given value is a function.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a function, else `false`.\n   */\n\n  function isFunction(value) {\n    return typeof value === 'function';\n  }\n  var slice = Array.prototype.slice;\n  /**\n   * Convert array-like or iterable object to an array.\n   * @param {*} value - The value to convert.\n   * @returns {Array} Returns a new array.\n   */\n\n  function toArray(value) {\n    return Array.from ? Array.from(value) : slice.call(value);\n  }\n  /**\n   * Iterate the given data.\n   * @param {*} data - The data to iterate.\n   * @param {Function} callback - The process function for each element.\n   * @returns {*} The original data.\n   */\n\n  function forEach(data, callback) {\n    if (data && isFunction(callback)) {\n      if (Array.isArray(data) || isNumber(data.length)\n      /* array-like */\n      ) {\n          toArray(data).forEach(function (value, key) {\n            callback.call(data, value, key, data);\n          });\n        } else if (isObject(data)) {\n        Object.keys(data).forEach(function (key) {\n          callback.call(data, data[key], key, data);\n        });\n      }\n    }\n\n    return data;\n  }\n  /**\n   * Extend the given object.\n   * @param {*} target - The target object to extend.\n   * @param {*} args - The rest objects for merging to the target object.\n   * @returns {Object} The extended object.\n   */\n\n  var assign = Object.assign || function assign(target) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    if (isObject(target) && args.length > 0) {\n      args.forEach(function (arg) {\n        if (isObject(arg)) {\n          Object.keys(arg).forEach(function (key) {\n            target[key] = arg[key];\n          });\n        }\n      });\n    }\n\n    return target;\n  };\n  var REGEXP_DECIMALS = /\\.\\d*(?:0|9){12}\\d*$/;\n  /**\n   * Normalize decimal number.\n   * Check out {@link http://0.30000000000000004.com/}\n   * @param {number} value - The value to normalize.\n   * @param {number} [times=100000000000] - The times for normalizing.\n   * @returns {number} Returns the normalized number.\n   */\n\n  function normalizeDecimalNumber(value) {\n    var times = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100000000000;\n    return REGEXP_DECIMALS.test(value) ? Math.round(value * times) / times : value;\n  }\n  var REGEXP_SUFFIX = /^width|height|left|top|marginLeft|marginTop$/;\n  /**\n   * Apply styles to the given element.\n   * @param {Element} element - The target element.\n   * @param {Object} styles - The styles for applying.\n   */\n\n  function setStyle(element, styles) {\n    var style = element.style;\n    forEach(styles, function (value, property) {\n      if (REGEXP_SUFFIX.test(property) && isNumber(value)) {\n        value = \"\".concat(value, \"px\");\n      }\n\n      style[property] = value;\n    });\n  }\n  /**\n   * Check if the given element has a special class.\n   * @param {Element} element - The element to check.\n   * @param {string} value - The class to search.\n   * @returns {boolean} Returns `true` if the special class was found.\n   */\n\n  function hasClass(element, value) {\n    return element.classList ? element.classList.contains(value) : element.className.indexOf(value) > -1;\n  }\n  /**\n   * Add classes to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be added.\n   */\n\n  function addClass(element, value) {\n    if (!value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        addClass(elem, value);\n      });\n      return;\n    }\n\n    if (element.classList) {\n      element.classList.add(value);\n      return;\n    }\n\n    var className = element.className.trim();\n\n    if (!className) {\n      element.className = value;\n    } else if (className.indexOf(value) < 0) {\n      element.className = \"\".concat(className, \" \").concat(value);\n    }\n  }\n  /**\n   * Remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be removed.\n   */\n\n  function removeClass(element, value) {\n    if (!value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        removeClass(elem, value);\n      });\n      return;\n    }\n\n    if (element.classList) {\n      element.classList.remove(value);\n      return;\n    }\n\n    if (element.className.indexOf(value) >= 0) {\n      element.className = element.className.replace(value, '');\n    }\n  }\n  /**\n   * Add or remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be toggled.\n   * @param {boolean} added - Add only.\n   */\n\n  function toggleClass(element, value, added) {\n    if (!value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        toggleClass(elem, value, added);\n      });\n      return;\n    } // IE10-11 doesn't support the second parameter of `classList.toggle`\n\n\n    if (added) {\n      addClass(element, value);\n    } else {\n      removeClass(element, value);\n    }\n  }\n  var REGEXP_CAMEL_CASE = /([a-z\\d])([A-Z])/g;\n  /**\n   * Transform the given string from camelCase to kebab-case\n   * @param {string} value - The value to transform.\n   * @returns {string} The transformed value.\n   */\n\n  function toParamCase(value) {\n    return value.replace(REGEXP_CAMEL_CASE, '$1-$2').toLowerCase();\n  }\n  /**\n   * Get data from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to get.\n   * @returns {string} The data value.\n   */\n\n  function getData(element, name) {\n    if (isObject(element[name])) {\n      return element[name];\n    }\n\n    if (element.dataset) {\n      return element.dataset[name];\n    }\n\n    return element.getAttribute(\"data-\".concat(toParamCase(name)));\n  }\n  /**\n   * Set data to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to set.\n   * @param {string} data - The data value.\n   */\n\n  function setData(element, name, data) {\n    if (isObject(data)) {\n      element[name] = data;\n    } else if (element.dataset) {\n      element.dataset[name] = data;\n    } else {\n      element.setAttribute(\"data-\".concat(toParamCase(name)), data);\n    }\n  }\n  /**\n   * Remove data from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to remove.\n   */\n\n  function removeData(element, name) {\n    if (isObject(element[name])) {\n      try {\n        delete element[name];\n      } catch (error) {\n        element[name] = undefined;\n      }\n    } else if (element.dataset) {\n      // #128 Safari not allows to delete dataset property\n      try {\n        delete element.dataset[name];\n      } catch (error) {\n        element.dataset[name] = undefined;\n      }\n    } else {\n      element.removeAttribute(\"data-\".concat(toParamCase(name)));\n    }\n  }\n  var REGEXP_SPACES = /\\s\\s*/;\n\n  var onceSupported = function () {\n    var supported = false;\n\n    if (IS_BROWSER) {\n      var once = false;\n\n      var listener = function listener() {};\n\n      var options = Object.defineProperty({}, 'once', {\n        get: function get() {\n          supported = true;\n          return once;\n        },\n\n        /**\n         * This setter can fix a `TypeError` in strict mode\n         * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Getter_only}\n         * @param {boolean} value - The value to set\n         */\n        set: function set(value) {\n          once = value;\n        }\n      });\n      WINDOW.addEventListener('test', listener, options);\n      WINDOW.removeEventListener('test', listener, options);\n    }\n\n    return supported;\n  }();\n  /**\n   * Remove event listener from the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n\n\n  function removeListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (!onceSupported) {\n        var listeners = element.listeners;\n\n        if (listeners && listeners[event] && listeners[event][listener]) {\n          handler = listeners[event][listener];\n          delete listeners[event][listener];\n\n          if (Object.keys(listeners[event]).length === 0) {\n            delete listeners[event];\n          }\n\n          if (Object.keys(listeners).length === 0) {\n            delete element.listeners;\n          }\n        }\n      }\n\n      element.removeEventListener(event, handler, options);\n    });\n  }\n  /**\n   * Add event listener to the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n\n  function addListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var _handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (options.once && !onceSupported) {\n        var _element$listeners = element.listeners,\n            listeners = _element$listeners === void 0 ? {} : _element$listeners;\n\n        _handler = function handler() {\n          delete listeners[event][listener];\n          element.removeEventListener(event, _handler, options);\n\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n\n          listener.apply(element, args);\n        };\n\n        if (!listeners[event]) {\n          listeners[event] = {};\n        }\n\n        if (listeners[event][listener]) {\n          element.removeEventListener(event, listeners[event][listener], options);\n        }\n\n        listeners[event][listener] = _handler;\n        element.listeners = listeners;\n      }\n\n      element.addEventListener(event, _handler, options);\n    });\n  }\n  /**\n   * Dispatch event on the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Object} data - The additional event data.\n   * @returns {boolean} Indicate if the event is default prevented or not.\n   */\n\n  function dispatchEvent(element, type, data) {\n    var event; // Event and CustomEvent on IE9-11 are global objects, not constructors\n\n    if (isFunction(Event) && isFunction(CustomEvent)) {\n      event = new CustomEvent(type, {\n        detail: data,\n        bubbles: true,\n        cancelable: true\n      });\n    } else {\n      event = document.createEvent('CustomEvent');\n      event.initCustomEvent(type, true, true, data);\n    }\n\n    return element.dispatchEvent(event);\n  }\n  /**\n   * Get the offset base on the document.\n   * @param {Element} element - The target element.\n   * @returns {Object} The offset data.\n   */\n\n  function getOffset(element) {\n    var box = element.getBoundingClientRect();\n    return {\n      left: box.left + (window.pageXOffset - document.documentElement.clientLeft),\n      top: box.top + (window.pageYOffset - document.documentElement.clientTop)\n    };\n  }\n  var location = WINDOW.location;\n  var REGEXP_ORIGINS = /^(\\w+:)\\/\\/([^:/?#]*):?(\\d*)/i;\n  /**\n   * Check if the given URL is a cross origin URL.\n   * @param {string} url - The target URL.\n   * @returns {boolean} Returns `true` if the given URL is a cross origin URL, else `false`.\n   */\n\n  function isCrossOriginURL(url) {\n    var parts = url.match(REGEXP_ORIGINS);\n    return parts !== null && (parts[1] !== location.protocol || parts[2] !== location.hostname || parts[3] !== location.port);\n  }\n  /**\n   * Add timestamp to the given URL.\n   * @param {string} url - The target URL.\n   * @returns {string} The result URL.\n   */\n\n  function addTimestamp(url) {\n    var timestamp = \"timestamp=\".concat(new Date().getTime());\n    return url + (url.indexOf('?') === -1 ? '?' : '&') + timestamp;\n  }\n  /**\n   * Get transforms base on the given object.\n   * @param {Object} obj - The target object.\n   * @returns {string} A string contains transform values.\n   */\n\n  function getTransforms(_ref) {\n    var rotate = _ref.rotate,\n        scaleX = _ref.scaleX,\n        scaleY = _ref.scaleY,\n        translateX = _ref.translateX,\n        translateY = _ref.translateY;\n    var values = [];\n\n    if (isNumber(translateX) && translateX !== 0) {\n      values.push(\"translateX(\".concat(translateX, \"px)\"));\n    }\n\n    if (isNumber(translateY) && translateY !== 0) {\n      values.push(\"translateY(\".concat(translateY, \"px)\"));\n    } // Rotate should come first before scale to match orientation transform\n\n\n    if (isNumber(rotate) && rotate !== 0) {\n      values.push(\"rotate(\".concat(rotate, \"deg)\"));\n    }\n\n    if (isNumber(scaleX) && scaleX !== 1) {\n      values.push(\"scaleX(\".concat(scaleX, \")\"));\n    }\n\n    if (isNumber(scaleY) && scaleY !== 1) {\n      values.push(\"scaleY(\".concat(scaleY, \")\"));\n    }\n\n    var transform = values.length ? values.join(' ') : 'none';\n    return {\n      WebkitTransform: transform,\n      msTransform: transform,\n      transform: transform\n    };\n  }\n  /**\n   * Get the max ratio of a group of pointers.\n   * @param {string} pointers - The target pointers.\n   * @returns {number} The result ratio.\n   */\n\n  function getMaxZoomRatio(pointers) {\n    var pointers2 = _objectSpread2({}, pointers);\n\n    var ratios = [];\n    forEach(pointers, function (pointer, pointerId) {\n      delete pointers2[pointerId];\n      forEach(pointers2, function (pointer2) {\n        var x1 = Math.abs(pointer.startX - pointer2.startX);\n        var y1 = Math.abs(pointer.startY - pointer2.startY);\n        var x2 = Math.abs(pointer.endX - pointer2.endX);\n        var y2 = Math.abs(pointer.endY - pointer2.endY);\n        var z1 = Math.sqrt(x1 * x1 + y1 * y1);\n        var z2 = Math.sqrt(x2 * x2 + y2 * y2);\n        var ratio = (z2 - z1) / z1;\n        ratios.push(ratio);\n      });\n    });\n    ratios.sort(function (a, b) {\n      return Math.abs(a) < Math.abs(b);\n    });\n    return ratios[0];\n  }\n  /**\n   * Get a pointer from an event object.\n   * @param {Object} event - The target event object.\n   * @param {boolean} endOnly - Indicates if only returns the end point coordinate or not.\n   * @returns {Object} The result pointer contains start and/or end point coordinates.\n   */\n\n  function getPointer(_ref2, endOnly) {\n    var pageX = _ref2.pageX,\n        pageY = _ref2.pageY;\n    var end = {\n      endX: pageX,\n      endY: pageY\n    };\n    return endOnly ? end : _objectSpread2({\n      startX: pageX,\n      startY: pageY\n    }, end);\n  }\n  /**\n   * Get the center point coordinate of a group of pointers.\n   * @param {Object} pointers - The target pointers.\n   * @returns {Object} The center point coordinate.\n   */\n\n  function getPointersCenter(pointers) {\n    var pageX = 0;\n    var pageY = 0;\n    var count = 0;\n    forEach(pointers, function (_ref3) {\n      var startX = _ref3.startX,\n          startY = _ref3.startY;\n      pageX += startX;\n      pageY += startY;\n      count += 1;\n    });\n    pageX /= count;\n    pageY /= count;\n    return {\n      pageX: pageX,\n      pageY: pageY\n    };\n  }\n  /**\n   * Get the max sizes in a rectangle under the given aspect ratio.\n   * @param {Object} data - The original sizes.\n   * @param {string} [type='contain'] - The adjust type.\n   * @returns {Object} The result sizes.\n   */\n\n  function getAdjustedSizes(_ref4) // or 'cover'\n  {\n    var aspectRatio = _ref4.aspectRatio,\n        height = _ref4.height,\n        width = _ref4.width;\n    var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'contain';\n    var isValidWidth = isPositiveNumber(width);\n    var isValidHeight = isPositiveNumber(height);\n\n    if (isValidWidth && isValidHeight) {\n      var adjustedWidth = height * aspectRatio;\n\n      if (type === 'contain' && adjustedWidth > width || type === 'cover' && adjustedWidth < width) {\n        height = width / aspectRatio;\n      } else {\n        width = height * aspectRatio;\n      }\n    } else if (isValidWidth) {\n      height = width / aspectRatio;\n    } else if (isValidHeight) {\n      width = height * aspectRatio;\n    }\n\n    return {\n      width: width,\n      height: height\n    };\n  }\n  /**\n   * Get the new sizes of a rectangle after rotated.\n   * @param {Object} data - The original sizes.\n   * @returns {Object} The result sizes.\n   */\n\n  function getRotatedSizes(_ref5) {\n    var width = _ref5.width,\n        height = _ref5.height,\n        degree = _ref5.degree;\n    degree = Math.abs(degree) % 180;\n\n    if (degree === 90) {\n      return {\n        width: height,\n        height: width\n      };\n    }\n\n    var arc = degree % 90 * Math.PI / 180;\n    var sinArc = Math.sin(arc);\n    var cosArc = Math.cos(arc);\n    var newWidth = width * cosArc + height * sinArc;\n    var newHeight = width * sinArc + height * cosArc;\n    return degree > 90 ? {\n      width: newHeight,\n      height: newWidth\n    } : {\n      width: newWidth,\n      height: newHeight\n    };\n  }\n  /**\n   * Get a canvas which drew the given image.\n   * @param {HTMLImageElement} image - The image for drawing.\n   * @param {Object} imageData - The image data.\n   * @param {Object} canvasData - The canvas data.\n   * @param {Object} options - The options.\n   * @returns {HTMLCanvasElement} The result canvas.\n   */\n\n  function getSourceCanvas(image, _ref6, _ref7, _ref8) {\n    var imageAspectRatio = _ref6.aspectRatio,\n        imageNaturalWidth = _ref6.naturalWidth,\n        imageNaturalHeight = _ref6.naturalHeight,\n        _ref6$rotate = _ref6.rotate,\n        rotate = _ref6$rotate === void 0 ? 0 : _ref6$rotate,\n        _ref6$scaleX = _ref6.scaleX,\n        scaleX = _ref6$scaleX === void 0 ? 1 : _ref6$scaleX,\n        _ref6$scaleY = _ref6.scaleY,\n        scaleY = _ref6$scaleY === void 0 ? 1 : _ref6$scaleY;\n    var aspectRatio = _ref7.aspectRatio,\n        naturalWidth = _ref7.naturalWidth,\n        naturalHeight = _ref7.naturalHeight;\n    var _ref8$fillColor = _ref8.fillColor,\n        fillColor = _ref8$fillColor === void 0 ? 'transparent' : _ref8$fillColor,\n        _ref8$imageSmoothingE = _ref8.imageSmoothingEnabled,\n        imageSmoothingEnabled = _ref8$imageSmoothingE === void 0 ? true : _ref8$imageSmoothingE,\n        _ref8$imageSmoothingQ = _ref8.imageSmoothingQuality,\n        imageSmoothingQuality = _ref8$imageSmoothingQ === void 0 ? 'low' : _ref8$imageSmoothingQ,\n        _ref8$maxWidth = _ref8.maxWidth,\n        maxWidth = _ref8$maxWidth === void 0 ? Infinity : _ref8$maxWidth,\n        _ref8$maxHeight = _ref8.maxHeight,\n        maxHeight = _ref8$maxHeight === void 0 ? Infinity : _ref8$maxHeight,\n        _ref8$minWidth = _ref8.minWidth,\n        minWidth = _ref8$minWidth === void 0 ? 0 : _ref8$minWidth,\n        _ref8$minHeight = _ref8.minHeight,\n        minHeight = _ref8$minHeight === void 0 ? 0 : _ref8$minHeight;\n    var canvas = document.createElement('canvas');\n    var context = canvas.getContext('2d');\n    var maxSizes = getAdjustedSizes({\n      aspectRatio: aspectRatio,\n      width: maxWidth,\n      height: maxHeight\n    });\n    var minSizes = getAdjustedSizes({\n      aspectRatio: aspectRatio,\n      width: minWidth,\n      height: minHeight\n    }, 'cover');\n    var width = Math.min(maxSizes.width, Math.max(minSizes.width, naturalWidth));\n    var height = Math.min(maxSizes.height, Math.max(minSizes.height, naturalHeight)); // Note: should always use image's natural sizes for drawing as\n    // imageData.naturalWidth === canvasData.naturalHeight when rotate % 180 === 90\n\n    var destMaxSizes = getAdjustedSizes({\n      aspectRatio: imageAspectRatio,\n      width: maxWidth,\n      height: maxHeight\n    });\n    var destMinSizes = getAdjustedSizes({\n      aspectRatio: imageAspectRatio,\n      width: minWidth,\n      height: minHeight\n    }, 'cover');\n    var destWidth = Math.min(destMaxSizes.width, Math.max(destMinSizes.width, imageNaturalWidth));\n    var destHeight = Math.min(destMaxSizes.height, Math.max(destMinSizes.height, imageNaturalHeight));\n    var params = [-destWidth / 2, -destHeight / 2, destWidth, destHeight];\n    canvas.width = normalizeDecimalNumber(width);\n    canvas.height = normalizeDecimalNumber(height);\n    context.fillStyle = fillColor;\n    context.fillRect(0, 0, width, height);\n    context.save();\n    context.translate(width / 2, height / 2);\n    context.rotate(rotate * Math.PI / 180);\n    context.scale(scaleX, scaleY);\n    context.imageSmoothingEnabled = imageSmoothingEnabled;\n    context.imageSmoothingQuality = imageSmoothingQuality;\n    context.drawImage.apply(context, [image].concat(_toConsumableArray(params.map(function (param) {\n      return Math.floor(normalizeDecimalNumber(param));\n    }))));\n    context.restore();\n    return canvas;\n  }\n  var fromCharCode = String.fromCharCode;\n  /**\n   * Get string from char code in data view.\n   * @param {DataView} dataView - The data view for read.\n   * @param {number} start - The start index.\n   * @param {number} length - The read length.\n   * @returns {string} The read result.\n   */\n\n  function getStringFromCharCode(dataView, start, length) {\n    var str = '';\n    length += start;\n\n    for (var i = start; i < length; i += 1) {\n      str += fromCharCode(dataView.getUint8(i));\n    }\n\n    return str;\n  }\n  var REGEXP_DATA_URL_HEAD = /^data:.*,/;\n  /**\n   * Transform Data URL to array buffer.\n   * @param {string} dataURL - The Data URL to transform.\n   * @returns {ArrayBuffer} The result array buffer.\n   */\n\n  function dataURLToArrayBuffer(dataURL) {\n    var base64 = dataURL.replace(REGEXP_DATA_URL_HEAD, '');\n    var binary = atob(base64);\n    var arrayBuffer = new ArrayBuffer(binary.length);\n    var uint8 = new Uint8Array(arrayBuffer);\n    forEach(uint8, function (value, i) {\n      uint8[i] = binary.charCodeAt(i);\n    });\n    return arrayBuffer;\n  }\n  /**\n   * Transform array buffer to Data URL.\n   * @param {ArrayBuffer} arrayBuffer - The array buffer to transform.\n   * @param {string} mimeType - The mime type of the Data URL.\n   * @returns {string} The result Data URL.\n   */\n\n  function arrayBufferToDataURL(arrayBuffer, mimeType) {\n    var chunks = []; // Chunk Typed Array for better performance (#435)\n\n    var chunkSize = 8192;\n    var uint8 = new Uint8Array(arrayBuffer);\n\n    while (uint8.length > 0) {\n      // XXX: Babel's `toConsumableArray` helper will throw error in IE or Safari 9\n      // eslint-disable-next-line prefer-spread\n      chunks.push(fromCharCode.apply(null, toArray(uint8.subarray(0, chunkSize))));\n      uint8 = uint8.subarray(chunkSize);\n    }\n\n    return \"data:\".concat(mimeType, \";base64,\").concat(btoa(chunks.join('')));\n  }\n  /**\n   * Get orientation value from given array buffer.\n   * @param {ArrayBuffer} arrayBuffer - The array buffer to read.\n   * @returns {number} The read orientation value.\n   */\n\n  function resetAndGetOrientation(arrayBuffer) {\n    var dataView = new DataView(arrayBuffer);\n    var orientation; // Ignores range error when the image does not have correct Exif information\n\n    try {\n      var littleEndian;\n      var app1Start;\n      var ifdStart; // Only handle JPEG image (start by 0xFFD8)\n\n      if (dataView.getUint8(0) === 0xFF && dataView.getUint8(1) === 0xD8) {\n        var length = dataView.byteLength;\n        var offset = 2;\n\n        while (offset + 1 < length) {\n          if (dataView.getUint8(offset) === 0xFF && dataView.getUint8(offset + 1) === 0xE1) {\n            app1Start = offset;\n            break;\n          }\n\n          offset += 1;\n        }\n      }\n\n      if (app1Start) {\n        var exifIDCode = app1Start + 4;\n        var tiffOffset = app1Start + 10;\n\n        if (getStringFromCharCode(dataView, exifIDCode, 4) === 'Exif') {\n          var endianness = dataView.getUint16(tiffOffset);\n          littleEndian = endianness === 0x4949;\n\n          if (littleEndian || endianness === 0x4D4D\n          /* bigEndian */\n          ) {\n              if (dataView.getUint16(tiffOffset + 2, littleEndian) === 0x002A) {\n                var firstIFDOffset = dataView.getUint32(tiffOffset + 4, littleEndian);\n\n                if (firstIFDOffset >= 0x00000008) {\n                  ifdStart = tiffOffset + firstIFDOffset;\n                }\n              }\n            }\n        }\n      }\n\n      if (ifdStart) {\n        var _length = dataView.getUint16(ifdStart, littleEndian);\n\n        var _offset;\n\n        var i;\n\n        for (i = 0; i < _length; i += 1) {\n          _offset = ifdStart + i * 12 + 2;\n\n          if (dataView.getUint16(_offset, littleEndian) === 0x0112\n          /* Orientation */\n          ) {\n              // 8 is the offset of the current tag's value\n              _offset += 8; // Get the original orientation value\n\n              orientation = dataView.getUint16(_offset, littleEndian); // Override the orientation with its default value\n\n              dataView.setUint16(_offset, 1, littleEndian);\n              break;\n            }\n        }\n      }\n    } catch (error) {\n      orientation = 1;\n    }\n\n    return orientation;\n  }\n  /**\n   * Parse Exif Orientation value.\n   * @param {number} orientation - The orientation to parse.\n   * @returns {Object} The parsed result.\n   */\n\n  function parseOrientation(orientation) {\n    var rotate = 0;\n    var scaleX = 1;\n    var scaleY = 1;\n\n    switch (orientation) {\n      // Flip horizontal\n      case 2:\n        scaleX = -1;\n        break;\n      // Rotate left 180°\n\n      case 3:\n        rotate = -180;\n        break;\n      // Flip vertical\n\n      case 4:\n        scaleY = -1;\n        break;\n      // Flip vertical and rotate right 90°\n\n      case 5:\n        rotate = 90;\n        scaleY = -1;\n        break;\n      // Rotate right 90°\n\n      case 6:\n        rotate = 90;\n        break;\n      // Flip horizontal and rotate right 90°\n\n      case 7:\n        rotate = 90;\n        scaleX = -1;\n        break;\n      // Rotate left 90°\n\n      case 8:\n        rotate = -90;\n        break;\n\n      default:\n    }\n\n    return {\n      rotate: rotate,\n      scaleX: scaleX,\n      scaleY: scaleY\n    };\n  }\n\n  var render = {\n    render: function render() {\n      this.initContainer();\n      this.initCanvas();\n      this.initCropBox();\n      this.renderCanvas();\n\n      if (this.cropped) {\n        this.renderCropBox();\n      }\n    },\n    initContainer: function initContainer() {\n      var element = this.element,\n          options = this.options,\n          container = this.container,\n          cropper = this.cropper;\n      addClass(cropper, CLASS_HIDDEN);\n      removeClass(element, CLASS_HIDDEN);\n      var containerData = {\n        width: Math.max(container.offsetWidth, Number(options.minContainerWidth) || 200),\n        height: Math.max(container.offsetHeight, Number(options.minContainerHeight) || 100)\n      };\n      this.containerData = containerData;\n      setStyle(cropper, {\n        width: containerData.width,\n        height: containerData.height\n      });\n      addClass(element, CLASS_HIDDEN);\n      removeClass(cropper, CLASS_HIDDEN);\n    },\n    // Canvas (image wrapper)\n    initCanvas: function initCanvas() {\n      var containerData = this.containerData,\n          imageData = this.imageData;\n      var viewMode = this.options.viewMode;\n      var rotated = Math.abs(imageData.rotate) % 180 === 90;\n      var naturalWidth = rotated ? imageData.naturalHeight : imageData.naturalWidth;\n      var naturalHeight = rotated ? imageData.naturalWidth : imageData.naturalHeight;\n      var aspectRatio = naturalWidth / naturalHeight;\n      var canvasWidth = containerData.width;\n      var canvasHeight = containerData.height;\n\n      if (containerData.height * aspectRatio > containerData.width) {\n        if (viewMode === 3) {\n          canvasWidth = containerData.height * aspectRatio;\n        } else {\n          canvasHeight = containerData.width / aspectRatio;\n        }\n      } else if (viewMode === 3) {\n        canvasHeight = containerData.width / aspectRatio;\n      } else {\n        canvasWidth = containerData.height * aspectRatio;\n      }\n\n      var canvasData = {\n        aspectRatio: aspectRatio,\n        naturalWidth: naturalWidth,\n        naturalHeight: naturalHeight,\n        width: canvasWidth,\n        height: canvasHeight\n      };\n      canvasData.left = (containerData.width - canvasWidth) / 2;\n      canvasData.top = (containerData.height - canvasHeight) / 2;\n      canvasData.oldLeft = canvasData.left;\n      canvasData.oldTop = canvasData.top;\n      this.canvasData = canvasData;\n      this.limited = viewMode === 1 || viewMode === 2;\n      this.limitCanvas(true, true);\n      this.initialImageData = assign({}, imageData);\n      this.initialCanvasData = assign({}, canvasData);\n    },\n    limitCanvas: function limitCanvas(sizeLimited, positionLimited) {\n      var options = this.options,\n          containerData = this.containerData,\n          canvasData = this.canvasData,\n          cropBoxData = this.cropBoxData;\n      var viewMode = options.viewMode;\n      var aspectRatio = canvasData.aspectRatio;\n      var cropped = this.cropped && cropBoxData;\n\n      if (sizeLimited) {\n        var minCanvasWidth = Number(options.minCanvasWidth) || 0;\n        var minCanvasHeight = Number(options.minCanvasHeight) || 0;\n\n        if (viewMode > 1) {\n          minCanvasWidth = Math.max(minCanvasWidth, containerData.width);\n          minCanvasHeight = Math.max(minCanvasHeight, containerData.height);\n\n          if (viewMode === 3) {\n            if (minCanvasHeight * aspectRatio > minCanvasWidth) {\n              minCanvasWidth = minCanvasHeight * aspectRatio;\n            } else {\n              minCanvasHeight = minCanvasWidth / aspectRatio;\n            }\n          }\n        } else if (viewMode > 0) {\n          if (minCanvasWidth) {\n            minCanvasWidth = Math.max(minCanvasWidth, cropped ? cropBoxData.width : 0);\n          } else if (minCanvasHeight) {\n            minCanvasHeight = Math.max(minCanvasHeight, cropped ? cropBoxData.height : 0);\n          } else if (cropped) {\n            minCanvasWidth = cropBoxData.width;\n            minCanvasHeight = cropBoxData.height;\n\n            if (minCanvasHeight * aspectRatio > minCanvasWidth) {\n              minCanvasWidth = minCanvasHeight * aspectRatio;\n            } else {\n              minCanvasHeight = minCanvasWidth / aspectRatio;\n            }\n          }\n        }\n\n        var _getAdjustedSizes = getAdjustedSizes({\n          aspectRatio: aspectRatio,\n          width: minCanvasWidth,\n          height: minCanvasHeight\n        });\n\n        minCanvasWidth = _getAdjustedSizes.width;\n        minCanvasHeight = _getAdjustedSizes.height;\n        canvasData.minWidth = minCanvasWidth;\n        canvasData.minHeight = minCanvasHeight;\n        canvasData.maxWidth = Infinity;\n        canvasData.maxHeight = Infinity;\n      }\n\n      if (positionLimited) {\n        if (viewMode > (cropped ? 0 : 1)) {\n          var newCanvasLeft = containerData.width - canvasData.width;\n          var newCanvasTop = containerData.height - canvasData.height;\n          canvasData.minLeft = Math.min(0, newCanvasLeft);\n          canvasData.minTop = Math.min(0, newCanvasTop);\n          canvasData.maxLeft = Math.max(0, newCanvasLeft);\n          canvasData.maxTop = Math.max(0, newCanvasTop);\n\n          if (cropped && this.limited) {\n            canvasData.minLeft = Math.min(cropBoxData.left, cropBoxData.left + (cropBoxData.width - canvasData.width));\n            canvasData.minTop = Math.min(cropBoxData.top, cropBoxData.top + (cropBoxData.height - canvasData.height));\n            canvasData.maxLeft = cropBoxData.left;\n            canvasData.maxTop = cropBoxData.top;\n\n            if (viewMode === 2) {\n              if (canvasData.width >= containerData.width) {\n                canvasData.minLeft = Math.min(0, newCanvasLeft);\n                canvasData.maxLeft = Math.max(0, newCanvasLeft);\n              }\n\n              if (canvasData.height >= containerData.height) {\n                canvasData.minTop = Math.min(0, newCanvasTop);\n                canvasData.maxTop = Math.max(0, newCanvasTop);\n              }\n            }\n          }\n        } else {\n          canvasData.minLeft = -canvasData.width;\n          canvasData.minTop = -canvasData.height;\n          canvasData.maxLeft = containerData.width;\n          canvasData.maxTop = containerData.height;\n        }\n      }\n    },\n    renderCanvas: function renderCanvas(changed, transformed) {\n      var canvasData = this.canvasData,\n          imageData = this.imageData;\n\n      if (transformed) {\n        var _getRotatedSizes = getRotatedSizes({\n          width: imageData.naturalWidth * Math.abs(imageData.scaleX || 1),\n          height: imageData.naturalHeight * Math.abs(imageData.scaleY || 1),\n          degree: imageData.rotate || 0\n        }),\n            naturalWidth = _getRotatedSizes.width,\n            naturalHeight = _getRotatedSizes.height;\n\n        var width = canvasData.width * (naturalWidth / canvasData.naturalWidth);\n        var height = canvasData.height * (naturalHeight / canvasData.naturalHeight);\n        canvasData.left -= (width - canvasData.width) / 2;\n        canvasData.top -= (height - canvasData.height) / 2;\n        canvasData.width = width;\n        canvasData.height = height;\n        canvasData.aspectRatio = naturalWidth / naturalHeight;\n        canvasData.naturalWidth = naturalWidth;\n        canvasData.naturalHeight = naturalHeight;\n        this.limitCanvas(true, false);\n      }\n\n      if (canvasData.width > canvasData.maxWidth || canvasData.width < canvasData.minWidth) {\n        canvasData.left = canvasData.oldLeft;\n      }\n\n      if (canvasData.height > canvasData.maxHeight || canvasData.height < canvasData.minHeight) {\n        canvasData.top = canvasData.oldTop;\n      }\n\n      canvasData.width = Math.min(Math.max(canvasData.width, canvasData.minWidth), canvasData.maxWidth);\n      canvasData.height = Math.min(Math.max(canvasData.height, canvasData.minHeight), canvasData.maxHeight);\n      this.limitCanvas(false, true);\n      canvasData.left = Math.min(Math.max(canvasData.left, canvasData.minLeft), canvasData.maxLeft);\n      canvasData.top = Math.min(Math.max(canvasData.top, canvasData.minTop), canvasData.maxTop);\n      canvasData.oldLeft = canvasData.left;\n      canvasData.oldTop = canvasData.top;\n      setStyle(this.canvas, assign({\n        width: canvasData.width,\n        height: canvasData.height\n      }, getTransforms({\n        translateX: canvasData.left,\n        translateY: canvasData.top\n      })));\n      this.renderImage(changed);\n\n      if (this.cropped && this.limited) {\n        this.limitCropBox(true, true);\n      }\n    },\n    renderImage: function renderImage(changed) {\n      var canvasData = this.canvasData,\n          imageData = this.imageData;\n      var width = imageData.naturalWidth * (canvasData.width / canvasData.naturalWidth);\n      var height = imageData.naturalHeight * (canvasData.height / canvasData.naturalHeight);\n      assign(imageData, {\n        width: width,\n        height: height,\n        left: (canvasData.width - width) / 2,\n        top: (canvasData.height - height) / 2\n      });\n      setStyle(this.image, assign({\n        width: imageData.width,\n        height: imageData.height\n      }, getTransforms(assign({\n        translateX: imageData.left,\n        translateY: imageData.top\n      }, imageData))));\n\n      if (changed) {\n        this.output();\n      }\n    },\n    initCropBox: function initCropBox() {\n      var options = this.options,\n          canvasData = this.canvasData;\n      var aspectRatio = options.aspectRatio || options.initialAspectRatio;\n      var autoCropArea = Number(options.autoCropArea) || 0.8;\n      var cropBoxData = {\n        width: canvasData.width,\n        height: canvasData.height\n      };\n\n      if (aspectRatio) {\n        if (canvasData.height * aspectRatio > canvasData.width) {\n          cropBoxData.height = cropBoxData.width / aspectRatio;\n        } else {\n          cropBoxData.width = cropBoxData.height * aspectRatio;\n        }\n      }\n\n      this.cropBoxData = cropBoxData;\n      this.limitCropBox(true, true); // Initialize auto crop area\n\n      cropBoxData.width = Math.min(Math.max(cropBoxData.width, cropBoxData.minWidth), cropBoxData.maxWidth);\n      cropBoxData.height = Math.min(Math.max(cropBoxData.height, cropBoxData.minHeight), cropBoxData.maxHeight); // The width/height of auto crop area must large than \"minWidth/Height\"\n\n      cropBoxData.width = Math.max(cropBoxData.minWidth, cropBoxData.width * autoCropArea);\n      cropBoxData.height = Math.max(cropBoxData.minHeight, cropBoxData.height * autoCropArea);\n      cropBoxData.left = canvasData.left + (canvasData.width - cropBoxData.width) / 2;\n      cropBoxData.top = canvasData.top + (canvasData.height - cropBoxData.height) / 2;\n      cropBoxData.oldLeft = cropBoxData.left;\n      cropBoxData.oldTop = cropBoxData.top;\n      this.initialCropBoxData = assign({}, cropBoxData);\n    },\n    limitCropBox: function limitCropBox(sizeLimited, positionLimited) {\n      var options = this.options,\n          containerData = this.containerData,\n          canvasData = this.canvasData,\n          cropBoxData = this.cropBoxData,\n          limited = this.limited;\n      var aspectRatio = options.aspectRatio;\n\n      if (sizeLimited) {\n        var minCropBoxWidth = Number(options.minCropBoxWidth) || 0;\n        var minCropBoxHeight = Number(options.minCropBoxHeight) || 0;\n        var maxCropBoxWidth = limited ? Math.min(containerData.width, canvasData.width, canvasData.width + canvasData.left, containerData.width - canvasData.left) : containerData.width;\n        var maxCropBoxHeight = limited ? Math.min(containerData.height, canvasData.height, canvasData.height + canvasData.top, containerData.height - canvasData.top) : containerData.height; // The min/maxCropBoxWidth/Height must be less than container's width/height\n\n        minCropBoxWidth = Math.min(minCropBoxWidth, containerData.width);\n        minCropBoxHeight = Math.min(minCropBoxHeight, containerData.height);\n\n        if (aspectRatio) {\n          if (minCropBoxWidth && minCropBoxHeight) {\n            if (minCropBoxHeight * aspectRatio > minCropBoxWidth) {\n              minCropBoxHeight = minCropBoxWidth / aspectRatio;\n            } else {\n              minCropBoxWidth = minCropBoxHeight * aspectRatio;\n            }\n          } else if (minCropBoxWidth) {\n            minCropBoxHeight = minCropBoxWidth / aspectRatio;\n          } else if (minCropBoxHeight) {\n            minCropBoxWidth = minCropBoxHeight * aspectRatio;\n          }\n\n          if (maxCropBoxHeight * aspectRatio > maxCropBoxWidth) {\n            maxCropBoxHeight = maxCropBoxWidth / aspectRatio;\n          } else {\n            maxCropBoxWidth = maxCropBoxHeight * aspectRatio;\n          }\n        } // The minWidth/Height must be less than maxWidth/Height\n\n\n        cropBoxData.minWidth = Math.min(minCropBoxWidth, maxCropBoxWidth);\n        cropBoxData.minHeight = Math.min(minCropBoxHeight, maxCropBoxHeight);\n        cropBoxData.maxWidth = maxCropBoxWidth;\n        cropBoxData.maxHeight = maxCropBoxHeight;\n      }\n\n      if (positionLimited) {\n        if (limited) {\n          cropBoxData.minLeft = Math.max(0, canvasData.left);\n          cropBoxData.minTop = Math.max(0, canvasData.top);\n          cropBoxData.maxLeft = Math.min(containerData.width, canvasData.left + canvasData.width) - cropBoxData.width;\n          cropBoxData.maxTop = Math.min(containerData.height, canvasData.top + canvasData.height) - cropBoxData.height;\n        } else {\n          cropBoxData.minLeft = 0;\n          cropBoxData.minTop = 0;\n          cropBoxData.maxLeft = containerData.width - cropBoxData.width;\n          cropBoxData.maxTop = containerData.height - cropBoxData.height;\n        }\n      }\n    },\n    renderCropBox: function renderCropBox() {\n      var options = this.options,\n          containerData = this.containerData,\n          cropBoxData = this.cropBoxData;\n\n      if (cropBoxData.width > cropBoxData.maxWidth || cropBoxData.width < cropBoxData.minWidth) {\n        cropBoxData.left = cropBoxData.oldLeft;\n      }\n\n      if (cropBoxData.height > cropBoxData.maxHeight || cropBoxData.height < cropBoxData.minHeight) {\n        cropBoxData.top = cropBoxData.oldTop;\n      }\n\n      cropBoxData.width = Math.min(Math.max(cropBoxData.width, cropBoxData.minWidth), cropBoxData.maxWidth);\n      cropBoxData.height = Math.min(Math.max(cropBoxData.height, cropBoxData.minHeight), cropBoxData.maxHeight);\n      this.limitCropBox(false, true);\n      cropBoxData.left = Math.min(Math.max(cropBoxData.left, cropBoxData.minLeft), cropBoxData.maxLeft);\n      cropBoxData.top = Math.min(Math.max(cropBoxData.top, cropBoxData.minTop), cropBoxData.maxTop);\n      cropBoxData.oldLeft = cropBoxData.left;\n      cropBoxData.oldTop = cropBoxData.top;\n\n      if (options.movable && options.cropBoxMovable) {\n        // Turn to move the canvas when the crop box is equal to the container\n        setData(this.face, DATA_ACTION, cropBoxData.width >= containerData.width && cropBoxData.height >= containerData.height ? ACTION_MOVE : ACTION_ALL);\n      }\n\n      setStyle(this.cropBox, assign({\n        width: cropBoxData.width,\n        height: cropBoxData.height\n      }, getTransforms({\n        translateX: cropBoxData.left,\n        translateY: cropBoxData.top\n      })));\n\n      if (this.cropped && this.limited) {\n        this.limitCanvas(true, true);\n      }\n\n      if (!this.disabled) {\n        this.output();\n      }\n    },\n    output: function output() {\n      this.preview();\n      dispatchEvent(this.element, EVENT_CROP, this.getData());\n    }\n  };\n\n  var preview = {\n    initPreview: function initPreview() {\n      var element = this.element,\n          crossOrigin = this.crossOrigin;\n      var preview = this.options.preview;\n      var url = crossOrigin ? this.crossOriginUrl : this.url;\n      var alt = element.alt || 'The image to preview';\n      var image = document.createElement('img');\n\n      if (crossOrigin) {\n        image.crossOrigin = crossOrigin;\n      }\n\n      image.src = url;\n      image.alt = alt;\n      this.viewBox.appendChild(image);\n      this.viewBoxImage = image;\n\n      if (!preview) {\n        return;\n      }\n\n      var previews = preview;\n\n      if (typeof preview === 'string') {\n        previews = element.ownerDocument.querySelectorAll(preview);\n      } else if (preview.querySelector) {\n        previews = [preview];\n      }\n\n      this.previews = previews;\n      forEach(previews, function (el) {\n        var img = document.createElement('img'); // Save the original size for recover\n\n        setData(el, DATA_PREVIEW, {\n          width: el.offsetWidth,\n          height: el.offsetHeight,\n          html: el.innerHTML\n        });\n\n        if (crossOrigin) {\n          img.crossOrigin = crossOrigin;\n        }\n\n        img.src = url;\n        img.alt = alt;\n        /**\n         * Override img element styles\n         * Add `display:block` to avoid margin top issue\n         * Add `height:auto` to override `height` attribute on IE8\n         * (Occur only when margin-top <= -height)\n         */\n\n        img.style.cssText = 'display:block;' + 'width:100%;' + 'height:auto;' + 'min-width:0!important;' + 'min-height:0!important;' + 'max-width:none!important;' + 'max-height:none!important;' + 'image-orientation:0deg!important;\"';\n        el.innerHTML = '';\n        el.appendChild(img);\n      });\n    },\n    resetPreview: function resetPreview() {\n      forEach(this.previews, function (element) {\n        var data = getData(element, DATA_PREVIEW);\n        setStyle(element, {\n          width: data.width,\n          height: data.height\n        });\n        element.innerHTML = data.html;\n        removeData(element, DATA_PREVIEW);\n      });\n    },\n    preview: function preview() {\n      var imageData = this.imageData,\n          canvasData = this.canvasData,\n          cropBoxData = this.cropBoxData;\n      var cropBoxWidth = cropBoxData.width,\n          cropBoxHeight = cropBoxData.height;\n      var width = imageData.width,\n          height = imageData.height;\n      var left = cropBoxData.left - canvasData.left - imageData.left;\n      var top = cropBoxData.top - canvasData.top - imageData.top;\n\n      if (!this.cropped || this.disabled) {\n        return;\n      }\n\n      setStyle(this.viewBoxImage, assign({\n        width: width,\n        height: height\n      }, getTransforms(assign({\n        translateX: -left,\n        translateY: -top\n      }, imageData))));\n      forEach(this.previews, function (element) {\n        var data = getData(element, DATA_PREVIEW);\n        var originalWidth = data.width;\n        var originalHeight = data.height;\n        var newWidth = originalWidth;\n        var newHeight = originalHeight;\n        var ratio = 1;\n\n        if (cropBoxWidth) {\n          ratio = originalWidth / cropBoxWidth;\n          newHeight = cropBoxHeight * ratio;\n        }\n\n        if (cropBoxHeight && newHeight > originalHeight) {\n          ratio = originalHeight / cropBoxHeight;\n          newWidth = cropBoxWidth * ratio;\n          newHeight = originalHeight;\n        }\n\n        setStyle(element, {\n          width: newWidth,\n          height: newHeight\n        });\n        setStyle(element.getElementsByTagName('img')[0], assign({\n          width: width * ratio,\n          height: height * ratio\n        }, getTransforms(assign({\n          translateX: -left * ratio,\n          translateY: -top * ratio\n        }, imageData))));\n      });\n    }\n  };\n\n  var events = {\n    bind: function bind() {\n      var element = this.element,\n          options = this.options,\n          cropper = this.cropper;\n\n      if (isFunction(options.cropstart)) {\n        addListener(element, EVENT_CROP_START, options.cropstart);\n      }\n\n      if (isFunction(options.cropmove)) {\n        addListener(element, EVENT_CROP_MOVE, options.cropmove);\n      }\n\n      if (isFunction(options.cropend)) {\n        addListener(element, EVENT_CROP_END, options.cropend);\n      }\n\n      if (isFunction(options.crop)) {\n        addListener(element, EVENT_CROP, options.crop);\n      }\n\n      if (isFunction(options.zoom)) {\n        addListener(element, EVENT_ZOOM, options.zoom);\n      }\n\n      addListener(cropper, EVENT_POINTER_DOWN, this.onCropStart = this.cropStart.bind(this));\n\n      if (options.zoomable && options.zoomOnWheel) {\n        addListener(cropper, EVENT_WHEEL, this.onWheel = this.wheel.bind(this), {\n          passive: false,\n          capture: true\n        });\n      }\n\n      if (options.toggleDragModeOnDblclick) {\n        addListener(cropper, EVENT_DBLCLICK, this.onDblclick = this.dblclick.bind(this));\n      }\n\n      addListener(element.ownerDocument, EVENT_POINTER_MOVE, this.onCropMove = this.cropMove.bind(this));\n      addListener(element.ownerDocument, EVENT_POINTER_UP, this.onCropEnd = this.cropEnd.bind(this));\n\n      if (options.responsive) {\n        addListener(window, EVENT_RESIZE, this.onResize = this.resize.bind(this));\n      }\n    },\n    unbind: function unbind() {\n      var element = this.element,\n          options = this.options,\n          cropper = this.cropper;\n\n      if (isFunction(options.cropstart)) {\n        removeListener(element, EVENT_CROP_START, options.cropstart);\n      }\n\n      if (isFunction(options.cropmove)) {\n        removeListener(element, EVENT_CROP_MOVE, options.cropmove);\n      }\n\n      if (isFunction(options.cropend)) {\n        removeListener(element, EVENT_CROP_END, options.cropend);\n      }\n\n      if (isFunction(options.crop)) {\n        removeListener(element, EVENT_CROP, options.crop);\n      }\n\n      if (isFunction(options.zoom)) {\n        removeListener(element, EVENT_ZOOM, options.zoom);\n      }\n\n      removeListener(cropper, EVENT_POINTER_DOWN, this.onCropStart);\n\n      if (options.zoomable && options.zoomOnWheel) {\n        removeListener(cropper, EVENT_WHEEL, this.onWheel, {\n          passive: false,\n          capture: true\n        });\n      }\n\n      if (options.toggleDragModeOnDblclick) {\n        removeListener(cropper, EVENT_DBLCLICK, this.onDblclick);\n      }\n\n      removeListener(element.ownerDocument, EVENT_POINTER_MOVE, this.onCropMove);\n      removeListener(element.ownerDocument, EVENT_POINTER_UP, this.onCropEnd);\n\n      if (options.responsive) {\n        removeListener(window, EVENT_RESIZE, this.onResize);\n      }\n    }\n  };\n\n  var handlers = {\n    resize: function resize() {\n      var options = this.options,\n          container = this.container,\n          containerData = this.containerData;\n      var minContainerWidth = Number(options.minContainerWidth) || MIN_CONTAINER_WIDTH;\n      var minContainerHeight = Number(options.minContainerHeight) || MIN_CONTAINER_HEIGHT;\n\n      if (this.disabled || containerData.width <= minContainerWidth || containerData.height <= minContainerHeight) {\n        return;\n      }\n\n      var ratio = container.offsetWidth / containerData.width; // Resize when width changed or height changed\n\n      if (ratio !== 1 || container.offsetHeight !== containerData.height) {\n        var canvasData;\n        var cropBoxData;\n\n        if (options.restore) {\n          canvasData = this.getCanvasData();\n          cropBoxData = this.getCropBoxData();\n        }\n\n        this.render();\n\n        if (options.restore) {\n          this.setCanvasData(forEach(canvasData, function (n, i) {\n            canvasData[i] = n * ratio;\n          }));\n          this.setCropBoxData(forEach(cropBoxData, function (n, i) {\n            cropBoxData[i] = n * ratio;\n          }));\n        }\n      }\n    },\n    dblclick: function dblclick() {\n      if (this.disabled || this.options.dragMode === DRAG_MODE_NONE) {\n        return;\n      }\n\n      this.setDragMode(hasClass(this.dragBox, CLASS_CROP) ? DRAG_MODE_MOVE : DRAG_MODE_CROP);\n    },\n    wheel: function wheel(event) {\n      var _this = this;\n\n      var ratio = Number(this.options.wheelZoomRatio) || 0.1;\n      var delta = 1;\n\n      if (this.disabled) {\n        return;\n      }\n\n      event.preventDefault(); // Limit wheel speed to prevent zoom too fast (#21)\n\n      if (this.wheeling) {\n        return;\n      }\n\n      this.wheeling = true;\n      setTimeout(function () {\n        _this.wheeling = false;\n      }, 50);\n\n      if (event.deltaY) {\n        delta = event.deltaY > 0 ? 1 : -1;\n      } else if (event.wheelDelta) {\n        delta = -event.wheelDelta / 120;\n      } else if (event.detail) {\n        delta = event.detail > 0 ? 1 : -1;\n      }\n\n      this.zoom(-delta * ratio, event);\n    },\n    cropStart: function cropStart(event) {\n      var buttons = event.buttons,\n          button = event.button;\n\n      if (this.disabled // Handle mouse event and pointer event and ignore touch event\n      || (event.type === 'mousedown' || event.type === 'pointerdown' && event.pointerType === 'mouse') && ( // No primary button (Usually the left button)\n      isNumber(buttons) && buttons !== 1 || isNumber(button) && button !== 0 // Open context menu\n      || event.ctrlKey)) {\n        return;\n      }\n\n      var options = this.options,\n          pointers = this.pointers;\n      var action;\n\n      if (event.changedTouches) {\n        // Handle touch event\n        forEach(event.changedTouches, function (touch) {\n          pointers[touch.identifier] = getPointer(touch);\n        });\n      } else {\n        // Handle mouse event and pointer event\n        pointers[event.pointerId || 0] = getPointer(event);\n      }\n\n      if (Object.keys(pointers).length > 1 && options.zoomable && options.zoomOnTouch) {\n        action = ACTION_ZOOM;\n      } else {\n        action = getData(event.target, DATA_ACTION);\n      }\n\n      if (!REGEXP_ACTIONS.test(action)) {\n        return;\n      }\n\n      if (dispatchEvent(this.element, EVENT_CROP_START, {\n        originalEvent: event,\n        action: action\n      }) === false) {\n        return;\n      } // This line is required for preventing page zooming in iOS browsers\n\n\n      event.preventDefault();\n      this.action = action;\n      this.cropping = false;\n\n      if (action === ACTION_CROP) {\n        this.cropping = true;\n        addClass(this.dragBox, CLASS_MODAL);\n      }\n    },\n    cropMove: function cropMove(event) {\n      var action = this.action;\n\n      if (this.disabled || !action) {\n        return;\n      }\n\n      var pointers = this.pointers;\n      event.preventDefault();\n\n      if (dispatchEvent(this.element, EVENT_CROP_MOVE, {\n        originalEvent: event,\n        action: action\n      }) === false) {\n        return;\n      }\n\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          // The first parameter should not be undefined (#432)\n          assign(pointers[touch.identifier] || {}, getPointer(touch, true));\n        });\n      } else {\n        assign(pointers[event.pointerId || 0] || {}, getPointer(event, true));\n      }\n\n      this.change(event);\n    },\n    cropEnd: function cropEnd(event) {\n      if (this.disabled) {\n        return;\n      }\n\n      var action = this.action,\n          pointers = this.pointers;\n\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          delete pointers[touch.identifier];\n        });\n      } else {\n        delete pointers[event.pointerId || 0];\n      }\n\n      if (!action) {\n        return;\n      }\n\n      event.preventDefault();\n\n      if (!Object.keys(pointers).length) {\n        this.action = '';\n      }\n\n      if (this.cropping) {\n        this.cropping = false;\n        toggleClass(this.dragBox, CLASS_MODAL, this.cropped && this.options.modal);\n      }\n\n      dispatchEvent(this.element, EVENT_CROP_END, {\n        originalEvent: event,\n        action: action\n      });\n    }\n  };\n\n  var change = {\n    change: function change(event) {\n      var options = this.options,\n          canvasData = this.canvasData,\n          containerData = this.containerData,\n          cropBoxData = this.cropBoxData,\n          pointers = this.pointers;\n      var action = this.action;\n      var aspectRatio = options.aspectRatio;\n      var left = cropBoxData.left,\n          top = cropBoxData.top,\n          width = cropBoxData.width,\n          height = cropBoxData.height;\n      var right = left + width;\n      var bottom = top + height;\n      var minLeft = 0;\n      var minTop = 0;\n      var maxWidth = containerData.width;\n      var maxHeight = containerData.height;\n      var renderable = true;\n      var offset; // Locking aspect ratio in \"free mode\" by holding shift key\n\n      if (!aspectRatio && event.shiftKey) {\n        aspectRatio = width && height ? width / height : 1;\n      }\n\n      if (this.limited) {\n        minLeft = cropBoxData.minLeft;\n        minTop = cropBoxData.minTop;\n        maxWidth = minLeft + Math.min(containerData.width, canvasData.width, canvasData.left + canvasData.width);\n        maxHeight = minTop + Math.min(containerData.height, canvasData.height, canvasData.top + canvasData.height);\n      }\n\n      var pointer = pointers[Object.keys(pointers)[0]];\n      var range = {\n        x: pointer.endX - pointer.startX,\n        y: pointer.endY - pointer.startY\n      };\n\n      var check = function check(side) {\n        switch (side) {\n          case ACTION_EAST:\n            if (right + range.x > maxWidth) {\n              range.x = maxWidth - right;\n            }\n\n            break;\n\n          case ACTION_WEST:\n            if (left + range.x < minLeft) {\n              range.x = minLeft - left;\n            }\n\n            break;\n\n          case ACTION_NORTH:\n            if (top + range.y < minTop) {\n              range.y = minTop - top;\n            }\n\n            break;\n\n          case ACTION_SOUTH:\n            if (bottom + range.y > maxHeight) {\n              range.y = maxHeight - bottom;\n            }\n\n            break;\n\n          default:\n        }\n      };\n\n      switch (action) {\n        // Move crop box\n        case ACTION_ALL:\n          left += range.x;\n          top += range.y;\n          break;\n        // Resize crop box\n\n        case ACTION_EAST:\n          if (range.x >= 0 && (right >= maxWidth || aspectRatio && (top <= minTop || bottom >= maxHeight))) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_EAST);\n          width += range.x;\n\n          if (width < 0) {\n            action = ACTION_WEST;\n            width = -width;\n            left -= width;\n          }\n\n          if (aspectRatio) {\n            height = width / aspectRatio;\n            top += (cropBoxData.height - height) / 2;\n          }\n\n          break;\n\n        case ACTION_NORTH:\n          if (range.y <= 0 && (top <= minTop || aspectRatio && (left <= minLeft || right >= maxWidth))) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_NORTH);\n          height -= range.y;\n          top += range.y;\n\n          if (height < 0) {\n            action = ACTION_SOUTH;\n            height = -height;\n            top -= height;\n          }\n\n          if (aspectRatio) {\n            width = height * aspectRatio;\n            left += (cropBoxData.width - width) / 2;\n          }\n\n          break;\n\n        case ACTION_WEST:\n          if (range.x <= 0 && (left <= minLeft || aspectRatio && (top <= minTop || bottom >= maxHeight))) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_WEST);\n          width -= range.x;\n          left += range.x;\n\n          if (width < 0) {\n            action = ACTION_EAST;\n            width = -width;\n            left -= width;\n          }\n\n          if (aspectRatio) {\n            height = width / aspectRatio;\n            top += (cropBoxData.height - height) / 2;\n          }\n\n          break;\n\n        case ACTION_SOUTH:\n          if (range.y >= 0 && (bottom >= maxHeight || aspectRatio && (left <= minLeft || right >= maxWidth))) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_SOUTH);\n          height += range.y;\n\n          if (height < 0) {\n            action = ACTION_NORTH;\n            height = -height;\n            top -= height;\n          }\n\n          if (aspectRatio) {\n            width = height * aspectRatio;\n            left += (cropBoxData.width - width) / 2;\n          }\n\n          break;\n\n        case ACTION_NORTH_EAST:\n          if (aspectRatio) {\n            if (range.y <= 0 && (top <= minTop || right >= maxWidth)) {\n              renderable = false;\n              break;\n            }\n\n            check(ACTION_NORTH);\n            height -= range.y;\n            top += range.y;\n            width = height * aspectRatio;\n          } else {\n            check(ACTION_NORTH);\n            check(ACTION_EAST);\n\n            if (range.x >= 0) {\n              if (right < maxWidth) {\n                width += range.x;\n              } else if (range.y <= 0 && top <= minTop) {\n                renderable = false;\n              }\n            } else {\n              width += range.x;\n            }\n\n            if (range.y <= 0) {\n              if (top > minTop) {\n                height -= range.y;\n                top += range.y;\n              }\n            } else {\n              height -= range.y;\n              top += range.y;\n            }\n          }\n\n          if (width < 0 && height < 0) {\n            action = ACTION_SOUTH_WEST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_NORTH_WEST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_SOUTH_EAST;\n            height = -height;\n            top -= height;\n          }\n\n          break;\n\n        case ACTION_NORTH_WEST:\n          if (aspectRatio) {\n            if (range.y <= 0 && (top <= minTop || left <= minLeft)) {\n              renderable = false;\n              break;\n            }\n\n            check(ACTION_NORTH);\n            height -= range.y;\n            top += range.y;\n            width = height * aspectRatio;\n            left += cropBoxData.width - width;\n          } else {\n            check(ACTION_NORTH);\n            check(ACTION_WEST);\n\n            if (range.x <= 0) {\n              if (left > minLeft) {\n                width -= range.x;\n                left += range.x;\n              } else if (range.y <= 0 && top <= minTop) {\n                renderable = false;\n              }\n            } else {\n              width -= range.x;\n              left += range.x;\n            }\n\n            if (range.y <= 0) {\n              if (top > minTop) {\n                height -= range.y;\n                top += range.y;\n              }\n            } else {\n              height -= range.y;\n              top += range.y;\n            }\n          }\n\n          if (width < 0 && height < 0) {\n            action = ACTION_SOUTH_EAST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_NORTH_EAST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_SOUTH_WEST;\n            height = -height;\n            top -= height;\n          }\n\n          break;\n\n        case ACTION_SOUTH_WEST:\n          if (aspectRatio) {\n            if (range.x <= 0 && (left <= minLeft || bottom >= maxHeight)) {\n              renderable = false;\n              break;\n            }\n\n            check(ACTION_WEST);\n            width -= range.x;\n            left += range.x;\n            height = width / aspectRatio;\n          } else {\n            check(ACTION_SOUTH);\n            check(ACTION_WEST);\n\n            if (range.x <= 0) {\n              if (left > minLeft) {\n                width -= range.x;\n                left += range.x;\n              } else if (range.y >= 0 && bottom >= maxHeight) {\n                renderable = false;\n              }\n            } else {\n              width -= range.x;\n              left += range.x;\n            }\n\n            if (range.y >= 0) {\n              if (bottom < maxHeight) {\n                height += range.y;\n              }\n            } else {\n              height += range.y;\n            }\n          }\n\n          if (width < 0 && height < 0) {\n            action = ACTION_NORTH_EAST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_SOUTH_EAST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_NORTH_WEST;\n            height = -height;\n            top -= height;\n          }\n\n          break;\n\n        case ACTION_SOUTH_EAST:\n          if (aspectRatio) {\n            if (range.x >= 0 && (right >= maxWidth || bottom >= maxHeight)) {\n              renderable = false;\n              break;\n            }\n\n            check(ACTION_EAST);\n            width += range.x;\n            height = width / aspectRatio;\n          } else {\n            check(ACTION_SOUTH);\n            check(ACTION_EAST);\n\n            if (range.x >= 0) {\n              if (right < maxWidth) {\n                width += range.x;\n              } else if (range.y >= 0 && bottom >= maxHeight) {\n                renderable = false;\n              }\n            } else {\n              width += range.x;\n            }\n\n            if (range.y >= 0) {\n              if (bottom < maxHeight) {\n                height += range.y;\n              }\n            } else {\n              height += range.y;\n            }\n          }\n\n          if (width < 0 && height < 0) {\n            action = ACTION_NORTH_WEST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_SOUTH_WEST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_NORTH_EAST;\n            height = -height;\n            top -= height;\n          }\n\n          break;\n        // Move canvas\n\n        case ACTION_MOVE:\n          this.move(range.x, range.y);\n          renderable = false;\n          break;\n        // Zoom canvas\n\n        case ACTION_ZOOM:\n          this.zoom(getMaxZoomRatio(pointers), event);\n          renderable = false;\n          break;\n        // Create crop box\n\n        case ACTION_CROP:\n          if (!range.x || !range.y) {\n            renderable = false;\n            break;\n          }\n\n          offset = getOffset(this.cropper);\n          left = pointer.startX - offset.left;\n          top = pointer.startY - offset.top;\n          width = cropBoxData.minWidth;\n          height = cropBoxData.minHeight;\n\n          if (range.x > 0) {\n            action = range.y > 0 ? ACTION_SOUTH_EAST : ACTION_NORTH_EAST;\n          } else if (range.x < 0) {\n            left -= width;\n            action = range.y > 0 ? ACTION_SOUTH_WEST : ACTION_NORTH_WEST;\n          }\n\n          if (range.y < 0) {\n            top -= height;\n          } // Show the crop box if is hidden\n\n\n          if (!this.cropped) {\n            removeClass(this.cropBox, CLASS_HIDDEN);\n            this.cropped = true;\n\n            if (this.limited) {\n              this.limitCropBox(true, true);\n            }\n          }\n\n          break;\n\n        default:\n      }\n\n      if (renderable) {\n        cropBoxData.width = width;\n        cropBoxData.height = height;\n        cropBoxData.left = left;\n        cropBoxData.top = top;\n        this.action = action;\n        this.renderCropBox();\n      } // Override\n\n\n      forEach(pointers, function (p) {\n        p.startX = p.endX;\n        p.startY = p.endY;\n      });\n    }\n  };\n\n  var methods = {\n    // Show the crop box manually\n    crop: function crop() {\n      if (this.ready && !this.cropped && !this.disabled) {\n        this.cropped = true;\n        this.limitCropBox(true, true);\n\n        if (this.options.modal) {\n          addClass(this.dragBox, CLASS_MODAL);\n        }\n\n        removeClass(this.cropBox, CLASS_HIDDEN);\n        this.setCropBoxData(this.initialCropBoxData);\n      }\n\n      return this;\n    },\n    // Reset the image and crop box to their initial states\n    reset: function reset() {\n      if (this.ready && !this.disabled) {\n        this.imageData = assign({}, this.initialImageData);\n        this.canvasData = assign({}, this.initialCanvasData);\n        this.cropBoxData = assign({}, this.initialCropBoxData);\n        this.renderCanvas();\n\n        if (this.cropped) {\n          this.renderCropBox();\n        }\n      }\n\n      return this;\n    },\n    // Clear the crop box\n    clear: function clear() {\n      if (this.cropped && !this.disabled) {\n        assign(this.cropBoxData, {\n          left: 0,\n          top: 0,\n          width: 0,\n          height: 0\n        });\n        this.cropped = false;\n        this.renderCropBox();\n        this.limitCanvas(true, true); // Render canvas after crop box rendered\n\n        this.renderCanvas();\n        removeClass(this.dragBox, CLASS_MODAL);\n        addClass(this.cropBox, CLASS_HIDDEN);\n      }\n\n      return this;\n    },\n\n    /**\n     * Replace the image's src and rebuild the cropper\n     * @param {string} url - The new URL.\n     * @param {boolean} [hasSameSize] - Indicate if the new image has the same size as the old one.\n     * @returns {Cropper} this\n     */\n    replace: function replace(url) {\n      var hasSameSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (!this.disabled && url) {\n        if (this.isImg) {\n          this.element.src = url;\n        }\n\n        if (hasSameSize) {\n          this.url = url;\n          this.image.src = url;\n\n          if (this.ready) {\n            this.viewBoxImage.src = url;\n            forEach(this.previews, function (element) {\n              element.getElementsByTagName('img')[0].src = url;\n            });\n          }\n        } else {\n          if (this.isImg) {\n            this.replaced = true;\n          }\n\n          this.options.data = null;\n          this.uncreate();\n          this.load(url);\n        }\n      }\n\n      return this;\n    },\n    // Enable (unfreeze) the cropper\n    enable: function enable() {\n      if (this.ready && this.disabled) {\n        this.disabled = false;\n        removeClass(this.cropper, CLASS_DISABLED);\n      }\n\n      return this;\n    },\n    // Disable (freeze) the cropper\n    disable: function disable() {\n      if (this.ready && !this.disabled) {\n        this.disabled = true;\n        addClass(this.cropper, CLASS_DISABLED);\n      }\n\n      return this;\n    },\n\n    /**\n     * Destroy the cropper and remove the instance from the image\n     * @returns {Cropper} this\n     */\n    destroy: function destroy() {\n      var element = this.element;\n\n      if (!element[NAMESPACE]) {\n        return this;\n      }\n\n      element[NAMESPACE] = undefined;\n\n      if (this.isImg && this.replaced) {\n        element.src = this.originalUrl;\n      }\n\n      this.uncreate();\n      return this;\n    },\n\n    /**\n     * Move the canvas with relative offsets\n     * @param {number} offsetX - The relative offset distance on the x-axis.\n     * @param {number} [offsetY=offsetX] - The relative offset distance on the y-axis.\n     * @returns {Cropper} this\n     */\n    move: function move(offsetX) {\n      var offsetY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : offsetX;\n      var _this$canvasData = this.canvasData,\n          left = _this$canvasData.left,\n          top = _this$canvasData.top;\n      return this.moveTo(isUndefined(offsetX) ? offsetX : left + Number(offsetX), isUndefined(offsetY) ? offsetY : top + Number(offsetY));\n    },\n\n    /**\n     * Move the canvas to an absolute point\n     * @param {number} x - The x-axis coordinate.\n     * @param {number} [y=x] - The y-axis coordinate.\n     * @returns {Cropper} this\n     */\n    moveTo: function moveTo(x) {\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : x;\n      var canvasData = this.canvasData;\n      var changed = false;\n      x = Number(x);\n      y = Number(y);\n\n      if (this.ready && !this.disabled && this.options.movable) {\n        if (isNumber(x)) {\n          canvasData.left = x;\n          changed = true;\n        }\n\n        if (isNumber(y)) {\n          canvasData.top = y;\n          changed = true;\n        }\n\n        if (changed) {\n          this.renderCanvas(true);\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Zoom the canvas with a relative ratio\n     * @param {number} ratio - The target ratio.\n     * @param {Event} _originalEvent - The original event if any.\n     * @returns {Cropper} this\n     */\n    zoom: function zoom(ratio, _originalEvent) {\n      var canvasData = this.canvasData;\n      ratio = Number(ratio);\n\n      if (ratio < 0) {\n        ratio = 1 / (1 - ratio);\n      } else {\n        ratio = 1 + ratio;\n      }\n\n      return this.zoomTo(canvasData.width * ratio / canvasData.naturalWidth, null, _originalEvent);\n    },\n\n    /**\n     * Zoom the canvas to an absolute ratio\n     * @param {number} ratio - The target ratio.\n     * @param {Object} pivot - The zoom pivot point coordinate.\n     * @param {Event} _originalEvent - The original event if any.\n     * @returns {Cropper} this\n     */\n    zoomTo: function zoomTo(ratio, pivot, _originalEvent) {\n      var options = this.options,\n          canvasData = this.canvasData;\n      var width = canvasData.width,\n          height = canvasData.height,\n          naturalWidth = canvasData.naturalWidth,\n          naturalHeight = canvasData.naturalHeight;\n      ratio = Number(ratio);\n\n      if (ratio >= 0 && this.ready && !this.disabled && options.zoomable) {\n        var newWidth = naturalWidth * ratio;\n        var newHeight = naturalHeight * ratio;\n\n        if (dispatchEvent(this.element, EVENT_ZOOM, {\n          ratio: ratio,\n          oldRatio: width / naturalWidth,\n          originalEvent: _originalEvent\n        }) === false) {\n          return this;\n        }\n\n        if (_originalEvent) {\n          var pointers = this.pointers;\n          var offset = getOffset(this.cropper);\n          var center = pointers && Object.keys(pointers).length ? getPointersCenter(pointers) : {\n            pageX: _originalEvent.pageX,\n            pageY: _originalEvent.pageY\n          }; // Zoom from the triggering point of the event\n\n          canvasData.left -= (newWidth - width) * ((center.pageX - offset.left - canvasData.left) / width);\n          canvasData.top -= (newHeight - height) * ((center.pageY - offset.top - canvasData.top) / height);\n        } else if (isPlainObject(pivot) && isNumber(pivot.x) && isNumber(pivot.y)) {\n          canvasData.left -= (newWidth - width) * ((pivot.x - canvasData.left) / width);\n          canvasData.top -= (newHeight - height) * ((pivot.y - canvasData.top) / height);\n        } else {\n          // Zoom from the center of the canvas\n          canvasData.left -= (newWidth - width) / 2;\n          canvasData.top -= (newHeight - height) / 2;\n        }\n\n        canvasData.width = newWidth;\n        canvasData.height = newHeight;\n        this.renderCanvas(true);\n      }\n\n      return this;\n    },\n\n    /**\n     * Rotate the canvas with a relative degree\n     * @param {number} degree - The rotate degree.\n     * @returns {Cropper} this\n     */\n    rotate: function rotate(degree) {\n      return this.rotateTo((this.imageData.rotate || 0) + Number(degree));\n    },\n\n    /**\n     * Rotate the canvas to an absolute degree\n     * @param {number} degree - The rotate degree.\n     * @returns {Cropper} this\n     */\n    rotateTo: function rotateTo(degree) {\n      degree = Number(degree);\n\n      if (isNumber(degree) && this.ready && !this.disabled && this.options.rotatable) {\n        this.imageData.rotate = degree % 360;\n        this.renderCanvas(true, true);\n      }\n\n      return this;\n    },\n\n    /**\n     * Scale the image on the x-axis.\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @returns {Cropper} this\n     */\n    scaleX: function scaleX(_scaleX) {\n      var scaleY = this.imageData.scaleY;\n      return this.scale(_scaleX, isNumber(scaleY) ? scaleY : 1);\n    },\n\n    /**\n     * Scale the image on the y-axis.\n     * @param {number} scaleY - The scale ratio on the y-axis.\n     * @returns {Cropper} this\n     */\n    scaleY: function scaleY(_scaleY) {\n      var scaleX = this.imageData.scaleX;\n      return this.scale(isNumber(scaleX) ? scaleX : 1, _scaleY);\n    },\n\n    /**\n     * Scale the image\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @param {number} [scaleY=scaleX] - The scale ratio on the y-axis.\n     * @returns {Cropper} this\n     */\n    scale: function scale(scaleX) {\n      var scaleY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : scaleX;\n      var imageData = this.imageData;\n      var transformed = false;\n      scaleX = Number(scaleX);\n      scaleY = Number(scaleY);\n\n      if (this.ready && !this.disabled && this.options.scalable) {\n        if (isNumber(scaleX)) {\n          imageData.scaleX = scaleX;\n          transformed = true;\n        }\n\n        if (isNumber(scaleY)) {\n          imageData.scaleY = scaleY;\n          transformed = true;\n        }\n\n        if (transformed) {\n          this.renderCanvas(true, true);\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Get the cropped area position and size data (base on the original image)\n     * @param {boolean} [rounded=false] - Indicate if round the data values or not.\n     * @returns {Object} The result cropped data.\n     */\n    getData: function getData() {\n      var rounded = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var options = this.options,\n          imageData = this.imageData,\n          canvasData = this.canvasData,\n          cropBoxData = this.cropBoxData;\n      var data;\n\n      if (this.ready && this.cropped) {\n        data = {\n          x: cropBoxData.left - canvasData.left,\n          y: cropBoxData.top - canvasData.top,\n          width: cropBoxData.width,\n          height: cropBoxData.height\n        };\n        var ratio = imageData.width / imageData.naturalWidth;\n        forEach(data, function (n, i) {\n          data[i] = n / ratio;\n        });\n\n        if (rounded) {\n          // In case rounding off leads to extra 1px in right or bottom border\n          // we should round the top-left corner and the dimension (#343).\n          var bottom = Math.round(data.y + data.height);\n          var right = Math.round(data.x + data.width);\n          data.x = Math.round(data.x);\n          data.y = Math.round(data.y);\n          data.width = right - data.x;\n          data.height = bottom - data.y;\n        }\n      } else {\n        data = {\n          x: 0,\n          y: 0,\n          width: 0,\n          height: 0\n        };\n      }\n\n      if (options.rotatable) {\n        data.rotate = imageData.rotate || 0;\n      }\n\n      if (options.scalable) {\n        data.scaleX = imageData.scaleX || 1;\n        data.scaleY = imageData.scaleY || 1;\n      }\n\n      return data;\n    },\n\n    /**\n     * Set the cropped area position and size with new data\n     * @param {Object} data - The new data.\n     * @returns {Cropper} this\n     */\n    setData: function setData(data) {\n      var options = this.options,\n          imageData = this.imageData,\n          canvasData = this.canvasData;\n      var cropBoxData = {};\n\n      if (this.ready && !this.disabled && isPlainObject(data)) {\n        var transformed = false;\n\n        if (options.rotatable) {\n          if (isNumber(data.rotate) && data.rotate !== imageData.rotate) {\n            imageData.rotate = data.rotate;\n            transformed = true;\n          }\n        }\n\n        if (options.scalable) {\n          if (isNumber(data.scaleX) && data.scaleX !== imageData.scaleX) {\n            imageData.scaleX = data.scaleX;\n            transformed = true;\n          }\n\n          if (isNumber(data.scaleY) && data.scaleY !== imageData.scaleY) {\n            imageData.scaleY = data.scaleY;\n            transformed = true;\n          }\n        }\n\n        if (transformed) {\n          this.renderCanvas(true, true);\n        }\n\n        var ratio = imageData.width / imageData.naturalWidth;\n\n        if (isNumber(data.x)) {\n          cropBoxData.left = data.x * ratio + canvasData.left;\n        }\n\n        if (isNumber(data.y)) {\n          cropBoxData.top = data.y * ratio + canvasData.top;\n        }\n\n        if (isNumber(data.width)) {\n          cropBoxData.width = data.width * ratio;\n        }\n\n        if (isNumber(data.height)) {\n          cropBoxData.height = data.height * ratio;\n        }\n\n        this.setCropBoxData(cropBoxData);\n      }\n\n      return this;\n    },\n\n    /**\n     * Get the container size data.\n     * @returns {Object} The result container data.\n     */\n    getContainerData: function getContainerData() {\n      return this.ready ? assign({}, this.containerData) : {};\n    },\n\n    /**\n     * Get the image position and size data.\n     * @returns {Object} The result image data.\n     */\n    getImageData: function getImageData() {\n      return this.sized ? assign({}, this.imageData) : {};\n    },\n\n    /**\n     * Get the canvas position and size data.\n     * @returns {Object} The result canvas data.\n     */\n    getCanvasData: function getCanvasData() {\n      var canvasData = this.canvasData;\n      var data = {};\n\n      if (this.ready) {\n        forEach(['left', 'top', 'width', 'height', 'naturalWidth', 'naturalHeight'], function (n) {\n          data[n] = canvasData[n];\n        });\n      }\n\n      return data;\n    },\n\n    /**\n     * Set the canvas position and size with new data.\n     * @param {Object} data - The new canvas data.\n     * @returns {Cropper} this\n     */\n    setCanvasData: function setCanvasData(data) {\n      var canvasData = this.canvasData;\n      var aspectRatio = canvasData.aspectRatio;\n\n      if (this.ready && !this.disabled && isPlainObject(data)) {\n        if (isNumber(data.left)) {\n          canvasData.left = data.left;\n        }\n\n        if (isNumber(data.top)) {\n          canvasData.top = data.top;\n        }\n\n        if (isNumber(data.width)) {\n          canvasData.width = data.width;\n          canvasData.height = data.width / aspectRatio;\n        } else if (isNumber(data.height)) {\n          canvasData.height = data.height;\n          canvasData.width = data.height * aspectRatio;\n        }\n\n        this.renderCanvas(true);\n      }\n\n      return this;\n    },\n\n    /**\n     * Get the crop box position and size data.\n     * @returns {Object} The result crop box data.\n     */\n    getCropBoxData: function getCropBoxData() {\n      var cropBoxData = this.cropBoxData;\n      var data;\n\n      if (this.ready && this.cropped) {\n        data = {\n          left: cropBoxData.left,\n          top: cropBoxData.top,\n          width: cropBoxData.width,\n          height: cropBoxData.height\n        };\n      }\n\n      return data || {};\n    },\n\n    /**\n     * Set the crop box position and size with new data.\n     * @param {Object} data - The new crop box data.\n     * @returns {Cropper} this\n     */\n    setCropBoxData: function setCropBoxData(data) {\n      var cropBoxData = this.cropBoxData;\n      var aspectRatio = this.options.aspectRatio;\n      var widthChanged;\n      var heightChanged;\n\n      if (this.ready && this.cropped && !this.disabled && isPlainObject(data)) {\n        if (isNumber(data.left)) {\n          cropBoxData.left = data.left;\n        }\n\n        if (isNumber(data.top)) {\n          cropBoxData.top = data.top;\n        }\n\n        if (isNumber(data.width) && data.width !== cropBoxData.width) {\n          widthChanged = true;\n          cropBoxData.width = data.width;\n        }\n\n        if (isNumber(data.height) && data.height !== cropBoxData.height) {\n          heightChanged = true;\n          cropBoxData.height = data.height;\n        }\n\n        if (aspectRatio) {\n          if (widthChanged) {\n            cropBoxData.height = cropBoxData.width / aspectRatio;\n          } else if (heightChanged) {\n            cropBoxData.width = cropBoxData.height * aspectRatio;\n          }\n        }\n\n        this.renderCropBox();\n      }\n\n      return this;\n    },\n\n    /**\n     * Get a canvas drawn the cropped image.\n     * @param {Object} [options={}] - The config options.\n     * @returns {HTMLCanvasElement} - The result canvas.\n     */\n    getCroppedCanvas: function getCroppedCanvas() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (!this.ready || !window.HTMLCanvasElement) {\n        return null;\n      }\n\n      var canvasData = this.canvasData;\n      var source = getSourceCanvas(this.image, this.imageData, canvasData, options); // Returns the source canvas if it is not cropped.\n\n      if (!this.cropped) {\n        return source;\n      }\n\n      var _this$getData = this.getData(),\n          initialX = _this$getData.x,\n          initialY = _this$getData.y,\n          initialWidth = _this$getData.width,\n          initialHeight = _this$getData.height;\n\n      var ratio = source.width / Math.floor(canvasData.naturalWidth);\n\n      if (ratio !== 1) {\n        initialX *= ratio;\n        initialY *= ratio;\n        initialWidth *= ratio;\n        initialHeight *= ratio;\n      }\n\n      var aspectRatio = initialWidth / initialHeight;\n      var maxSizes = getAdjustedSizes({\n        aspectRatio: aspectRatio,\n        width: options.maxWidth || Infinity,\n        height: options.maxHeight || Infinity\n      });\n      var minSizes = getAdjustedSizes({\n        aspectRatio: aspectRatio,\n        width: options.minWidth || 0,\n        height: options.minHeight || 0\n      }, 'cover');\n\n      var _getAdjustedSizes = getAdjustedSizes({\n        aspectRatio: aspectRatio,\n        width: options.width || (ratio !== 1 ? source.width : initialWidth),\n        height: options.height || (ratio !== 1 ? source.height : initialHeight)\n      }),\n          width = _getAdjustedSizes.width,\n          height = _getAdjustedSizes.height;\n\n      width = Math.min(maxSizes.width, Math.max(minSizes.width, width));\n      height = Math.min(maxSizes.height, Math.max(minSizes.height, height));\n      var canvas = document.createElement('canvas');\n      var context = canvas.getContext('2d');\n      canvas.width = normalizeDecimalNumber(width);\n      canvas.height = normalizeDecimalNumber(height);\n      context.fillStyle = options.fillColor || 'transparent';\n      context.fillRect(0, 0, width, height);\n      var _options$imageSmoothi = options.imageSmoothingEnabled,\n          imageSmoothingEnabled = _options$imageSmoothi === void 0 ? true : _options$imageSmoothi,\n          imageSmoothingQuality = options.imageSmoothingQuality;\n      context.imageSmoothingEnabled = imageSmoothingEnabled;\n\n      if (imageSmoothingQuality) {\n        context.imageSmoothingQuality = imageSmoothingQuality;\n      } // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D.drawImage\n\n\n      var sourceWidth = source.width;\n      var sourceHeight = source.height; // Source canvas parameters\n\n      var srcX = initialX;\n      var srcY = initialY;\n      var srcWidth;\n      var srcHeight; // Destination canvas parameters\n\n      var dstX;\n      var dstY;\n      var dstWidth;\n      var dstHeight;\n\n      if (srcX <= -initialWidth || srcX > sourceWidth) {\n        srcX = 0;\n        srcWidth = 0;\n        dstX = 0;\n        dstWidth = 0;\n      } else if (srcX <= 0) {\n        dstX = -srcX;\n        srcX = 0;\n        srcWidth = Math.min(sourceWidth, initialWidth + srcX);\n        dstWidth = srcWidth;\n      } else if (srcX <= sourceWidth) {\n        dstX = 0;\n        srcWidth = Math.min(initialWidth, sourceWidth - srcX);\n        dstWidth = srcWidth;\n      }\n\n      if (srcWidth <= 0 || srcY <= -initialHeight || srcY > sourceHeight) {\n        srcY = 0;\n        srcHeight = 0;\n        dstY = 0;\n        dstHeight = 0;\n      } else if (srcY <= 0) {\n        dstY = -srcY;\n        srcY = 0;\n        srcHeight = Math.min(sourceHeight, initialHeight + srcY);\n        dstHeight = srcHeight;\n      } else if (srcY <= sourceHeight) {\n        dstY = 0;\n        srcHeight = Math.min(initialHeight, sourceHeight - srcY);\n        dstHeight = srcHeight;\n      }\n\n      var params = [srcX, srcY, srcWidth, srcHeight]; // Avoid \"IndexSizeError\"\n\n      if (dstWidth > 0 && dstHeight > 0) {\n        var scale = width / initialWidth;\n        params.push(dstX * scale, dstY * scale, dstWidth * scale, dstHeight * scale);\n      } // All the numerical parameters should be integer for `drawImage`\n      // https://github.com/fengyuanchen/cropper/issues/476\n\n\n      context.drawImage.apply(context, [source].concat(_toConsumableArray(params.map(function (param) {\n        return Math.floor(normalizeDecimalNumber(param));\n      }))));\n      return canvas;\n    },\n\n    /**\n     * Change the aspect ratio of the crop box.\n     * @param {number} aspectRatio - The new aspect ratio.\n     * @returns {Cropper} this\n     */\n    setAspectRatio: function setAspectRatio(aspectRatio) {\n      var options = this.options;\n\n      if (!this.disabled && !isUndefined(aspectRatio)) {\n        // 0 -> NaN\n        options.aspectRatio = Math.max(0, aspectRatio) || NaN;\n\n        if (this.ready) {\n          this.initCropBox();\n\n          if (this.cropped) {\n            this.renderCropBox();\n          }\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Change the drag mode.\n     * @param {string} mode - The new drag mode.\n     * @returns {Cropper} this\n     */\n    setDragMode: function setDragMode(mode) {\n      var options = this.options,\n          dragBox = this.dragBox,\n          face = this.face;\n\n      if (this.ready && !this.disabled) {\n        var croppable = mode === DRAG_MODE_CROP;\n        var movable = options.movable && mode === DRAG_MODE_MOVE;\n        mode = croppable || movable ? mode : DRAG_MODE_NONE;\n        options.dragMode = mode;\n        setData(dragBox, DATA_ACTION, mode);\n        toggleClass(dragBox, CLASS_CROP, croppable);\n        toggleClass(dragBox, CLASS_MOVE, movable);\n\n        if (!options.cropBoxMovable) {\n          // Sync drag mode to crop box when it is not movable\n          setData(face, DATA_ACTION, mode);\n          toggleClass(face, CLASS_CROP, croppable);\n          toggleClass(face, CLASS_MOVE, movable);\n        }\n      }\n\n      return this;\n    }\n  };\n\n  var AnotherCropper = WINDOW.Cropper;\n\n  var Cropper =\n  /*#__PURE__*/\n  function () {\n    /**\n     * Create a new Cropper.\n     * @param {Element} element - The target element for cropping.\n     * @param {Object} [options={}] - The configuration options.\n     */\n    function Cropper(element) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      _classCallCheck(this, Cropper);\n\n      if (!element || !REGEXP_TAG_NAME.test(element.tagName)) {\n        throw new Error('The first argument is required and must be an <img> or <canvas> element.');\n      }\n\n      this.element = element;\n      this.options = assign({}, DEFAULTS, isPlainObject(options) && options);\n      this.cropped = false;\n      this.disabled = false;\n      this.pointers = {};\n      this.ready = false;\n      this.reloading = false;\n      this.replaced = false;\n      this.sized = false;\n      this.sizing = false;\n      this.init();\n    }\n\n    _createClass(Cropper, [{\n      key: \"init\",\n      value: function init() {\n        var element = this.element;\n        var tagName = element.tagName.toLowerCase();\n        var url;\n\n        if (element[NAMESPACE]) {\n          return;\n        }\n\n        element[NAMESPACE] = this;\n\n        if (tagName === 'img') {\n          this.isImg = true; // e.g.: \"img/picture.jpg\"\n\n          url = element.getAttribute('src') || '';\n          this.originalUrl = url; // Stop when it's a blank image\n\n          if (!url) {\n            return;\n          } // e.g.: \"http://example.com/img/picture.jpg\"\n\n\n          url = element.src;\n        } else if (tagName === 'canvas' && window.HTMLCanvasElement) {\n          url = element.toDataURL();\n        }\n\n        this.load(url);\n      }\n    }, {\n      key: \"load\",\n      value: function load(url) {\n        var _this = this;\n\n        if (!url) {\n          return;\n        }\n\n        this.url = url;\n        this.imageData = {};\n        var element = this.element,\n            options = this.options;\n\n        if (!options.rotatable && !options.scalable) {\n          options.checkOrientation = false;\n        } // Only IE10+ supports Typed Arrays\n\n\n        if (!options.checkOrientation || !window.ArrayBuffer) {\n          this.clone();\n          return;\n        } // Detect the mime type of the image directly if it is a Data URL\n\n\n        if (REGEXP_DATA_URL.test(url)) {\n          // Read ArrayBuffer from Data URL of JPEG images directly for better performance\n          if (REGEXP_DATA_URL_JPEG.test(url)) {\n            this.read(dataURLToArrayBuffer(url));\n          } else {\n            // Only a JPEG image may contains Exif Orientation information,\n            // the rest types of Data URLs are not necessary to check orientation at all.\n            this.clone();\n          }\n\n          return;\n        } // 1. Detect the mime type of the image by a XMLHttpRequest.\n        // 2. Load the image as ArrayBuffer for reading orientation if its a JPEG image.\n\n\n        var xhr = new XMLHttpRequest();\n        var clone = this.clone.bind(this);\n        this.reloading = true;\n        this.xhr = xhr; // 1. Cross origin requests are only supported for protocol schemes:\n        // http, https, data, chrome, chrome-extension.\n        // 2. Access to XMLHttpRequest from a Data URL will be blocked by CORS policy\n        // in some browsers as IE11 and Safari.\n\n        xhr.onabort = clone;\n        xhr.onerror = clone;\n        xhr.ontimeout = clone;\n\n        xhr.onprogress = function () {\n          // Abort the request directly if it not a JPEG image for better performance\n          if (xhr.getResponseHeader('content-type') !== MIME_TYPE_JPEG) {\n            xhr.abort();\n          }\n        };\n\n        xhr.onload = function () {\n          _this.read(xhr.response);\n        };\n\n        xhr.onloadend = function () {\n          _this.reloading = false;\n          _this.xhr = null;\n        }; // Bust cache when there is a \"crossOrigin\" property to avoid browser cache error\n\n\n        if (options.checkCrossOrigin && isCrossOriginURL(url) && element.crossOrigin) {\n          url = addTimestamp(url);\n        }\n\n        xhr.open('GET', url);\n        xhr.responseType = 'arraybuffer';\n        xhr.withCredentials = element.crossOrigin === 'use-credentials';\n        xhr.send();\n      }\n    }, {\n      key: \"read\",\n      value: function read(arrayBuffer) {\n        var options = this.options,\n            imageData = this.imageData; // Reset the orientation value to its default value 1\n        // as some iOS browsers will render image with its orientation\n\n        var orientation = resetAndGetOrientation(arrayBuffer);\n        var rotate = 0;\n        var scaleX = 1;\n        var scaleY = 1;\n\n        if (orientation > 1) {\n          // Generate a new URL which has the default orientation value\n          this.url = arrayBufferToDataURL(arrayBuffer, MIME_TYPE_JPEG);\n\n          var _parseOrientation = parseOrientation(orientation);\n\n          rotate = _parseOrientation.rotate;\n          scaleX = _parseOrientation.scaleX;\n          scaleY = _parseOrientation.scaleY;\n        }\n\n        if (options.rotatable) {\n          imageData.rotate = rotate;\n        }\n\n        if (options.scalable) {\n          imageData.scaleX = scaleX;\n          imageData.scaleY = scaleY;\n        }\n\n        this.clone();\n      }\n    }, {\n      key: \"clone\",\n      value: function clone() {\n        var element = this.element,\n            url = this.url;\n        var crossOrigin = element.crossOrigin;\n        var crossOriginUrl = url;\n\n        if (this.options.checkCrossOrigin && isCrossOriginURL(url)) {\n          if (!crossOrigin) {\n            crossOrigin = 'anonymous';\n          } // Bust cache when there is not a \"crossOrigin\" property (#519)\n\n\n          crossOriginUrl = addTimestamp(url);\n        }\n\n        this.crossOrigin = crossOrigin;\n        this.crossOriginUrl = crossOriginUrl;\n        var image = document.createElement('img');\n\n        if (crossOrigin) {\n          image.crossOrigin = crossOrigin;\n        }\n\n        image.src = crossOriginUrl || url;\n        image.alt = element.alt || 'The image to crop';\n        this.image = image;\n        image.onload = this.start.bind(this);\n        image.onerror = this.stop.bind(this);\n        addClass(image, CLASS_HIDE);\n        element.parentNode.insertBefore(image, element.nextSibling);\n      }\n    }, {\n      key: \"start\",\n      value: function start() {\n        var _this2 = this;\n\n        var image = this.image;\n        image.onload = null;\n        image.onerror = null;\n        this.sizing = true; // Match all browsers that use WebKit as the layout engine in iOS devices,\n        // such as Safari for iOS, Chrome for iOS, and in-app browsers.\n\n        var isIOSWebKit = WINDOW.navigator && /(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(WINDOW.navigator.userAgent);\n\n        var done = function done(naturalWidth, naturalHeight) {\n          assign(_this2.imageData, {\n            naturalWidth: naturalWidth,\n            naturalHeight: naturalHeight,\n            aspectRatio: naturalWidth / naturalHeight\n          });\n          _this2.sizing = false;\n          _this2.sized = true;\n\n          _this2.build();\n        }; // Most modern browsers (excepts iOS WebKit)\n\n\n        if (image.naturalWidth && !isIOSWebKit) {\n          done(image.naturalWidth, image.naturalHeight);\n          return;\n        }\n\n        var sizingImage = document.createElement('img');\n        var body = document.body || document.documentElement;\n        this.sizingImage = sizingImage;\n\n        sizingImage.onload = function () {\n          done(sizingImage.width, sizingImage.height);\n\n          if (!isIOSWebKit) {\n            body.removeChild(sizingImage);\n          }\n        };\n\n        sizingImage.src = image.src; // iOS WebKit will convert the image automatically\n        // with its orientation once append it into DOM (#279)\n\n        if (!isIOSWebKit) {\n          sizingImage.style.cssText = 'left:0;' + 'max-height:none!important;' + 'max-width:none!important;' + 'min-height:0!important;' + 'min-width:0!important;' + 'opacity:0;' + 'position:absolute;' + 'top:0;' + 'z-index:-1;';\n          body.appendChild(sizingImage);\n        }\n      }\n    }, {\n      key: \"stop\",\n      value: function stop() {\n        var image = this.image;\n        image.onload = null;\n        image.onerror = null;\n        image.parentNode.removeChild(image);\n        this.image = null;\n      }\n    }, {\n      key: \"build\",\n      value: function build() {\n        if (!this.sized || this.ready) {\n          return;\n        }\n\n        var element = this.element,\n            options = this.options,\n            image = this.image; // Create cropper elements\n\n        var container = element.parentNode;\n        var template = document.createElement('div');\n        template.innerHTML = TEMPLATE;\n        var cropper = template.querySelector(\".\".concat(NAMESPACE, \"-container\"));\n        var canvas = cropper.querySelector(\".\".concat(NAMESPACE, \"-canvas\"));\n        var dragBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-drag-box\"));\n        var cropBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-crop-box\"));\n        var face = cropBox.querySelector(\".\".concat(NAMESPACE, \"-face\"));\n        this.container = container;\n        this.cropper = cropper;\n        this.canvas = canvas;\n        this.dragBox = dragBox;\n        this.cropBox = cropBox;\n        this.viewBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-view-box\"));\n        this.face = face;\n        canvas.appendChild(image); // Hide the original image\n\n        addClass(element, CLASS_HIDDEN); // Inserts the cropper after to the current image\n\n        container.insertBefore(cropper, element.nextSibling); // Show the image if is hidden\n\n        if (!this.isImg) {\n          removeClass(image, CLASS_HIDE);\n        }\n\n        this.initPreview();\n        this.bind();\n        options.initialAspectRatio = Math.max(0, options.initialAspectRatio) || NaN;\n        options.aspectRatio = Math.max(0, options.aspectRatio) || NaN;\n        options.viewMode = Math.max(0, Math.min(3, Math.round(options.viewMode))) || 0;\n        addClass(cropBox, CLASS_HIDDEN);\n\n        if (!options.guides) {\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-dashed\")), CLASS_HIDDEN);\n        }\n\n        if (!options.center) {\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-center\")), CLASS_HIDDEN);\n        }\n\n        if (options.background) {\n          addClass(cropper, \"\".concat(NAMESPACE, \"-bg\"));\n        }\n\n        if (!options.highlight) {\n          addClass(face, CLASS_INVISIBLE);\n        }\n\n        if (options.cropBoxMovable) {\n          addClass(face, CLASS_MOVE);\n          setData(face, DATA_ACTION, ACTION_ALL);\n        }\n\n        if (!options.cropBoxResizable) {\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-line\")), CLASS_HIDDEN);\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-point\")), CLASS_HIDDEN);\n        }\n\n        this.render();\n        this.ready = true;\n        this.setDragMode(options.dragMode);\n\n        if (options.autoCrop) {\n          this.crop();\n        }\n\n        this.setData(options.data);\n\n        if (isFunction(options.ready)) {\n          addListener(element, EVENT_READY, options.ready, {\n            once: true\n          });\n        }\n\n        dispatchEvent(element, EVENT_READY);\n      }\n    }, {\n      key: \"unbuild\",\n      value: function unbuild() {\n        if (!this.ready) {\n          return;\n        }\n\n        this.ready = false;\n        this.unbind();\n        this.resetPreview();\n        this.cropper.parentNode.removeChild(this.cropper);\n        removeClass(this.element, CLASS_HIDDEN);\n      }\n    }, {\n      key: \"uncreate\",\n      value: function uncreate() {\n        if (this.ready) {\n          this.unbuild();\n          this.ready = false;\n          this.cropped = false;\n        } else if (this.sizing) {\n          this.sizingImage.onload = null;\n          this.sizing = false;\n          this.sized = false;\n        } else if (this.reloading) {\n          this.xhr.onabort = null;\n          this.xhr.abort();\n        } else if (this.image) {\n          this.stop();\n        }\n      }\n      /**\n       * Get the no conflict cropper class.\n       * @returns {Cropper} The cropper class.\n       */\n\n    }], [{\n      key: \"noConflict\",\n      value: function noConflict() {\n        window.Cropper = AnotherCropper;\n        return Cropper;\n      }\n      /**\n       * Change the default options.\n       * @param {Object} options - The new default options.\n       */\n\n    }, {\n      key: \"setDefaults\",\n      value: function setDefaults(options) {\n        assign(DEFAULTS, isPlainObject(options) && options);\n      }\n    }]);\n\n    return Cropper;\n  }();\n\n  assign(Cropper.prototype, render, preview, events, handlers, change, methods);\n\n  return Cropper;\n\n}));\n","<script>\n    import {afterUpdate, getContext, onMount} from \"svelte\";\n    import {fade} from 'svelte/transition';\n    import MyModal from \"svelte-mymodal\";\n    import jsx from \"js-extension-ling\";\n    import Cropper from \"cropperjs\";\n    import DropZoneHandler from \"js-dropzone-handler\";\n\n\n    //----------------------------------------\n    // PROPS\n    //----------------------------------------\n    export let isOpen = false;\n    export let uFile = {};\n    export let title = \"FileEditor\";\n    export let errors = [];\n\n\n    //----------------------------------------\n    // STATE\n    //----------------------------------------\n    let useOriginalImageChecked = false;\n    let stateCpt = 0;\n\n\n    //----------------------------------------\n    // CONTEXT\n    //----------------------------------------\n    const {\n        onCloseFileEditorBtnClicked,\n        onFileEditorFileDropped,\n        onFileEditorUpdated,\n        fileEditorOptions,\n    } = getContext(\"fileUploader\");\n    const feo = fileEditorOptions;\n\n\n    //----------------------------------------\n    // HTML THEME\n    //----------------------------------------\n    let styleBtnCancel = 'btn-cancel';\n    let styleBtnUpdate = 'btn-update';\n    if (true === feo.useBootstrap) {\n        styleBtnCancel = 'btn btn-danger mr-2';\n        styleBtnUpdate = 'btn btn-success';\n    }\n\n\n    //----------------------------------------\n    // OTHER VARS\n    //----------------------------------------\n    let cssIdCounter = jsx.cssId();\n    let isImage = false;\n    let initialCropData = null;\n    let newDrop = false;\n    let originalBlob = null;\n    let pendingOriginalBlob = false;\n\n\n    //----------------------------------------\n    // JS LIBS STUFF\n    //----------------------------------------\n    let jDialog;\n    let jSelect;\n    let cropper = null;\n    let dropZoneHandler = null;\n\n\n    //----------------------------------------\n    // LIFECYCLE\n    //----------------------------------------\n    afterUpdate(() => {\n\n\n\n        if (true === isOpen) {\n\n\n            jDialog = jQuery(`#file-editor-dialog-${cssIdCounter}`);\n\n            //----------------------------------------\n            // TAGS\n            //----------------------------------------\n            if (true === feo.useTags) {\n                jSelect = jQuery(`#id-fileuploader-tags-${cssIdCounter}`);\n                let select2Options = {\n                    // multiple: true,\n                };\n                if (feo.availableTags.length > 0) {\n                    select2Options.data = _toSelect2Data(feo.availableTags);\n                }\n                if (true === feo.allowCustomTags) {\n                    select2Options[\"tags\"] = true;\n                }\n                select2Options[\"maximumSelectionLength\"] = feo.nbTagsAllowed;\n                jSelect.select2(select2Options);\n            }\n\n\n            //----------------------------------------\n            // IMAGE EDITOR\n            //----------------------------------------\n            isImage = jsx.mimeIsImage(uFile.type);\n            if (false === pendingOriginalBlob) {\n\n\n                if (true === isImage) {\n\n\n                    setTimeout(() => {\n\n\n                        let jImageOriginal = jDialog.find('.image-original');\n                        if (jImageOriginal.length) {\n\n                            let cropperImgRef = jImageOriginal[0];\n\n\n                            //----------------------------------------\n                            // CROPPER\n                            //----------------------------------------\n\n                            let theUrl;\n                            if (\n                                    true === useOriginalImageChecked &&\n                                    null !== originalBlob\n                            ) {\n                                theUrl = URL.createObjectURL(originalBlob);\n                            } else {\n                                theUrl = URL.createObjectURL(uFile.file);\n                            }\n\n                            cropperImgRef.src = theUrl;\n                            let cropperOptions = {\n                                preview: '.img-preview',\n                                viewMode: 1,\n                                autoCropArea: 1,\n                                ready() {\n                                    initialCropData = cropper.getData();\n                                },\n                            };\n\n\n                            cropper = new Cropper(cropperImgRef, cropperOptions);\n\n\n                            //----------------------------------------\n                            // CROPPER TOOLBAR\n                            //----------------------------------------\n                            jDialog.find('.image-editor-toolbar').off(\"click\").on('click', '[data-method]', function () {\n                                var that = jQuery(this);\n                                var data = that.data();\n\n                                var cropped;\n                                var $target;\n                                var result;\n\n                                if (that.prop('disabled') || that.hasClass('disabled')) {\n                                    return;\n                                }\n\n                                if (cropper && data.method) {\n                                    data = jQuery.extend({}, data); // Clone a new one\n\n                                    if (typeof data.target !== 'undefined') {\n                                        $target = jQuery(data.target);\n\n                                        if (typeof data.option === 'undefined') {\n                                            try {\n                                                data.option = JSON.parse($target.val());\n                                            } catch (e) {\n                                                console.log(e.message);\n                                            }\n                                        }\n                                    }\n                                    cropped = cropper.cropped;\n\n\n                                    switch (data.method) {\n                                        case 'rotate':\n                                            if (cropped) {\n                                                cropper.clear();\n                                            }\n\n                                            break;\n                                    }\n\n                                    result = cropper[data.method](data.option, data.secondOption);\n\n                                    switch (data.method) {\n                                        case 'rotate':\n                                            if (cropped) {\n                                                cropper.crop();\n                                            }\n\n                                            break;\n\n                                        case 'scaleX':\n                                        case 'scaleY':\n                                            jQuery(this).data('option', -data.option);\n                                            break;\n                                    }\n                                }\n                            });\n                        }\n\n\n                    }, 1);\n                } else {\n                    /**\n                     * Required when the user first upload a non image, and then uploads an image again\n                     * (otherwise the cropper isn't initialized properly).\n                     */\n                    destroyCropper();\n                }\n            }\n\n\n            //----------------------------------------\n            // DROP ZONE\n            //----------------------------------------\n            if (null === dropZoneHandler) {\n                dropZoneHandler = new DropZoneHandler({\n                    container: jDialog[0],\n                    cssClass: feo.dropzoneOverClass || \"dropzone-hover\",\n                    onDrop: (files) => {\n                        useOriginalImageChecked = false;\n                        originalBlob = null;\n                        onFileEditorFileDropped(uFile, files[0]);\n                    },\n                });\n                dropZoneHandler.start();\n            }\n        } else {\n            destroyCropper();\n            dropZoneHandler = null;\n        }\n    });\n\n\n    //----------------------------------------\n    // FUNCTIONS\n    //----------------------------------------\n    /**\n     * https://select2.org/data-sources/arrays\n     */\n    function _toSelect2Data(tags) {\n        var arr = [];\n        for (var i in tags) {\n            var tag = tags[i];\n            arr.push({\n                \"id\": tag,\n                \"text\": tag,\n            })\n        }\n        return arr;\n    }\n\n    function removeError(e) {\n        e.target.closest(\".file-editor-error\").remove();\n    }\n\n\n    function destroyCropper() {\n        if (null !== cropper) {\n            cropper.destroy();\n        }\n        cropper = null;\n    }\n\n    async function onUpdateBtnClicked() {\n\n\n        let hasBeenCropped = false;\n        if (null !== cropper) {\n            hasBeenCropped = (false === jsx.compareObjects(initialCropData, cropper.getData()));\n        }\n\n\n        await onFileEditorUpdated(uFile, await getFileEditorData(), {\n            cropped: hasBeenCropped,\n            dropped: newDrop,\n            original: useOriginalImageChecked,\n        });\n\n        if (0 === errors.length) {\n            close();\n            useOriginalImageChecked = false; // make sure the user opens his files (and not the original) next time he opens the dialog\n        }\n    }\n\n\n    function close() {\n        originalBlob = null;\n        onCloseFileEditorBtnClicked();\n    }\n\n    async function getFileEditorData() {\n\n\n        let ret = {};\n        let directory;\n\n\n        if (true === feo.useDirectory) {\n            if (true === feo.directoryCanBeUpdated) {\n                directory = jDialog.find(\".input-dirname\").val();\n            } else {\n                directory = feo.directory;\n            }\n            ret.directory = directory;\n        }\n\n\n        ret.name = jDialog.find(\".input-basename\").val() + \".\" + jDialog.find(\".input-extension\").val();\n\n\n        if (true === feo.usePrivacy) {\n            let isPrivate = jsx.toInt(jDialog.find('.input-privacy').prop('checked'));\n            ret.is_private = isPrivate;\n        }\n\n\n        if (true === feo.useTags) {\n            let tags = jDialog.find('.select-tags').val();\n            ret.tags = tags;\n        }\n\n\n        let file = uFile.file;\n        if (null !== cropper) {\n            file = await getFileEditorBlob(cropper);\n        }\n        ret.file = file;\n        return ret;\n    }\n\n    async function getFileEditorBlob(cropper) {\n        return new Promise((resolve, reject) => {\n            cropper.getCroppedCanvas().toBlob((blob) => {\n                resolve(blob);\n            });\n        });\n    }\n\n    async function toggleOriginal(e) {\n\n        destroyCropper();\n\n        if (true === e.target.checked) {\n            useOriginalImageChecked = true;\n            if (null !== uFile.original_url) {\n\n                if (null === originalBlob) {\n\n                    pendingOriginalBlob = true;\n\n\n                    let response = await fetch(uFile.original_url).catch(e => {\n                        addError(\"Server error: \" + e.message);\n                    });\n                    if (true === response.ok) {\n\n                        let blob = await response.blob().catch(e => {\n                            addError(\"Blob error: could not convert the url into a blob (\" + uFile.original_url + \")\");\n                        });\n\n\n                        setTimeout(function () {\n                            originalBlob = blob;\n                            pendingOriginalBlob = false;\n                        }, 1);\n\n\n                    } else {\n                        addError(\"Server error: \" + response.statusText);\n                    }\n                } else {\n                    pendingOriginalBlob = false;\n                    stateCpt++;\n                }\n            }\n        } else {\n            useOriginalImageChecked = false;\n            pendingOriginalBlob = false;\n            stateCpt++;\n        }\n\n    }\n\n    function addError(errMsg) {\n        errors = [...errors, errMsg];\n    }\n\n\n</script>\n\n\n{#if null !== uFile && true === isOpen}\n    <div class=\"overlay\" transition:fade>\n        <MyModal open={isOpen} options={{dragHandle: \".header\"}}>\n            <div class=\"container file-editor-container\" id=\"file-editor-dialog-{cssIdCounter}\">\n\n                <div style=\"display:none\">{stateCpt}</div>\n                <div class=\"header\">\n                    <span class=\"title\">{title}</span>\n                    <span on:click={close} class=\"close-modal-btn far fa-times-circle\"></span>\n                </div>\n\n                <div class=\"body file-editor\">\n\n\n                    <div title=\"File Editor\" class=\"dialog-file-editor\">\n                        <div class=\"file-editor-error-container\">\n                            {#each errors as errMsg}\n                                <div class=\"file-editor-error\">\n                                    <span>{@html errMsg}</span>\n                                    <span on:click={removeError} class=\"btn-close-error\"><i\n                                            class=\"btn-close-error far fa-window-close\"></i></span>\n                                </div>\n                            {/each}\n                        </div>\n\n\n                        <form action=\"\" method=\"post\">\n\n\n                            <div class=\"file-editor-block-1\">\n\n\n                                <div class=\"control-group control-dirname\">\n\n\n                                    {#if true === feo.useDirectory}\n                                        <label for=\"id-fileuploader-dirname-{cssIdCounter}\">Parent dir: </label>\n                                        {#if true === feo.directoryCanBeUpdated}\n                                            <input id=\"id-fileuploader-dirname-{cssIdCounter}\" type=\"text\"\n                                                   name=\"dirname\"\n                                                   value={uFile.directory}\n                                                   class=\"input-dirname\"/>\n                                        {:else}\n                                            <span class=\"element-dirname\">{feo.directory}</span>\n                                        {/if}\n                                    {/if}\n\n                                </div>\n\n\n                                {#if true === feo.usePrivacy}\n                                    <div class=\"control-group control-privacy\">\n                                        <label for=\"id-fileuploader-privacy-{cssIdCounter}\">Is private</label>\n                                        <input id=\"id-fileuploader-privacy-{cssIdCounter}\" type=\"checkbox\"\n                                               name=\"is_private\"\n                                               value=\"1\"\n                                               class=\"input-privacy\"\n                                               checked={jsx.toBool(uFile.is_private)}\n                                        />\n                                    </div>\n                                {/if}\n\n\n                            </div>\n\n\n                            <div class=\"control-group control-filename\">\n\n                                <label for=\"id-fileuploader-filename-{cssIdCounter}\">File name</label>\n\n                                <div class=\"filename-inputs-container\">\n                                    <input id=\"id-fileuploader-filename-{cssIdCounter}\" type=\"text\" name=\"basename\"\n                                           value={jsx.basename(uFile.name, false)}\n                                           class=\"input-basename\"/>\n                                    <input type=\"text\" name=\"extension\" value={jsx.getFileExtension(uFile.name)}\n                                           class=\"input-extension\" disabled={false === feo.fileExtensionCanBeUpdated}/>\n\n                                </div>\n                            </div>\n\n\n                            {#if true === feo.useTags}\n                                <div class=\"control-group control-tags\">\n                                    <label for=\"id-fileuploader-tags-{cssIdCounter}\">Tags</label>\n                                    <select class=\"select-tags\" id=\"id-fileuploader-tags-{cssIdCounter}\" name=\"tags[]\"\n                                            multiple>\n                                        {#each uFile.tags as tag}\n                                            <option value={tag} selected=\"selected\">{tag}</option>\n                                        {/each}\n                                    </select>\n                                </div>\n                            {/if}\n\n\n                            {#if true === feo.useImageEditor && true === isImage}\n                                <div class=\"control-group image-editor-container\">\n                                    <div class=\"image-editor-header\">\n                                        <div>Image Editor</div>\n                                        {#if true === feo.useKeepOriginalImage && null !== uFile.original_url}\n                                            <div class=\"control-original-toggle\">\n                                                <label for=\"id-fileuploader-original-toggle-{cssIdCounter}\">Use original\n                                                    image</label>\n                                                <input id=\"id-fileuploader-original-toggle-{cssIdCounter}\"\n                                                       type=\"checkbox\" value=\"1\"\n                                                       on:change={toggleOriginal}\n                                                       checked={useOriginalImageChecked}\n                                                       class=\"input-original-toggle\"/>\n                                            </div>\n                                        {/if}\n                                    </div>\n\n\n                                    <div class=\"image-editor-body\">\n\n                                        {#if true === uFile.is_loading || true === pendingOriginalBlob}\n                                            <div class=\"left\">\n                                                <div class=\"img-container is-loading\">\n                                                    <div class=\"spinner\">\n                                                        <i class=\"fas fa-cog fa-spin fa-5x\"></i>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        {:else}\n                                            <div class=\"left\">\n\n                                                <div class=\"img-container\">\n                                                    <img\n                                                            class=\"image-original\" src=\"\"\n                                                            alt=\"Canvas for the cropper editor\">\n                                                </div>\n\n\n                                                <div class=\"image-editor-toolbar\">\n                                                    <div class=\"btn-group\">\n                                                        <button type=\"button\" class=\"btn btn-primary\" data-method=\"zoom\"\n                                                                data-option=\"0.1\"\n                                                                title=\"Zoom In\">\n                                                            <span class=\"fa fa-search-plus\"></span>\n                                                        </button>\n                                                        <button type=\"button\" class=\"btn btn-primary\" data-method=\"zoom\"\n                                                                data-option=\"-0.1\"\n                                                                title=\"Zoom Out\">\n                                                            <span class=\"fa fa-search-minus\"></span>\n                                                        </button>\n                                                    </div>\n\n                                                    <div class=\"btn-group\">\n                                                        <button type=\"button\" class=\"btn btn-primary\"\n                                                                data-method=\"rotate\"\n                                                                data-option=\"-45\"\n                                                                title=\"Rotate Left\">\n                                                            <span class=\"fa fa-undo-alt\"></span>\n                                                        </button>\n\n                                                        <button type=\"button\" class=\"btn btn-primary\"\n                                                                data-method=\"rotate\"\n                                                                data-option=\"45\"\n                                                                title=\"Rotate Right\">\n                                                            <span class=\"fa fa-redo-alt\"></span>\n                                                        </button>\n                                                    </div>\n\n                                                    <div class=\"btn-group\">\n                                                        <button type=\"button\" class=\"btn btn-primary\"\n                                                                data-method=\"scaleX\"\n                                                                data-option=\"-1\"\n                                                                title=\"Flip Horizontal\">\n                                                            <span class=\"fa fa-arrows-alt-h\"></span>\n                                                        </button>\n\n                                                        <button type=\"button\" class=\"btn btn-primary\"\n                                                                data-method=\"scaleY\"\n                                                                data-option=\"-1\"\n                                                                title=\"Flip Vertical\">\n                                                            <span class=\"fa fa-arrows-alt-v\"></span>\n                                                        </button>\n                                                    </div>\n\n                                                    <div class=\"btn-group\">\n                                                        <button type=\"button\" class=\"btn btn-primary\"\n                                                                data-method=\"reset\"\n                                                                title=\"Reset\">\n                                                            <span class=\"fa fa-sync-alt\"></span>\n                                                        </button>\n                                                    </div>\n                                                </div>\n                                            </div>\n\n                                            <div class=\"img-preview-container\">\n                                                <div class=\"img-preview preview-lg\"></div>\n                                            </div>\n                                        {/if}\n                                    </div>\n\n\n                                </div>\n                            {/if}\n                        </form>\n\n\n                        <div class=\"buttons-bar\">\n\n\n                            {#if\n                            true === uFile.is_loading &&\n                            false === (true === feo.useImageEditor && true === isImage)\n                            }\n                                <div class=\"spinner\">\n                                    <i class=\"fas fa-circle-notch fa-spin fa-2x\"></i>\n                                </div>\n                            {/if}\n                            <div class=\"progress-bar\" class:show={uFile.progress > 0 && uFile.progress < 100}>\n                                Uploading... {uFile.progress}%\n                            </div>\n                            <button on:click|preventDefault={close} class={styleBtnCancel}>Cancel</button>\n                            <button on:click|preventDefault={onUpdateBtnClicked} class={styleBtnUpdate}>Update</button>\n                        </div>\n\n                    </div>\n\n\n                </div>\n            </div>\n        </MyModal>\n    </div>\n{/if}\n\n\n<style type=\"text/sass\" lang=\"scss\">\n\n\n    $errorColor: #cd0a0a;\n\n\n    :global(.file-editor-container.dropzone-hover) {\n        background-color: #f3f7ff !important;\n    }\n\n\n    .overlay {\n        position: fixed;\n        top: 0;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        background: rgba(0, 0, 0, 0.2);\n        z-index: 1000000000; // move over the text items\n    }\n\n    .container {\n        min-width: 60%;\n        width: 60%;\n        margin: 0 auto;\n        margin-top: 10px;\n        padding: 10px;\n        border: 1px solid #fafafa;\n        background-color: white;\n\n\n        .header {\n            background: #ddd;\n            cursor: move;\n            padding: 6px;\n            display: flex;\n\n            .close-modal-btn {\n                cursor: pointer;\n                margin-left: auto;\n            }\n        }\n\n\n        .file-editor {\n\n\n            .file-editor-error-container {\n\n                .file-editor-error {\n\n                    color: white;\n                    padding: 10px;\n                    border: 1px solid $errorColor;\n                    background: $errorColor;\n                    margin-bottom: 2px;\n\n                    position: relative;\n\n                    .btn-close-error {\n\n                        position: absolute;\n                        top: 3px;\n                        right: 4px;\n\n                        cursor: pointer;\n\n                    }\n\n                }\n\n            }\n\n            .file-editor-block-1 {\n\n                display: flex;\n\n\n                .control-privacy {\n\n                    margin-left: auto;\n\n                }\n\n            }\n\n\n            .control-group {\n\n                margin-bottom: 0px;\n                border-bottom: 1px solid #fdfdfd;\n                padding-bottom: 10px;\n                padding-top: 10px;\n\n\n                &.control-basename, &.control-tags {\n\n                    display: flex;\n\n                    align-items: baseline;\n\n                    label {\n                        margin-right: 5px;\n\n                        white-space: nowrap;\n\n                    }\n\n                }\n\n                &.control-tags {\n\n                    align-items: flex-end;\n\n                }\n\n\n                &.control-dirname {\n\n                    display: flex;\n                    flex: 1;\n\n                    align-items: baseline;\n\n                    .input-dirname {\n                        flex: 1;\n                        margin-right: 10px;\n\n                    }\n\n                    .element-dirname {\n                        background: #ececec;\n                        padding: 5px;\n\n                    }\n\n                }\n\n\n                .filename-inputs-container {\n\n                    display: flex;\n                    width: 100%;\n\n                    box-sizing: border-box;\n\n                    .input-basename, .input-filename {\n                        flex: 1;\n                        margin-top: 7px;\n\n                    }\n\n\n                    .input-extension {\n                        width: 50px;\n                        margin-top: 7px;\n\n                    }\n\n                }\n\n\n                &.control-tags {\n\n                    label {\n\n                        display: block;\n                        margin-bottom: 10px;\n\n                    }\n\n                    .select-tags {\n\n                        display: block;\n                        width: 100%;\n\n                    }\n\n                }\n\n            }\n\n\n            //.img-container {\n            //  /* Never limit the container height here */\n            //  max-width: 100%;\n            //}\n            //\n            //.img-container img {\n            //  /* This is important */\n            //  width: 100%;\n            //}\n\n\n            .image-editor-container {\n                margin-top: 10px;\n                padding-top: 0px;\n                padding-bottom: 0px;\n\n            }\n\n            .image-editor-header {\n                display: flex;\n\n                .control-original-toggle {\n                    margin-left: auto;\n                }\n            }\n\n            .image-editor-body {\n                display: flex;\n\n                .left {\n                    flex: 1;\n                }\n            }\n\n            .img-container {\n                margin-top: 10px;\n                margin-bottom: 0px;\n                max-height: 497px;\n                min-height: 200px;\n\n                & > img {\n                    max-width: 100%;\n                    max-height: 290px;\n\n                }\n\n                &.is-loading {\n                    display: flex;\n                    justify-content: center;\n                    align-items: center;\n\n                    i {\n                        color: #a9bcea;\n                    }\n\n                }\n\n            }\n\n            @media (min-width: 768px) {\n\n                .img-container {\n                    min-height: 300px;\n\n                }\n            }\n\n\n            .image-editor-toolbar {\n\n                display: flex;\n\n                flex-wrap: wrap;\n                background: #d9d9d9;\n                padding: 10px;\n\n                justify-content: flex-start;\n\n\n                button {\n                    padding: 6px 4px 4px 4px;\n                    border-radius: 7px;\n                    border-color: #ececec;\n\n                }\n\n            }\n\n\n            .img-preview-container {\n                margin-top: 10px;\n                width: 100px;\n                display: flex;\n\n                justify-content: center;\n\n                .img-preview {\n\n                    float: left;\n                    margin-bottom: .5rem;\n                    margin-right: .5rem;\n                    border: 1px solid #ccc;\n\n                    overflow: hidden;\n\n                    &.preview-lg {\n                        height: 9rem;\n                        width: 16rem;\n\n                    }\n\n                    & > img {\n                        max-width: 100%;\n\n                    }\n\n                }\n\n            }\n\n\n            @media (min-width: 768px) {\n\n                .img-preview-container {\n                    width: 250px;\n\n                }\n            }\n\n\n            .buttons-bar {\n                text-align: right;\n                padding: 20px;\n                display: flex;\n                justify-content: flex-end;\n                align-items: center;\n\n                button {\n                    padding: 10px;\n                    font-size: 1.5em;\n                    cursor: pointer;\n                }\n\n\n                .btn-cancel {\n                    background: #f4dada;\n                }\n\n                .btn-update {\n                    background: #8bf27c;\n                }\n\n                .spinner {\n                    margin-right: 10px;\n\n                    i {\n                        color: #8e8e8e;\n                    }\n                }\n\n                .progress-bar {\n                    display: none;\n                    font-size: 1.4em;\n                    color: #b30f0f;\n                    margin-right: 30px;\n                    padding: 20px;\n                    position: static;\n                    overflow: hidden;\n                    animation: loadingShimmer 2s linear;\n                    animation-iteration-count: infinite;\n                    background-color: #fff;\n                    background-image: linear-gradient(to right, rgba(0, 0, 0, 0.03) 0, rgba(0, 0, 0, 0.1) 50%, rgba(0, 0, 0, 0.03) 60%) !important;\n                    background-size: 1200px 100% !important;\n\n                    &.show {\n                        display: block;\n                    }\n                }\n\n\n                @keyframes loadingShimmer {\n                    0% {\n                        background-position: -1200px 0\n                    }\n                    100% {\n                        background-position: 1200px 0\n                    }\n                }\n\n            }\n\n\n            .the-submit-button {\n                background: #0064ff;\n\n                color: white;\n\n            }\n\n            .fileeditor-uploader-progress {\n\n                display: none;\n\n                background: transparent;\n                color: #333;\n\n                border: none;\n                cursor: default !important;\n\n                &:active {\n\n                    background: transparent;\n                    color: #333;\n\n                }\n\n            }\n\n        }\n    }\n\n</style>","<script>\n\n\n    import {onMount, setContext} from 'svelte';\n    import jsx from 'js-extension-ling';\n    /**\n     * I don't know why the commented line below is removed when I compile,\n     * maybe it's rollup or a plugin that removes it?\n     * Anyway, make sure you have this line un-commented in order for this plugin to work.\n     */\n    // import { fade } from 'svelte/transition';\n\n    import { fade } from 'svelte/transition';\n    import panda from \"panda-headers\";\n    import Validator from \"./modules/Validator\";\n    import GlobalProgressTracker from './modules/GlobalProgressTracker';\n    import Translatee from \"translatee\";\n    import DropZoneHandler from \"js-dropzone-handler\";\n    import ChunkUploader from \"chunk-uploader\";\n    import dragula from \"dragula\";\n    import FileEditor from \"./components/DefaultFileEditor.svelte\";\n\n\n    //----------------------------------------\n    // EXPORT OPTIONS\n    //----------------------------------------\n    export let options = {};\n\n    //----------------------------------------\n    // SCRIPT VARIABLES\n    //----------------------------------------\n    options = jsx.extend(true, {\n        /**\n         * bool=false.\n         * If true, this will add some bootstrap markup, mainly for buttons (things like btn btn-primary).\n         * Note: you will still an external style sheet of yours to customize further, this is just to lay down the\n         * basic html markup which is the first step to the bootstrapization of this widget.\n         *\n         */\n        useBootstrap: false,\n        /**\n         * string=eng.\n         *\n         * The language used in the gui.\n         *\n         * Possible values are:\n         * - eng\n         * - fra\n         *\n         * To add your own, start with a copy/paste and adapt of the **lang/lang-fra.js** file.\n         *\n         *\n         */\n        lang: \"eng\",\n        /**\n         * int=1.\n         * The maximum number of files that this widget will handle.\n         * If the value is -1, then it can handle any number of files.\n         *\n         * If the value is 1, the widget will create an input (html element) that results in a scalar when the form is posted.\n         * If the value is more than 1, the widget creates inputs of that results in an array when the form is posted.\n         *\n         */\n        maxFile: 1,\n        /**\n         * string=dropzone-hover.\n         * The css class added to the dropzone when the user's mouse is over the dropzone of the widget while he's dragging\n         * a file from his OS.\n         */\n        dropzoneOverClass: \"dropzone-hover\",\n        /**\n         * array of strings=[].\n         * An array of the urls to initialize the widget with.\n         * Those urls will be loaded in the widget at startup.\n         *\n         */\n        urls: [],\n        /**\n         * string=the_file.\n         * The name attribute of the input html element(s) generated by this widget.\n         */\n        name: \"the_file\",\n        /**\n         * int=-1.\n         * The maximum file size allowed for uploaded files.\n         * You can specify human like values, such as 1.6k, 1.3M, etc...\n         * The [converthumansizetobytes function](https://github.com/lingtalfi/js-extension-ling#converthumansizetobytes) is used under the hood.\n         *\n         * If -1, then any size is allowed.\n         */\n        maxFileSize: -1,\n        /**\n         * int=64.\n         * The maximum length allowed for the filename of the uploaded files.\n         */\n        maxFileNameLength: 64,\n        /**\n         * array|string=null.\n         *\n         * The list of allowed file mime types for uploaded files.\n         * null means every mime type is allowed.\n         */\n        mimeType: null,\n        /**\n         * array|string=null.\n         *\n         * The list of allowed file extensions for uploaded files.\n         * null means every extension is allowed.\n         */\n        allowedFileExtension: null,\n        /**\n         * string=file.\n         * The name of the uploaded file when sent to the server (via post).\n         */\n        uploadItemName: \"file\",\n        /**\n         * callback=the callback below.\n         * When there is a problem with the server's response, this callback is called.\n         * Note, it's called in addition to the default error handling system of this widget (i.e. it doesn't override\n         * the widget's default behaviour).\n         */\n        onServerError: function (errorMessage) {\n            console.log(errorMessage);\n        },\n        /**\n         * callback=the callback below.\n         *\n         *\n         * This callback returns whether the given url is external or internal.\n         *\n         * External means it's not recognized by the server (i.e. the server can't identify a file from that url).\n         * Internal means it's recognized by the server.\n         *\n         * The behaviour of the server when an external urls is given depends on the server.\n         * Some server will reject the request, some others will create a new internal url and return it to the client\n         * so that the file can be handled correctly on the subsequent requests.\n         *\n         * Client side (this script), we have our own problems to solve.\n         * The problem that we have which requires this callback occurs in the following situation:\n         *\n         *\n         * update\n         * ----------\n         *\n         * When the page starts, and an external url is given, the file item is displayed normally,\n         * then when the user edits the file by opening the file editor dialog, when he clicks the update button,\n         * that's where the problem begin, because our script sends the binary file only if the file has been modified\n         * (image cropped, or new file dropped on the file editor dialog).\n         * However if the user just changes the name of the file and click the update button, then our script\n         * by default won't send the binary file, and so the server will be missing this information.\n         *\n         * In order for our script to send the binary file while preserving our optimized system,\n         * we use this callback, which returns whether the given url is external or internal.\n         *\n         *\n         * Note: you could make this work all the time by making this callback return true all the time,\n         * but then the binary file would be sent on every update, that would defeat the purpose of our optimization.\n         *\n         * If you don't use external urls at all, then you don't need to worry about this callback at all.\n         * If your application potentially uses external urls and you want your server to handle them (assuming it can),\n         * then we recommend that you set this callback accordingly.\n         *\n         * By default, we return false, which means that there will be some potential problem if you try to send\n         * an external url. But the intent of this choice is that you become aware of this problem and fix it to benefit\n         * the optimized version of our script.\n         *\n         * If you're lazy and don't care of perfs, return true (not recommended).\n         *\n         *\n         * Also, note that usually, if the server handles external urls, it will return an internal url,\n         * so the isExternalUrl callback is just used the on the first update of an external url.\n         *\n         *\n         *\n         * delete\n         * ----------\n         * Also, the externalUrl is used with the delete action.\n         * Since the server won't be able an external url, when we delete an external url's file, we simply\n         * don't ask the confirmation from the server.\n         *\n         *\n         */\n        isExternalUrl: function (url) {\n            return false;\n        },\n        /**\n         * string=/upload.php\n         * The url of the server.\n         */\n        serverUrl: \"/upload.php\",\n        /**\n         * map={}.\n         * A map of extra parameters to pass (via post) with the server requests.\n         */\n        payload: {},\n        /**\n         * bool=false.\n         * If true, the \"upload files\" button won't show up, and the files are automatically uploaded\n         * as soon as the users adds them (either using the \"add file\" button, or by dropping them into the dropzone).\n         */\n        immediateUpload: false,\n        /**\n         * bool=false.\n         * Whether to communicate with a virtual server like this one: https://github.com/lingtalfi/Light_UserData/blob/master/doc/pages/conception-notes.md\n         * If true, the reset action of the [file manager protocol](https://github.com/lingtalfi/TheBar/blob/master/discussions/file-manager-protocol.md)\n         * will be sent when the widget is first initialized, or when the wrapping form (if any) is reset.\n         *\n         * Also, when the wrapping form is submitted, this widget will trigger the \"commit\" action\n         * on the server.\n         *\n         * Also, when accessing a file by its url, we add the v=1 flag, as recommended by the file manager protocol.\n         *\n         */\n        useVirtualServer: false,\n\n        /**\n         * bool=false.\n         * Whether to show the delete button on uploaded files.\n         */\n        useDelete: false,\n\n\n        /**\n         * bool=false.\n         * Whether to use the keepOriginalUrl system of the [file manager protocol](https://github.com/lingtalfi/TheBar/blob/master/discussions/file-manager-protocol.md).\n         * If true, when the file is uploaded, this widget also sends the keep_original flag to the server.\n         * Also, it displays and handles the behaviour of a show original toggle button, so that the user can revert back to the original image if necessary.\n         * Note: every time the user uploads a new file, the keep_original flag is resent to the server (so that the original image is the last image\n         * uploaded by the user).\n         */\n        useKeepOriginalImage: false,\n\n        /**\n         * bool=false.\n         * Whether to show the open file editor dialog button.\n         */\n        useFileEditor: false,\n        /**\n         * map={}.\n         * The options for the file editor.\n         */\n        fileEditor: {\n\n            //----------------------------------------\n            // file\n            //----------------------------------------\n            /**\n             * bool=false.\n             * Whether the user can update the file extension.\n             */\n            fileExtensionCanBeUpdated: false,\n\n\n            //----------------------------------------\n            // directory\n            //----------------------------------------\n            /**\n             * bool=false.\n             * Whether to show the directory control.\n             */\n            useDirectory: false,\n\n            /**\n             * string=\"\".\n             * The default value of the directory control.\n             */\n            directory: \"\",\n            /**\n             *\n             * bool=true.\n             * Whether the directory can be updated.\n             * It's generally a good idea to let the directory not fixed to a certain value,\n             * as to sync the server with the gui,\n             * as the server might change the directory defined by the user.\n             */\n            directoryCanBeUpdated: true,\n\n            //----------------------------------------\n            // visibility\n            //----------------------------------------\n            /**\n             * bool=false.\n             * Whether to show the visibility checkbox (private/public).\n             */\n            usePrivacy: false,\n\n            //----------------------------------------\n            // tags\n            //----------------------------------------\n            /**\n             * bool=false.\n             * Whether to show the tags control.\n             */\n            useTags: false,\n\n            /**\n             * bool=true.\n             * Whether the user is allowed to create new tags.\n             */\n            allowCustomTags: true,\n            /**\n             * array=[].\n             *\n             * The array of tag names the user can choose from.\n             *\n             * Note: if allowCustomTags is true, the user can create his own tags,\n             * otherwise his choice must be one of the available tags.\n             *\n             */\n            availableTags: [],\n            /**\n             * int=5.\n             * The number of tags the user can select/create.\n             * This cannot be infinite.\n             */\n            nbTagsAllowed: 5,\n\n            /**\n             * bool=false.\n             * Whether to show the image editor (if the file is an image).\n             */\n            useImageEditor: false,\n        },\n\n\n    }, options);\n\n    let uFileCounter = 1;\n    let testPartialSize = 0;\n    let inputName = options.name;\n    let isMultipleInput = false;\n    if (options.maxFile > 1) {\n        inputName += '[]';\n        isMultipleInput = true;\n    }\n\n    let hiddenAddFileBtn;\n    let elDropZone;\n    let elTextItemsContainer;\n    let elImageItemsContainer;\n\n\n    if (false === jsx.arrayKeyExists(options.lang, FileUploader._langs)) {\n        throw new Error(\"Lang not available: \" + options.lang);\n    }\n\n    let dictionary = FileUploader._langs[options.lang];\n\n    let translator = new Translatee();\n    translator.setDefaultLang(options.lang);\n    translator.addDictionary(options.lang, dictionary);\n    let validator = new Validator();\n    validator.setTranslator(translator);\n    validator.init(options);\n    let globalProgressTracker = new GlobalProgressTracker();\n    let chunkUploader = null;\n\n\n    //----------------------------------------\n    // HTML THEME\n    //----------------------------------------\n    let styleBtnAddFile = 'btn-add-file';\n    let styleBtnStartUpload = 'btn-start-upload';\n    let styleBtnViewText = 'btn-view-text';\n    let styleBtnViewImage = 'btn-view-image';\n    if (true === options.useBootstrap) {\n        styleBtnAddFile += ' btn btn-outline-dark btn-sm';\n        styleBtnStartUpload += ' btn btn-outline-dark btn-sm';\n        styleBtnViewText += ' btn btn-info btn-sm';\n        styleBtnViewImage += ' btn btn-info btn-sm';\n    }\n\n\n    //----------------------------------------\n    // STATE\n    //----------------------------------------\n    /**\n     * each uFile:\n     *\n     * - id: string, the file id\n     * - url: string=null, the file url. Note: if a file is dragged or selected via input, it doesn't have url yet.\n     *\n     * - directory: false|string.\n     *      The default value depends on the configuration of this component (see the doc for more info).\n     *      the base directory used for this file. This is used by some protocols.\n     *      false means that the directory is not used at all (the user can't define one).\n     *\n     *\n     * - name: string, the relative file path, from the base directory.\n     *\n     * - status: int=0\n     *      The status of the file. Can be one of:\n     *      - 0: initialized at startup (when the page refreshed), but the meta/blob are not ready (they need to be fetched from the server)\n     *      - 1: same as 0, but the meta/blob are ready\n     *      - 2: added by the user but not uploaded yet (url=null)\n     *      - 3: added by the user and uploaded\n     *\n     *\n     * - file: the js File object. This is not available with status=0.\n     * - is_private: bool=false, whether the file is private or public\n     * - is_user_data: bool=false\n     *      experimental flag...\n     *\n     * - progress: the current percentage of the file loaded (for progress bar live display)\n     * - tags: array of tags associated with this file\n     * - keep_original: 0|1=0.\n     *      A flag to indicate to the server whether to keep this file as an original source (to recall later).\n     *      See more info in the properties description of this widget.\n     *\n     * - is_loading: bool=false.\n     *      If true, a loader shall appear in the file item to indicate that an ajax action is pending in the background.\n     *\n     *\n     */\n    let uFiles = [];\n    let editedUFile = null;\n    let viewMode = 'image';\n    let fileEditorIsOpen = false;\n    let globalPercent = 0;\n    let abortBtnVisible = false;\n    let userErrors = [];\n    let fileEditorErrors = [];\n    let urls = options.urls;\n\n    // global percent text transition vars\n    let aIsVisible = true;\n    let bIsVisible = false;\n\n    $: totalSize = getTotalSize(uFiles);\n    $: nbQueuedFiles = getNbQueuedFiles(uFiles);\n    $: startUploadBtnEnabled = (false === options.immediateUpload && nbQueuedFiles > 0);\n\n\n    //----------------------------------------\n    // LIFE CYCLE\n    //----------------------------------------\n    onMount(async () => {\n\n\n        //----------------------------------------\n        // DROPZONE\n        //----------------------------------------\n        let dropZoneHandler = new DropZoneHandler({\n            container: elDropZone,\n            cssClass: options.dropzoneOverClass,\n            onDrop: (files) => {\n                addUserFiles(files);\n            },\n        });\n        dropZoneHandler.start();\n\n\n        //----------------------------------------\n        // DRAGULA\n        //----------------------------------------\n        let drakeImg = dragula([elImageItemsContainer]);\n        let drakeText = dragula([elTextItemsContainer]);\n        drakeImg.on('drop', () => {\n            let ids = getCurrentOrder(elImageItemsContainer);\n            updateUFileOrder(ids);\n        });\n\n\n        drakeText.on('drop', () => {\n            let ids = getCurrentOrder(elTextItemsContainer);\n            updateUFileOrder(ids);\n        });\n\n\n        //----------------------------------------\n        // VIRTUAL FILE SYSTEM\n        //----------------------------------------\n        if (true === options.useVirtualServer) {\n            await reset();\n\n            let dForm = elDropZone.closest('form');\n            if (null !== dForm) {\n                dForm.addEventListener('reset', async () => {\n                    await reset();\n                });\n            }\n\n\n        } else {\n            resetUrls();\n        }\n\n    });\n\n    //----------------------------------------\n    // CONTEXT\n    //----------------------------------------\n    setContext(\"fileUploader\", {\n        onCloseFileEditorBtnClicked: closeFileEditor,\n        onFileEditorFileDropped: updateUFileBinaryData,\n        onFileEditorUpdated: updateUFileByFileEditor,\n        fileEditorOptions: Object.assign(options.fileEditor, {\n            dropzoneOverClass: options.dropzoneOverClass,\n            useKeepOriginalImage: options.useKeepOriginalImage,\n            useBootstrap: options.useBootstrap,\n        }),\n    });\n\n    //----------------------------------------\n    // FUNCTIONS\n    //----------------------------------------\n    function changeViewMode(mode) {\n        viewMode = mode;\n    }\n\n\n    /**\n     * Returns an uFile from the given js File.\n     *\n     * At its minimum, the uFile has the following properties:\n     * - id\n     * - url\n     * - status\n     * - directory\n     * - name\n     *\n     */\n    function createUFile(oFile, _options) {\n\n        // null means do not display it at all\n        let feo = options.fileEditor;\n        let directory = '';\n\n\n        if ('tags' in options) {\n            while (options.tags.length > feo.nbTagsAllowed) {\n                options.tags.pop();\n            }\n        }\n\n\n        return jsx.extend({\n            id: getNewFileId(),\n            url: null,\n            name: oFile.name,\n            directory: feo.directory,\n            file: oFile,\n            status: 0,\n            size: oFile.size,\n            type: oFile.type,\n            progress: 0,\n            is_private: false,\n            is_user_data: false,\n            tags: [],\n            keep_original: jsx.toInt(options.useKeepOriginalImage),\n            is_loading: false,\n        }, _options);\n    }\n\n    function getNewFileId() {\n        return 'id' + uFileCounter++;\n    }\n\n    function addUFile(uFile) {\n        uFiles = [...uFiles, uFile];\n    }\n\n    function updateUFile(uFile) {\n        for (let i in uFiles) {\n            let curUFile = uFiles[i];\n            if (uFile.id === curUFile.id) {\n                uFiles[i] = uFile;\n                break;\n            }\n        }\n    }\n\n\n    function updateUFileBinaryData(uFile, oFile) {\n\n\n        let res = validator.test(oFile);\n        if (true === res) {\n            uFile.file = oFile;\n            uFile.size = oFile.size;\n            uFile.type = oFile.type;\n            uFile.name = oFile.name;\n            uFile.status = 2;\n\n            uFile.keep_original = jsx.toInt(options.useKeepOriginalImage);\n\n            // special internal flag\n            uFile.__preserveOriginalUrl = true;\n\n\n            editedUFile = uFile;\n            updateUFile(uFile);\n\n\n            if (true === options.immediateUpload) {\n                setTimeout(async function () {\n\n\n                    try {\n\n                        await uploadQueuedFiles({\n                            action: \"update\",\n                            url: uFile.url,\n                            original_url: uFile.original_url,\n                        });\n\n                    } catch (e) {\n                        /**\n                         * It was annoying me, while debugging, when there was an upload error to be stuck on the loading gif image (because\n                         * then the gui underneath disappear).\n                         * So setting is_loading to false makes the loading gif image disappear, and allows me to continue uploading files,\n                         * even if an error occurred.\n                         **/\n                        uFile.is_loading = false;\n                        updateUFile(uFile);\n                    }\n\n\n                    let updatedEditedFile = _getUFileById(editedUFile.id);\n                    editedUFile = updatedEditedFile;\n\n                }, 1);\n            }\n\n        } else {\n            addFileEditorError(res);\n        }\n    }\n\n\n    async function updateUFileByFileEditor(uFile, postedData, flags) {\n\n\n        let {cropped, dropped, original} = flags;\n\n        uFile.is_loading = true;\n        editedUFile = uFile;\n\n        let fileHasChanged = (true === cropped || true === dropped || true === original);\n        uFile.keep_original = jsx.toInt((true === dropped && false === original && false === cropped));\n\n        let isExternalUrl = options.isExternalUrl(uFile.url);\n\n\n        uFile = jsx.extend(uFile, postedData);\n\n        let newUFile;\n        if (true === isExternalUrl || true === fileHasChanged) {\n            abortBtnVisible = true;\n            newUFile = await uploadFile(uFile, {\n                action: \"update\",\n                url: uFile.url,\n            }, {\n                singleFile: true,\n            });\n            abortBtnVisible = false;\n            refreshGlobalPercentText();\n        } else {\n\n            var data = jsx.extend({}, options.payload, {\n                action: 'update',\n                url: uFile.url,\n                filename: uFile.name,\n                directory: uFile.directory,\n                tags: uFile.tags,\n                is_private: jsx.toInt(uFile.is_private),\n            });\n\n            let jsonResponse = await callService(data);\n\n            newUFile = await handleAddUpdateResponse(uFile, jsonResponse);\n\n            /**\n             * Preserving the old data since we didn't send the file (to save cpu work)\n             */\n            newUFile.file = uFile.file;\n            newUFile.original_url = uFile.original_url;\n            newUFile.type = uFile.type;\n            newUFile.size = uFile.size;\n\n        }\n\n\n        if (false !== newUFile) {\n            newUFile.is_loading = false;\n            updateUFile(newUFile);\n        }\n    }\n\n\n    async function removeUFile(id, serverCheck = true) {\n        for (let i in uFiles) {\n            let uFile = uFiles[i];\n            if (id === uFile.id) {\n\n                if (\n                    true === serverCheck &&\n                    false === options.isExternalUrl(uFile.url)\n                ) {\n\n                    uFile.is_loading = true;\n                    uFiles = uFiles;\n\n\n                    let response = await callService({\n                        \"action\": \"delete\",\n                        \"url\": uFile.url,\n                    });\n                    uFile.is_loading = false;\n                    if (true === checkAcpResponse(response)) {\n                        jsx.removeEntryByIndex(uFiles, i);\n                        uFiles = uFiles;\n                        break;\n                    }\n                } else {\n                    jsx.removeEntryByIndex(uFiles, i);\n                    uFiles = uFiles;\n                    break;\n                }\n\n            }\n        }\n    }\n\n\n    /**\n     * Used at startup, to initialize the widget with some default urls.\n     */\n    function loadUrl(url) {\n\n\n        let originalUrl = url;\n        let fileName = url.split(\"/\").pop();\n        let fileId = getNewFileId();\n        let uFile = {\n            id: fileId,\n            status: 0,\n            url: url,\n            name: fileName,\n        };\n        addUFile(uFile);\n\n        if (true === options.useFileEditor) {\n            url = jsx.url_merge_params(url, {\n                \"m\": 1\n            });\n        }\n\n\n        fetch(url).then(response => {\n            if (response.ok) {\n                response.blob().then(blob => {\n\n                    /**\n                     * create the uFile\n                     */\n                    let file = blobToFile(blob, fileName);\n\n\n                    let moreHeaders = {};\n                    if (true === options.useFileEditor) {\n                        moreHeaders = panda.getPandaHeaders(response.headers);\n                    }\n\n                    let updatedUFile = createUFile(file, jsx.extend(moreHeaders, {\n                        status: 1,\n                        url: originalUrl,\n                        id: uFile.id\n                    }));\n                    updateUFile(updatedUFile);\n                });\n\n            } else {\n                addServerError(`An error occurred with the request for url ${url}. ` + response.status + ': ' + response.statusText);\n            }\n        });\n\n    }\n\n    function blobToFile(blob, name) {\n        // https://stackoverflow.com/questions/27159179/how-to-convert-blob-to-file-in-javascript\n        blob.lastModifiedDate = new Date();\n        blob.name = name;\n        return blob;\n    }\n\n\n    function getTotalSize(_uFiles) {\n        let total = 0;\n        _uFiles.forEach(uFile => {\n            if (uFile.size) {\n                total += uFile.size;\n            }\n        })\n        return total;\n    }\n\n\n    function getNbQueuedFiles(_uFiles) {\n        let total = 0;\n        _uFiles.forEach(uFile => {\n            if (2 === uFile.status) {\n                total++;\n            }\n        })\n        return total;\n    }\n\n\n    async function addUserFiles(files) {\n        hiddenAddFileBtn.disabled = true;\n\n\n        var numFiles = files.length;\n        for (let i = 0; i < numFiles; i++) {\n\n            let oFile = files[i];\n\n\n            let res = validator.test(oFile);\n            if (true === res) {\n                let uFile = createUFile(oFile, {\n                    status: 2,\n                });\n                addUFile(uFile);\n                await applyFileRotation();\n            } else {\n                addUserError(res);\n            }\n        }\n\n        if (true === options.immediateUpload) {\n            setTimeout(function () {\n                uploadQueuedFiles();\n            }, 1);\n        }\n\n\n    }\n\n    async function applyFileRotation() {\n        if (-1 !== options.maxFile && uFiles.length > options.maxFile) {\n            let nbFilesToRemove = uFiles.length - options.maxFile;\n            while (nbFilesToRemove > 0) {\n                nbFilesToRemove--;\n                let uFile = uFiles[0];\n                await removeUFile(uFile.id);\n            }\n        }\n\n    }\n\n    function onAddFileButtonClicked() {\n        hiddenAddFileBtn.disabled = false;\n        hiddenAddFileBtn.click();\n    }\n\n\n    function addUserError(err) {\n        if (true === fileEditorIsOpen) {\n            addFileEditorError(err);\n        } else {\n            userErrors = [...userErrors, err];\n        }\n    }\n\n    function addFileEditorError(err) {\n        fileEditorErrors = [...fileEditorErrors, err];\n    }\n\n    function removeErrorItem(e) {\n        let el = e.target.closest(\".error-item\");\n        if (null !== el) {\n            el.remove();\n        }\n    }\n\n\n    function getCurrentOrder(container, key = 'id') {\n        let ret = [];\n        let children = container.children;\n        for (let child of children) {\n            let attrName = \"data-\" + key;\n\n            let id = child.getAttribute(attrName);\n            if (id) {\n                ret.push(id);\n            } else {\n                throw new Error(\"No element found with attribute \" + attrName + \". This is a setup error, please fix it now.\");\n            }\n        }\n\n        return ret;\n    }\n\n    function updateUFileOrder(ids) {\n        let newUFiles = [];\n        let tmpUFiles = {};\n        uFiles.forEach(uFile => {\n            tmpUFiles[uFile.id] = uFile;\n        });\n        ids.forEach(id => {\n            newUFiles.push(tmpUFiles[id]);\n        });\n        uFiles = newUFiles;\n    }\n\n    /**\n     * Returns the [acp](https://github.com/lingtalfi/AjaxCommunicationProtocol) json response from the server.\n     *\n     */\n    async function callService(payload, returnOriginalResponse = false) {\n\n        payload = jsx.extend({}, options.payload, payload);\n\n        var response = await jsx.post(options.serverUrl, payload).catch(reason => {\n            var errMsg = \"An error occurred with the request: \" + reason;\n            addServerError(errMsg);\n        });\n        if (true === response.ok) {\n            if (true === returnOriginalResponse) {\n                return response;\n            }\n            return await response.json().catch((e) => {\n                addUserError(e.toString());\n            });\n        } else {\n            addServerError(\"The server status code was \" + response.status);\n        }\n    }\n\n    async function reset() {\n\n\n        var response = await callService({\n            \"action\": \"reset\",\n        });\n\n        if (true === checkAcpResponse(response)) {\n            resetUrls();\n            return true;\n        }\n        return false;\n    }\n\n\n    function checkAcpResponse(response) {\n        if (true === isSuccessfulResponse(response)) {\n            return true;\n        } else {\n            addServerError(response.error);\n            return false;\n        }\n    }\n\n    function isSuccessfulResponse(jsonResponse) {\n        if (jsx.isPlainObject(jsonResponse) && \"type\" in jsonResponse) {\n            if ('success' === jsonResponse.type) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n\n    function addServerError(err) {\n        addUserError(err);\n    }\n\n    function abort() {\n        if (null !== chunkUploader) {\n            chunkUploader.abort();\n            refreshGlobalPercentText();\n        }\n    }\n\n    function resetUrls() {\n        uFiles = [];\n        let x = options.maxFile;\n        urls.forEach(url => {\n            if (x > 0) {\n                loadUrl(url);\n                x--;\n            }\n        });\n    }\n\n    async function uploadQueuedFiles(params = {}) {\n\n        if (nbQueuedFiles > 0) {\n\n            abortBtnVisible = true;\n\n            globalProgressTracker.registerItems(uFiles);\n\n            for (let [i, uFile] of uFiles.entries()) {\n\n                let fileId = uFile.id;\n                if (2 === uFile.status) {\n\n\n                    uFile.is_loading = true;\n                    uFiles = uFiles;\n\n                    /**\n                     * Note that the process will not go beyond this line if the user\n                     * aborts the chunk upload.\n                     */\n                    let newUFile = await uploadFile(uFile, params);\n\n\n                    if (false !== newUFile) {\n\n                        newUFile.is_loading = false;\n                        // update the file\n                        uFiles[i] = newUFile;\n\n                    } else {\n                        removeUFile(fileId, false);\n                    }\n                }\n            }\n\n            abortBtnVisible = false;\n            refreshGlobalPercentText();\n\n\n        }\n\n    }\n\n\n    /**\n     * Returns a promise that resolves to either:\n     *\n     * - uFile: the uFile corresponding to the successfully uploaded file, based on the given uFile\n     * - false (bool): in case of error\n     *\n     */\n    async function uploadFile(uFile, params = {}, _options = {}) {\n\n        let useChunks = true;\n        let jsonResponse = null;\n\n        let singleFile = _options['singleFile'] || false;\n\n\n        var data = jsx.extend({}, options.payload, {\n            action: 'add',\n            filename: uFile.name,\n            directory: uFile.directory,\n            tags: uFile.tags,\n            is_private: jsx.toInt(uFile.is_private),\n            keep_original: jsx.toInt(uFile.keep_original),\n        }, params);\n\n\n        // make sure you don't keep original for non images.\n        if (false === jsx.mimeIsImage(uFile.type)) {\n            data.keep_original = 0;\n        }\n\n\n        //----------------------------------------\n        // USING CHUNKS (always a better idea)\n        //----------------------------------------\n        if (true === useChunks) {\n            data.useChunks = 1;\n\n            chunkUploader = new ChunkUploader({\n                serverUrl: options.serverUrl,\n                // chunkSize: 5 * 1024 * 1024,\n                onChunkAborted: (start, end, isLastChunk) => {\n                    abortUpload(uFile);\n                },\n                onChunkLoaded: (start, end, size, isLastChunk) => {\n                    let percent = Math.round(end / size * 100, 2);\n                    let id = uFile.id;\n                    if (false === singleFile) {\n                        globalProgressTracker.addProgress(id, percent);\n                        globalPercent = globalProgressTracker.getPercent().toFixed(2);\n                    } else {\n                        globalPercent = percent;\n                    }\n                    updateUFileProgress(id, percent);\n                },\n                onChunkResponseReceived: async function (response) {\n                    try {\n                        jsonResponse = await response.json();\n                        if (true === isSuccessfulResponse(jsonResponse)) {\n                            return true;\n                        } else {\n                            return jsonResponse.error;\n                        }\n                    } catch (e) {\n                        return e.toString();\n                    }\n                }\n            });\n\n            try {\n\n                let response = await chunkUploader.sendByChunks(uFile.file, data, {\n                    start: testPartialSize,\n                });\n                jsonResponse = await response.json();\n\n            } catch (e) {\n                jsonResponse = {\n                    type: \"error\",\n                    error: e,\n                };\n            }\n        } else {\n            //----------------------------------------\n            // USING REGULAR UPLOAD\n            //----------------------------------------\n            data[options.uploadItemName] = uFile.file;\n            let ajax = await jsx.uploadFileProgress(options.serverUrl, data, (e, percent, loaded, total) => {\n\n                let id = uFile.id;\n                globalProgressTracker.addProgress(id, percent);\n                globalPercent = globalProgressTracker.getPercent().toFixed(2);\n                updateUFileProgress(id, percent);\n\n            });\n\n\n            jsonResponse = JSON.parse(ajax.response);\n        }\n\n        return await handleAddUpdateResponse(uFile, jsonResponse);\n\n    }\n\n    async function handleAddUpdateResponse(uFile, jsonResponse) {\n        if (true === checkAcpResponse(jsonResponse)) {\n\n            // eliminate conflict of ajaxCommunicationProtocol.type (success|error) and our uFile.type (mime type)\n            delete jsonResponse.type;\n\n\n            if (true === uFile.__preserveOriginalUrl) {\n                /**\n                 * Needed this in the case of an update, using the virtual server, which didn't know the original url\n                 * and returned original_url=null, but we want to keep the old original url (since the vfs doesn't\n                 * know anything about whether the real original url exists or not).\n                 */\n                let originalUrl = uFile.original_url;\n                uFile = jsx.extend(uFile, jsonResponse);\n                uFile.original_url = originalUrl;\n                delete uFile.__preserveOriginalUrl;\n            } else {\n                uFile = jsx.extend(uFile, jsonResponse);\n            }\n\n\n            if (true === jsx.mimeIsImage(uFile.type)) {\n                /**\n                 * We download the blob so that we can update the image (if ever the server changed it).\n                 * Note that the server might not alter any other type of files, just images.\n                 */\n                let fileUrl = uFile.url;\n                if (true === options.useVirtualServer) {\n                    fileUrl += '&v=1';\n                }\n\n                let blob = await jsx.fetchBlob(fileUrl);\n                uFile.file = blob;\n                uFile.size = blob.size;\n                uFile.type = blob.type;\n            }\n\n\n            /**\n             * Note: the server's response will at least contain the url.\n             * In the case of the fileManager protocol, it might have other properties as well, such\n             * as:\n             * - name (will override current uFile name)\n             * - directory\n             *\n             */\n            uFile.status = 3;\n\n            if (null !== uFile.original_url) {\n\n                if (true === options.useVirtualServer) {\n                    uFile.original_url = jsx.url_merge_params(uFile.original_url, {v: 1});\n                }\n                uFile.keep_original = 0;\n            }\n\n\n            return uFile;\n        }\n        return false;\n    }\n\n\n    function updateUFileProgress(id, percent) {\n\n        let bk = 2;\n\n        for (let i in uFiles) {\n            let uFile = uFiles[i];\n            if (id === uFile.id) {\n                uFile.progress = percent;\n                uFiles = uFiles;\n                bk--;\n                if (0 === bk) {\n                    break;\n                }\n            }\n\n            if (null !== editedUFile && id === editedUFile.id) {\n                editedUFile.progress = percent; // redundant? but seems to be required\n                editedUFile = editedUFile;\n                bk--;\n                if (0 === bk) {\n                    break;\n                }\n            }\n\n        }\n    }\n\n    function abortUpload(uFile) {\n        removeUFile(uFile.id)\n    }\n\n    function openFileEditor(id) {\n        let uFile = _getUFileById(id);\n        editedUFile = uFile;\n        fileEditorIsOpen = true;\n    }\n\n    function closeFileEditor() {\n        fileEditorIsOpen = false;\n    }\n\n\n    function refreshGlobalPercentText() {\n        setTimeout(() => {\n            if (true === aIsVisible) {\n                aIsVisible = false;\n                setTimeout(() => {\n                    globalPercent = 0;\n                    abortBtnVisible = false;\n                    bIsVisible = true;\n                }, 500);\n            } else {\n                bIsVisible = false;\n                setTimeout(() => {\n                    globalPercent = 0;\n                    abortBtnVisible = false;\n                    aIsVisible = true;\n                }, 500);\n            }\n        }, 2000);\n    }\n\n    //----------------------------------------\n    //\n    //----------------------------------------\n    function _getUFileById(id) {\n        for (let uFile of uFiles) {\n            if (id === uFile.id) {\n                return uFile;\n            }\n        }\n        throw new Error(\"uFile not found with id: \" + id);\n    }\n\n    // function testLoader(id) {\n    //     for (let i in uFiles) {\n    //         let uFile = uFiles[i];\n    //         if (id === uFile.id) {\n    //             uFile.is_loading = true;\n    //             uFiles = uFiles;\n    //             break;\n    //         }\n    //     }\n    // }\n\n\n</script>\n\n\n<div class=\"fileuploader-container\">\n    <div class=\"hidden-inputs\" style=\"display: none\">\n        {#each uFiles as uFile (uFile.id)}\n            <input type=\"text\" readOnly name={inputName} value={uFile.url}/>\n        {/each}\n    </div>\n    <div class=\"error-container\">\n        <div class=\"error-container-item\">\n            {#each userErrors as userError}\n                <div class=\"error-item\">\n                    <span>{@html userError}</span>\n                    <button on:click|preventDefault={removeErrorItem} class=\"btn-remove-error\"><i\n                            class=\"fas fa-times-circle btn-remove-error\"></i></button>\n                </div>\n            {/each}\n        </div>\n    </div>\n    <div class=\"header\">\n        <div class=\"left\">{translator._(\"Select files\")}</div>\n        <div class=\"right\">\n            <button on:click|preventDefault={() => changeViewMode(\"text\")}\n                    class={styleBtnViewText}\n\n            ><i\n                    class=\"fas fa-list-ul btn-view-text\"></i></button>\n            <button on:click|preventDefault={() => changeViewMode(\"image\")} class={styleBtnViewImage}><i\n                    class=\"far fa-image btn-view-image\"></i></button>\n        </div>\n    </div>\n    <div class=\"dropzone\" bind:this={elDropZone}>\n        <div class=\"dropzone-text\" class:visible={\"text\"===viewMode}>\n            <div class=\"dropzone-text-header\">\n                <div class=\"cell-name\">{translator._(\"Filename\")}</div>\n                <div class=\"cell-status\">{translator._(\"Status\")}</div>\n                <div class=\"cell-size\">{translator._(\"Size\")}</div>\n                <div class=\"cell-action\"></div>\n            </div>\n            <div class=\"dropzone-text-container\">\n                <div class=\"dropzone-droptext\">{translator._(\"Drag files here.\")}</div>\n                <ul class=\"fileuploader-item-container\" bind:this={elTextItemsContainer}>\n                    {#each uFiles as uFile (uFile.id)}\n\n                        {#if 0 === uFile.status}\n                            <li class=\"dropzone-text-item-container fileuploader-item ui-placeholder\"\n                                data-id=\"{uFile.id}\">\n                                <div class=\"cell-name\">{uFile.name}</div>\n                                <div class=\"cell-status\">{translator._(\"Loading...\")}</div>\n                                <div class=\"cell-size\">&nbsp</div>\n                                <div class=\"cell-action gu-hide\">&nbsp;</div>\n                            </li>\n                        {:else}\n                            <li class=\"dropzone-text-item-container fileuploader-item\" data-id=\"{uFile.id}\">\n                                <div class=\"cell-name\">\n                                    {uFile.name}\n                                    {#if true === uFile.is_loading}\n                                        <i class=\"fas fa-circle-notch fa-spin\"></i>\n                                    {/if}\n                                </div>\n                                <div class=\"cell-status\">\n                                    {#if uFile.status < 2}\n                                        -\n                                    {:else}\n                                        {uFile.progress}%\n                                    {/if}\n\n                                </div>\n                                <div class=\"cell-size\">{jsx.humanSize(uFile.size)}</div>\n                                <div class=\"cell-action gu-hide\">\n                                    {#if true === options.useFileEditor}\n                                        <button on:click|preventDefault={() => openFileEditor(uFile.id)}\n                                                class=\"btn-edit-file\"><i\n                                                class=\"btn-edit-file fas fa-edit\"></i></button>\n                                    {/if}\n                                    {#if true === options.useDelete}\n                                        <button on:click|preventDefault={() => removeUFile(uFile.id)}\n                                                class=\"btn-remove-file\"><i\n                                                class=\"fas fa-minus-circle btn-remove-file\"></i>\n                                        </button>\n                                    {/if}\n                                </div>\n                            </li>\n                        {/if}\n                    {/each}\n                </ul>\n            </div>\n        </div>\n        <div class=\"dropzone-image\" class:visible={\"image\"===viewMode}>\n            <div class=\"dropzone-droptext\">{translator._(\"Drag files here.\")}</div>\n            <div class=\"filelist fileuploader-item-container\" bind:this={elImageItemsContainer}>\n                {#each uFiles as uFile (uFile.id)}\n\n                    {#if 0 === uFile.status}\n                        <div class=\"dropzone-image-item-container fileuploader-item\"\n                             data-id={uFile.id}>\n                            <div class=\"cell-content\">\n                                <div class=\"cell-image\">\n                                    <span class=\"cell-image-img\">\n<!--                                        <i class=\"fas fa-circle-notch fa-spin loading-image\"></i>-->\n                                    </span>\n                                </div>\n                                <div class=\"cell-name\">{uFile.name}</div>\n                                <div class=\"cell-size\"></div>\n                            </div>\n                            <div class=\"image-overlay\">\n                                <i class=\"fas fa-circle-notch fa-spin fa-2x\"></i>\n                            </div>\n                        </div>\n                    {:else}\n                        <div class=\"dropzone-image-item-container fileuploader-item\" data-id={uFile.id}>\n                            <div class=\"cell-content\">\n                                <div class=\"cell-image\">\n                                    {#if true === jsx.mimeIsImage(uFile.type)}\n                                        <img class=\"cell-image-img\" src={URL.createObjectURL(uFile.file)}\n                                             alt={uFile.name}/>\n                                    {:else}\n                                        <span class=\"cell-image-img\"><i class=\"far fa-file\"></i></span>\n                                    {/if}\n                                </div>\n                                <div class=\"cell-name\">{uFile.name}</div>\n                                <div class=\"cell-size\">{jsx.humanSize(uFile.size)}</div>\n                            </div>\n                            <div class=\"cell-action gu-hide\">\n                                {#if true === options.useFileEditor}\n                                    <button on:click|preventDefault={() => openFileEditor(uFile.id)}\n                                            class=\"btn-edit-file\"><i\n                                            class=\"btn-edit-file fas fa-edit\"></i></button>\n                                {/if}\n                                {#if true === options.useDelete}\n                                    <button on:click|preventDefault={() => removeUFile(uFile.id)}\n                                            class=\"btn-remove-file\"><i\n                                            class=\"fas fa-minus-circle btn-remove-file\"></i>\n                                    </button>\n                                {/if}\n                            </div>\n                            {#if true === uFile.is_loading}\n                                <div class=\"image-overlay\">\n                                    <i class=\"fas fa-circle-notch fa-spin fa-2x\"></i>\n                                </div>\n                            {/if}\n                        </div>\n                    {/if}\n                {/each}\n\n            </div>\n        </div>\n    </div>\n    <div class=\"footer\">\n        <div class=\"left\">\n            <button on:click|preventDefault={onAddFileButtonClicked}\n                    class={styleBtnAddFile}\n            ><i\n                    class=\"btn-add-file fas fa-plus-circle\"></i> <span\n                    class=\"btn-add-file\">{\n                0 === nbQueuedFiles ?\n                    translator._(\"Add files\") :\n                    translator._n(\"x files queued\", nbQueuedFiles)\n            }\n\n                </span>\n            </button>\n            {#if false === options.immediateUpload}\n                <button on:click|preventDefault={uploadQueuedFiles}\n                        class={styleBtnStartUpload}\n                        disabled={!startUploadBtnEnabled}><i\n                        class=\"btn-start-upload fas fa-arrow-circle-right\"></i> <span\n                        class=\"btn-start-upload\">{translator._(\"Start upload\")}</span></button>\n            {/if}\n        </div>\n        <div class=\"right\">\n            <span class=\"footer-info\"><span class=\"text-file\">{translator._n(\"x files\", uFiles.length)}</span></span>\n            <span class=\"footer-info global-percent-upload\">\n                {#if true === aIsVisible}\n                    <span transition:fade>{globalPercent}%</span>\n                {/if}\n                {#if true === bIsVisible}\n                    <span transition:fade>{globalPercent}%</span>\n                {/if}\n            </span>\n            <button on:click|preventDefault={abort} class=\"btn-abort-upload\"\n                    style=\"display: {abortBtnVisible?'inline-block':'none'}\">\n                <i\n                        class=\"fas fa-ban btn-abort-upload\"></i> {translator._(\"Abort\")}\n            </button>\n            <span class=\"footer-info global-size\">\n                {jsx.humanSize(totalSize)}\n            </span>\n        </div>\n    </div>\n    <div class=\"hidden\" style=\"display: none\">\n        <input bind:this={hiddenAddFileBtn} on:change={(e) => addUserFiles(e.target.files)}\n               class=\"input-file\"\n               disabled\n               type=\"file\" name={inputName}\n               multiple={isMultipleInput}\n        />\n    </div>\n\n\n</div>\n\n\n<FileEditor isOpen={fileEditorIsOpen} uFile={editedUFile} errors={fileEditorErrors}></FileEditor>\n\n\n<style type=\"text/sass\" lang=\"scss\">\n\n  $padding: 10px;\n  $bgColor: #eee;\n  $dropzoneTextHeaderHeight: 20px;\n  $errorColor: #cd0a0a;\n  $imgWidthHeight: 80px;\n\n\n  .fileuploader-container {\n\n\n    .hidden-inputs {\n\n      input { // ease debugging\n        display: block;\n        width: 100%;\n      }\n    }\n\n    position: relative;\n    border: 1px solid #999;\n\n    button {\n\n      cursor: pointer;\n\n      &.btn-start-upload:disabled {\n        cursor: not-allowed;\n      }\n\n    }\n\n\n    .error-container {\n      color: #cd0a0a;\n\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      z-index: 1;\n\n      .error-container-item {\n\n        position: relative;\n        height: 100%;\n\n\n        .error-item {\n\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          border: 1px solid $errorColor;\n          background: rgb(255, 232, 232);\n          padding: 10px;\n          background: linear-gradient(0deg, rgba(255, 232, 232, 1) 46%, rgba(255, 239, 239, 1) 56%, rgba(255, 239, 239, 1) 63%);\n\n\n          button.btn-remove-error {\n\n            position: absolute;\n            top: 4px;\n            right: 0px;\n\n            background: transparent;\n\n            border: none;\n            color: $errorColor;\n\n            cursor: pointer;\n\n          }\n\n        }\n\n      }\n\n    }\n\n    .header {\n      background: $bgColor;\n\n      display: flex;\n      padding: $padding;\n\n      .right {\n\n        margin-left: auto;\n\n      }\n\n    }\n\n    @keyframes placeholderShimmer {\n      0% {\n        background-position: -1200px 0\n      }\n      100% {\n        background-position: 1200px 0\n      }\n    }\n\n\n    .ui-placeholder {\n      position: static;\n      overflow: hidden;\n      animation: placeholderShimmer 2s linear;\n      animation-iteration-count: infinite;\n      background-color: #fff;\n      background-image: linear-gradient(to right, rgba(0, 0, 0, 0.03) 0, rgba(0, 0, 0, 0.1) 50%, rgba(0, 0, 0, 0.03) 60%) !important;\n\n      background-size: 1200px 100% !important;;\n\n    }\n\n\n    .dropzone {\n\n      background: white;\n      min-height: 150px;\n\n      position: relative;\n\n      &.dropzone-hover {\n        background: #fafafa;\n\n      }\n\n\n      .dropzone-text, .dropzone-image {\n\n        display: none;\n\n        &.visible {\n\n          display: block;\n\n        }\n\n      }\n\n      .dropzone-text {\n\n        .dropzone-text-header {\n\n          display: flex;\n          padding: 10px;\n\n\n          background: rgb(209, 209, 209);\n          background: linear-gradient(0deg, rgba(209, 209, 209, 1) 0%, rgba(227, 227, 227, 1) 100%);\n\n        }\n\n        .dropzone-text-item-container {\n\n          display: flex;\n          padding: 6px;\n          margin: 0;\n\n          position: relative;\n          z-index: 1;\n\n          background: rgb(228, 228, 228);\n          background: linear-gradient(0deg, rgba(228, 228, 228, 1) 46%, rgba(238, 238, 238, 1) 56%);\n\n        }\n\n\n        .cell-status {\n\n          margin-left: auto;\n          width: 80px;\n\n        }\n\n        .cell-size {\n          width: 70px;\n\n          white-space: nowrap;\n\n          overflow: hidden;\n\n          text-overflow: ellipsis;\n\n        }\n\n        .cell-action {\n          width: 30px;\n        }\n\n\n        .dropzone-text-container {\n\n          position: absolute;\n          top: 39px;\n          left: 0;\n          right: 0;\n          bottom: 0;\n\n          overflow-y: auto;\n\n          font: normal 11px Verdana, sans-serif;\n\n          ul {\n            margin: 0;\n            padding: 0;\n\n\n            .cell-name {\n              padding-left: 10px;\n\n            }\n\n            button.btn-remove-file, button.btn-edit-file {\n\n              border: none;\n              margin: 0;\n              padding: 0;\n\n              cursor: pointer;\n              color: #919191;\n\n            }\n\n          }\n\n        }\n\n      }\n\n      .dropzone-image {\n\n        .filelist {\n\n          display: flex;\n\n          flex-wrap: wrap;\n\n          position: absolute;\n          top: 0px;\n          left: 0;\n          right: 0;\n          bottom: 0;\n\n          overflow-y: auto;\n\n\n          .dropzone-image-item-container {\n\n            position: relative;\n            padding: 5px;\n            background: #f0f0f0;\n            margin: 5px;\n            max-width: 80px;\n            max-height: 120px;\n\n            overflow: hidden;\n\n\n            .cell-content {\n\n              .cell-image {\n\n                height: 80px;\n                text-align: center;\n                display: flex;\n                justify-content: center;\n                align-items: center;\n\n                img {\n                  max-height: 80px;\n                  max-width: 80px;\n\n                }\n\n                i {\n                  color: #c2c2c2;\n                  font-size: 80px;\n\n                  &.loading-image {\n                    font-size: 50px;\n                  }\n                }\n\n              }\n\n\n              .cell-name {\n\n                font: bold 11px Verdana, sans-serif;\n\n              }\n\n              .cell-size {\n\n                font: normal 9px Verdana, sans-serif;\n\n              }\n\n\n              .cell-status {\n                margin-top: 5px;\n                font-size: 0.8em;\n                text-align: center;\n\n              }\n            }\n\n\n            .cell-action {\n\n              position: absolute;\n              top: 1px;\n              right: 1px;\n\n              button.btn-remove-file, button.btn-edit-file {\n\n                border: none;\n                margin: 0;\n                padding: 0;\n\n                cursor: pointer;\n                color: #919191;\n\n                background: transparent;\n\n              }\n            }\n\n\n            .image-overlay {\n              position: absolute;\n              top: 0;\n              left: 0;\n              right: 0;\n              bottom: 0;\n              background: rgba(0, 0, 0, 0.2);\n              display: flex;\n              justify-content: center;\n              align-items: center;\n\n              i {\n                color: white;\n              }\n            }\n\n          }\n\n        }\n\n      }\n\n      .dropzone-droptext {\n\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n\n        background: transparent;\n\n        text-align: center;\n\n        display: flex;\n\n        justify-content: center;\n\n        align-items: center;\n\n        font: normal 11px Verdana, sans-serif;\n\n      }\n\n    }\n\n\n    .footer {\n      background: $bgColor;\n\n      display: flex;\n      padding: $padding;\n\n      .right {\n\n        margin-left: auto;\n\n        font: bold 11px Verdana, sans-serif;\n        color: #222;\n\n        .footer-info:not(:last-child) {\n          border-right: 1px solid #aaa;\n          padding-right: 7px;\n          margin-right: 7px;\n\n        }\n\n      }\n\n    }\n\n  }\n\n\n  /*------------------------------------\n  - DRAGULA\n  ------------------------------------*/\n  :global(.gu-mirror) {\n    position: fixed !important;\n    margin: 0 !important;\n    z-index: 9999 !important;\n    opacity: 0.8;\n    -ms-filter: \"progid:DXImageTransform.Microsoft.Alpha(Opacity=80)\";\n    filter: alpha(opacity=80);\n\n    img {\n      width: $imgWidthHeight;\n      height: $imgWidthHeight;\n    }\n  }\n\n\n  :global(.gu-unselectable) {\n    -webkit-user-select: none !important;\n    -moz-user-select: none !important;\n    -ms-user-select: none !important;\n    user-select: none !important;\n\n    .gu-hide {\n      display: none !important;\n    }\n  }\n\n\n  :global(.gu-transit) {\n    opacity: 0.2;\n    -ms-filter: \"progid:DXImageTransform.Microsoft.Alpha(Opacity=20)\";\n    filter: alpha(opacity=20);\n  }\n\n</style>","import SomeComponent from './DefaultFileUploader.svelte';\n\n\nwindow.FileUploader = function (options) {\n    return new SomeComponent(options);\n};\n\n//----------------------------------------\n// LANG HOOK\n//----------------------------------------\nFileUploader._langs = {};\nFileUploader.hasLang = function (lang) {\n    return (lang in FileUploader._langs);\n};\nFileUploader.addLang = function (lang, dict) {\n    FileUploader._langs[lang] = dict;\n};"],"names":["noop","identity","x","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","component_subscribe","component","store","callback","$$","on_destroy","push","callbacks","unsub","subscribe","unsubscribe","get_slot_context","definition","ctx","$$scope","tar","src","k","assign","slice","update_slot","slot","slot_definition","dirty","get_slot_changes_fn","get_slot_context_fn","slot_changes","lets","undefined","merged","len","Math","max","length","i","get_slot_changes","slot_context","p","null_to_empty","value","is_client","window","now","performance","Date","raf","cb","requestAnimationFrame","tasks","Set","run_tasks","task","c","delete","f","size","append","target","node","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","destroy_each","iterations","detaching","d","element","name","document","createElement","text","data","createTextNode","space","empty","listen","event","handler","options","addEventListener","removeEventListener","prevent_default","preventDefault","call","this","attr","attribute","removeAttribute","getAttribute","setAttribute","set_data","wholeText","set_style","key","important","style","setProperty","toggle_class","toggle","classList","custom_event","type","detail","e","createEvent","initCustomEvent","active_docs","current_component","active","create_rule","duration","delay","ease","uid","step","keyframes","t","rule","str","hash","charCodeAt","doc","ownerDocument","add","stylesheet","__svelte_stylesheet","head","sheet","current_rules","__svelte_rules","insertRule","cssRules","animation","delete_rule","previous","split","next","filter","anim","indexOf","deleted","join","deleteRule","clear","set_current_component","get_current_component","Error","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","Promise","resolve","update_scheduled","add_render_callback","flushing","seen_callbacks","flush","update","pop","has","fragment","before_update","after_update","promise","dispatch","direction","kind","dispatchEvent","outroing","outros","group_outros","r","check_outros","transition_in","block","local","transition_out","o","null_transition","create_bidirectional_transition","params","intro","config","running_program","pending_program","animation_name","clear_animation","init","program","abs","start","end","group","go","easing","tick","css","fulfill","loop","[object Object]","then","destroy_block","lookup","update_keyed_each","old_blocks","get_key","dynamic","list","destroy","create_each_block","get_context","n","old_indexes","new_blocks","new_lookup","Map","deltas","child_ctx","get","set","will_move","did_move","m","first","new_block","old_block","new_key","old_key","create_component","mount_component","on_mount","new_on_destroy","map","destroy_component","make_dirty","fill","instance","create_fragment","not_equal","props","parent_component","prop_values","bound","context","skip_bound","ready","ret","rest","hydrate","nodes","Array","from","childNodes","children","l","SvelteComponent","$destroy","index","splice","$$props","obj","$$set","keys","arrayKeyExists","object","b64toBlob","b64Data","contentType","sliceSize","byteCharacters","atob","byteArrays","offset","byteNumbers","byteArray","Uint8Array","Blob","basename","path","returnExtension","str_contains","compareBlobs","async","blob1","blob2","useTrick","buffer","arrayBuffer","buffer2","_compareBuffers","compareObjects","y","constructor","Function","RegExp","valueOf","isArray","every","convertHumanSizeToBytes","cssId","prefix","getRandomNumber","dirname","replace","charAt","substr","escapeHtml","&","<",">","\"","'","extend","extended","deep","arguments","prototype","toString","merge","prop","hasOwnProperty","fetchBlob","url","fetchInit","response","fetch","ok","status","statusText","blob","fetchJson","json","getFileExtension","min","floor","random","humanSize","bytes","decimals","log","parseFloat","pow","toFixed","inArray","needle","haystack","isEmptyObject","isPlainObject","isFunction","mimeIsImage","mime","match","objectToQueryString","encodeParams","_serialize","payload","body","FormData","console","error","post","files","url_merge_params","toFormData","method","queryStringToObject","queryString","q","_parse_str","reindex","array","item","removeEntryByIndex","startsWith","substring","toBool","fd","h","pk","v","File","toInt","res","parseInt","isNaN","uploadFileProgress","onProgress","decorator","reject","formdata","ajax","XMLHttpRequest","upload","percent","round","loaded","total","stopPropagation","open","onreadystatechange","readyState","send","qs","baseUrl","shift","urlParams","allParams","useEncoder","encodeURIComponent","_testTypes","buf1","buf2","byteLength","d1","DataView","d2","getUint8","j","ct","lastObj","chr","tmp","postLeftBracketPos","keysLen","strArr","String","sal","_fixStr","decodeURIComponent","$global","global","$locutus","php","fade","linear","getComputedStyle","opacity","escapeCommaAndTrim","trim","_getPandaHeaders","headers","arrays","jsx","values","val","getPandaHeaders","getPandaHeadersByXMLHttpRequest","request","arr","getAllResponseHeaders","headerMap","line","parts","header","entries","Validator","events","rules","translatee","translator","oFile","errMsg","maxFileSize","bytesMaxFileSize","addRule","tags","fileName","maxSize","fileSize","_","maxFileNameLength","maxLength","mimeType","allowedMimeTypes","fileMimeType","allowedFileExtension","allowedFileExtensions","extension","fileExtension","GlobalProgressTracker","nbItems","totalWeight","slots","uFiles","uFile","id","maxPercentPerSlot","dictionaries","pluralSelectors","defaultLang","strictMode","langId","bool","dictionary","pluralSelector","_getDefaultPluralSelector","msgId","dict","msg","_error","number","pluralIndex","container","cssClass","onDrop","elDropZone","dataTransfer","effectAllowed","dropEffect","remove","contains","filesArray","timer","chunkSize","serverUrl","onChunkLoaded","isLastChunk","onChunkAborted","onChunkResponseReceived","_xhr","controller","AbortController","_is_aborted","_chunkFailed","abort","file","$this","setTimeout","s","_slice","_send","piece","userData","_sendViaFetch","mozSlice","webkitSlice","_noop","bind","_resolve","_reject","signal","catch","clone","setImmediate","args","ticky","apply","opts","evt","on","once","_once","off","et","emit","atoa","emitterSnapshot","throws","debounce","NativeCustomEvent","CustomEvent","foo","useNative","bubbles","cancelable","createEventObject","Boolean","eventmap","eventname","ron","test","addEvent","el","capturing","removeEvent","hardCache","attachEvent","wrapper","unwrap","originalEvent","srcElement","returnValue","cancelBubble","which","keyCode","wrapperFactory","wrap","listener","detachEvent","fabricate","model","customEvent","initEvent","makeClassicEvent","fireEvent","find","cache","lookupClass","className","cached","lastIndex","current","rm","documentElement","touchy","op","navigator","pointerEnabled","crossvent","mouseup","mousedown","mousemove","msPointerEnabled","whichMouseButton","touches","buttons","button","getOffset","rect","getBoundingClientRect","left","getScroll","top","scrollProp","offsetProp","clientHeight","getElementBehindPoint","point","state","elementFromPoint","never","always","getRectWidth","width","right","getRectHeight","height","bottom","getParent","isInput","tagName","isEditable","contentEditable","nextEl","nextElementSibling","sibling","nextSibling","nodeType","manually","getCoord","coord","host","targetTouches","changedTouches","getEventHost","missMap","pageX","pageY","initialContainers","_mirror","_source","_item","_offsetX","_offsetY","_moveX","_moveY","_initialSibling","_currentSibling","_copy","_renderTimer","_grabbed","_lastDropTarget","moves","accepts","invalid","invalidTarget","containers","isContainer","copy","copySortSource","revertOnSpill","removeOnSpill","ignoreInputTextSelection","mirrorContainer","drake","emitter","manualStart","cancel","canMove","dragging","spillOver","spillOut","grab","release","eventualMovements","startBecauseMouseMoved","movements","preventGrabbed","clientX","clientY","metaKey","ctrlKey","canStart","focus","grabbed","classes","renderMirrorImage","drag","handle","source","isCopy","cloneNode","drop","ungrab","dropTarget","findDropTarget","parent","isInitialPlacement","cleanup","revert","reverts","initial","removeMirrorImage","clearTimeout","elementBehindCursor","accepted","immediate","getImmediateChild","reference","getReference","changed","moved","horizontal","inside","outside","after","subscriber_queue","draggable","_options","startClick","onStartDragBefore","isDragging","handleMousedown","btn","includes","handleMousemove","handleMouseup","dx","dy","slot_ctx","action_result","handleDragEnd","styleId","elStyle","getElementById","maxTop","maxRight","maxBottom","maxLeft","coords","stop","subscribers","new_value","run_queue","invalidate","subscriber","writable","createEventDispatcher","draggableOptions","modalOptions","dragHandle","closest","displayStyle","keepInViewport","$coords","newX","newY","elHead","getElementsByTagName","innerHTML","firstChild","innerWidth","innerHeight","module","_typeof","Symbol","iterator","_classCallCheck","Constructor","TypeError","_defineProperties","descriptor","enumerable","configurable","defineProperty","_defineProperty","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","_objectSpread2","getOwnPropertyDescriptors","defineProperties","_toConsumableArray","arr2","_arrayWithoutHoles","iter","_iterableToArray","_nonIterableSpread","IS_BROWSER","WINDOW","IS_TOUCH_DEVICE","HAS_POINTER_EVENT","CLASS_CROP","concat","CLASS_DISABLED","CLASS_HIDDEN","CLASS_HIDE","CLASS_INVISIBLE","CLASS_MODAL","CLASS_MOVE","DATA_ACTION","DATA_PREVIEW","EVENT_TOUCH_START","EVENT_TOUCH_MOVE","EVENT_TOUCH_END","EVENT_POINTER_DOWN","EVENT_POINTER_MOVE","EVENT_POINTER_UP","REGEXP_ACTIONS","REGEXP_DATA_URL","REGEXP_DATA_URL_JPEG","REGEXP_TAG_NAME","DEFAULTS","viewMode","dragMode","initialAspectRatio","NaN","aspectRatio","preview","responsive","restore","checkCrossOrigin","checkOrientation","modal","guides","center","highlight","background","autoCrop","autoCropArea","movable","rotatable","scalable","zoomable","zoomOnTouch","zoomOnWheel","wheelZoomRatio","cropBoxMovable","cropBoxResizable","toggleDragModeOnDblclick","minCanvasWidth","minCanvasHeight","minCropBoxWidth","minCropBoxHeight","minContainerWidth","minContainerHeight","cropstart","cropmove","cropend","crop","zoom","Number","isNumber","isPositiveNumber","Infinity","isUndefined","isObject","_constructor","toArray","_len","_key","arg","REGEXP_DECIMALS","normalizeDecimalNumber","times","REGEXP_SUFFIX","setStyle","styles","property","addClass","elem","removeClass","toggleClass","added","REGEXP_CAMEL_CASE","toParamCase","toLowerCase","getData","dataset","setData","REGEXP_SPACES","onceSupported","supported","removeListener","listeners","addListener","_handler","_element$listeners","_len2","_key2","Event","box","pageXOffset","clientLeft","pageYOffset","clientTop","location","REGEXP_ORIGINS","isCrossOriginURL","protocol","hostname","port","addTimestamp","timestamp","getTime","getTransforms","_ref","rotate","scaleX","scaleY","translateX","translateY","transform","WebkitTransform","msTransform","getPointer","_ref2","endOnly","endX","endY","startX","startY","getAdjustedSizes","_ref4","isValidWidth","isValidHeight","adjustedWidth","getSourceCanvas","image","_ref6","_ref7","_ref8","imageAspectRatio","imageNaturalWidth","naturalWidth","imageNaturalHeight","naturalHeight","_ref6$rotate","_ref6$scaleX","_ref6$scaleY","_ref8$fillColor","fillColor","_ref8$imageSmoothingE","imageSmoothingEnabled","_ref8$imageSmoothingQ","imageSmoothingQuality","_ref8$maxWidth","maxWidth","_ref8$maxHeight","maxHeight","_ref8$minWidth","minWidth","_ref8$minHeight","minHeight","canvas","getContext","maxSizes","minSizes","destMaxSizes","destMinSizes","destWidth","destHeight","fillStyle","fillRect","save","translate","PI","scale","drawImage","param","fromCharCode","REGEXP_DATA_URL_HEAD","resetAndGetOrientation","orientation","dataView","littleEndian","app1Start","ifdStart","tiffOffset","getStringFromCharCode","endianness","getUint16","firstIFDOffset","getUint32","_offset","_length","setUint16","render","initContainer","initCanvas","initCropBox","renderCanvas","cropped","renderCropBox","cropper","containerData","offsetWidth","offsetHeight","imageData","rotated","canvasWidth","canvasHeight","canvasData","oldLeft","oldTop","limited","limitCanvas","initialImageData","initialCanvasData","sizeLimited","positionLimited","cropBoxData","_getAdjustedSizes","newCanvasLeft","newCanvasTop","minLeft","minTop","transformed","_getRotatedSizes","_ref5","degree","arc","sinArc","sin","cosArc","cos","newWidth","newHeight","getRotatedSizes","renderImage","limitCropBox","output","initialCropBoxData","maxCropBoxWidth","maxCropBoxHeight","face","cropBox","disabled","initPreview","crossOrigin","crossOriginUrl","alt","viewBox","viewBoxImage","previews","querySelectorAll","querySelector","img","html","cssText","resetPreview","removeData","cropBoxWidth","cropBoxHeight","originalWidth","originalHeight","ratio","onCropStart","cropStart","onWheel","wheel","passive","capture","onDblclick","dblclick","onCropMove","cropMove","onCropEnd","cropEnd","onResize","resize","unbind","handlers","getCanvasData","getCropBoxData","setCanvasData","setCropBoxData","setDragMode","hasClass","dragBox","_this","delta","wheeling","deltaY","wheelDelta","pointerType","action","pointers","touch","identifier","pointerId","cropping","change","renderable","shiftKey","pointer","range","check","side","move","pointers2","ratios","pointer2","x1","y1","x2","y2","z1","sqrt","sort","getMaxZoomRatio","methods","reset","hasSameSize","isImg","replaced","uncreate","load","enable","disable","originalUrl","offsetX","offsetY","_this$canvasData","moveTo","_originalEvent","zoomTo","pivot","oldRatio","count","_ref3","getPointersCenter","rotateTo","_scaleX","_scaleY","rounded","getContainerData","getImageData","sized","widthChanged","heightChanged","getCroppedCanvas","HTMLCanvasElement","_this$getData","initialX","initialY","initialWidth","initialHeight","_options$imageSmoothi","srcWidth","srcHeight","dstX","dstY","dstWidth","dstHeight","sourceWidth","sourceHeight","srcX","srcY","setAspectRatio","mode","croppable","AnotherCropper","Cropper","reloading","sizing","protoProps","staticProps","toDataURL","ArrayBuffer","read","base64","binary","uint8","xhr","onabort","onerror","ontimeout","onprogress","getResponseHeader","onload","onloadend","responseType","withCredentials","chunks","subarray","btoa","arrayBufferToDataURL","_parseOrientation","parseOrientation","_this2","isIOSWebKit","userAgent","done","build","sizingImage","template","getElementsByClassName","unbuild","factory","removeError","directory","useKeepOriginalImage","original_url","is_loading","progress","useDirectory","directoryCanBeUpdated","usePrivacy","is_private","useTags","useImageEditor","fileExtensionCanBeUpdated","isOpen","title","errors","useOriginalImageChecked","stateCpt","onCloseFileEditorBtnClicked","onFileEditorFileDropped","onFileEditorUpdated","fileEditorOptions","feo","styleBtnCancel","styleBtnUpdate","useBootstrap","jDialog","jSelect","cssIdCounter","isImage","initialCropData","originalBlob","pendingOriginalBlob","dropZoneHandler","destroyCropper","close","addError","jQuery","select2Options","availableTags","tag","_toSelect2Data","allowCustomTags","nbTagsAllowed","select2","jImageOriginal","theUrl","cropperImgRef","URL","createObjectURL","cropperOptions","$target","that","option","JSON","parse","message","secondOption","DropZoneHandler","dropzoneOverClass","hasBeenCropped","isPrivate","toBlob","getFileEditorBlob","getFileEditorData","dropped","original","checked","removeErrorItem","useFileEditor","useDelete","_n","immediateUpload","getCurrentOrder","child","attrName","lang","maxFile","urls","uploadItemName","errorMessage","isExternalUrl","useVirtualServer","fileEditor","hiddenAddFileBtn","elTextItemsContainer","elImageItemsContainer","uFileCounter","inputName","isMultipleInput","FileUploader","_langs","Translatee","setDefaultLang","addDictionary","validator","setTranslator","globalProgressTracker","chunkUploader","styleBtnAddFile","styleBtnStartUpload","styleBtnViewText","styleBtnViewImage","editedUFile","fileEditorIsOpen","globalPercent","abortBtnVisible","userErrors","fileEditorErrors","aIsVisible","bIsVisible","changeViewMode","createUFile","getNewFileId","is_user_data","keep_original","addUFile","updateUFile","curUFile","removeUFile","serverCheck","callService","checkAcpResponse","loadUrl","lastModifiedDate","blobToFile","moreHeaders","panda","addServerError","addUserFiles","numFiles","applyFileRotation","addUserError","uploadQueuedFiles","nbFilesToRemove","err","addFileEditorError","updateUFileOrder","ids","newUFiles","tmpUFiles","returnOriginalResponse","reason","resetUrls","isSuccessfulResponse","jsonResponse","nbQueuedFiles","registerItems","fileId","newUFile","uploadFile","refreshGlobalPercentText","singleFile","filename","useChunks","ChunkUploader","abortUpload","addProgress","getPercent","bk","updateUFileProgress","sendByChunks","handleAddUpdateResponse","__preserveOriginalUrl","fileUrl","openFileEditor","_getUFileById","drakeImg","dragula","drakeText","dForm","updatedEditedFile","postedData","flags","fileHasChanged","totalSize","_uFiles","getTotalSize","getNbQueuedFiles","startUploadBtnEnabled","click","SomeComponent","hasLang","addLang"],"mappings":"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"}