!function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function i(){return Object.create(null)}function r(t){t.forEach(n)}function a(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(e,n,i){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const i=e.subscribe(...n);return i.unsubscribe?()=>i.unsubscribe():i}(n,i))}function l(t,e,n,i){return t[1]&&i?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](i(e))):n.ctx}function c(t,e,n,i,r,a,o){const s=function(t,e,n,i){if(t[2]&&i){const r=t[2](i(n));if(void 0===e.dirty)return r;if("object"==typeof r){const t=[],n=Math.max(e.dirty.length,r.length);for(let i=0;i<n;i+=1)t[i]=e.dirty[i]|r[i];return t}return e.dirty|r}return e.dirty}(e,i,r,a);if(s){const r=l(e,n,i,o);t.p(r,s)}}function u(t){return null==t?"":t}const d="undefined"!=typeof window;let h=d?()=>window.performance.now():()=>Date.now(),p=d?t=>requestAnimationFrame(t):t;const f=new Set;function m(t){f.forEach(e=>{e.c(t)||(f.delete(e),e.f())}),0!==f.size&&p(m)}function g(t,e){t.appendChild(e)}function v(t,e,n){t.insertBefore(e,n||null)}function b(t){t.parentNode.removeChild(t)}function y(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function w(t){return document.createElement(t)}function x(t){return document.createTextNode(t)}function C(){return x(" ")}function E(){return x("")}function _(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function k(t){return function(e){return e.preventDefault(),t.call(this,e)}}function M(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function O(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function D(t,e,n,i){t.style.setProperty(e,n,i?"important":"")}function T(t,e,n){t.classList[n?"add":"remove"](e)}function S(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}const $=new Set;let L,B=0;function z(t,e,n,i,r,a,o,s=0){const l=16.666/i;let c="{\n";for(let t=0;t<=1;t+=l){const i=e+(n-e)*a(t);c+=100*t+`%{${o(i,1-i)}}\n`}const u=c+`100% {${o(n,1-n)}}\n}`,d=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${s}`,h=t.ownerDocument;$.add(h);const p=h.__svelte_stylesheet||(h.__svelte_stylesheet=h.head.appendChild(w("style")).sheet),f=h.__svelte_rules||(h.__svelte_rules={});f[d]||(f[d]=!0,p.insertRule(`@keyframes ${d} ${u}`,p.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?m+", ":""}${d} ${i}ms linear ${r}ms 1 both`,B+=1,d}function j(t,e){const n=(t.style.animation||"").split(", "),i=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),r=n.length-i.length;r&&(t.style.animation=i.join(", "),B-=r,B||p(()=>{B||($.forEach(t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}}),$.clear())}))}function F(t){L=t}function N(){if(!L)throw new Error("Function called outside component initialization");return L}const I=[],H=[],R=[],P=[],A=Promise.resolve();let U=!1;function W(t){R.push(t)}let X=!1;const Y=new Set;function q(){if(!X){X=!0;do{for(let t=0;t<I.length;t+=1){const e=I[t];F(e),K(e.$$)}for(F(null),I.length=0;H.length;)H.pop()();for(let t=0;t<R.length;t+=1){const e=R[t];Y.has(e)||(Y.add(e),e())}R.length=0}while(I.length);for(;P.length;)P.pop()();U=!1,X=!1,Y.clear()}}function K(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(W)}}let V;function Q(t,e,n){t.dispatchEvent(S(`${e?"intro":"outro"}${n}`))}const Z=new Set;let G;function J(){G={r:0,c:[],p:G}}function tt(){G.r||r(G.c),G=G.p}function et(t,e){t&&t.i&&(Z.delete(t),t.i(e))}function nt(t,e,n,i){if(t&&t.o){if(Z.has(t))return;Z.add(t),G.c.push(()=>{Z.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}}const it={duration:0};function rt(n,i,o,s){let l=i(n,o),c=s?0:1,u=null,d=null,g=null;function v(){g&&j(n,g)}function b(t,e){const n=t.b-c;return e*=Math.abs(n),{a:c,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function y(i){const{delay:a=0,duration:o=300,easing:s=e,tick:y=t,css:w}=l||it,x={start:h()+a,b:i};i||(x.group=G,G.r+=1),u||d?d=x:(w&&(v(),g=z(n,c,i,o,a,s,w)),i&&y(0,1),u=b(x,o),W(()=>Q(n,i,"start")),function(t){let e;0===f.size&&p(m),new Promise(n=>{f.add(e={c:t,f:n})})}(t=>{if(d&&t>d.start&&(u=b(d,o),d=null,Q(n,u.b,"start"),w&&(v(),g=z(n,c,u.b,u.duration,0,s,l.css))),u)if(t>=u.end)y(c=u.b,1-c),Q(n,u.b,"end"),d||(u.b?v():--u.group.r||r(u.group.c)),u=null;else if(t>=u.start){const e=t-u.start;c=u.a+u.d*s(e/u.duration),y(c,1-c)}return!(!u&&!d)}))}return{run(t){a(l)?(V||(V=Promise.resolve(),V.then(()=>{V=null})),V).then(()=>{l=l(),y(t)}):y(t)},end(){v(),u=d=null}}}function at(t,e){t.d(1),e.delete(t.key)}function ot(t,e,n,i,r,a,o,s,l,c,u,d){let h=t.length,p=a.length,f=h;const m={};for(;f--;)m[t[f].key]=f;const g=[],v=new Map,b=new Map;for(f=p;f--;){const t=d(r,a,f),s=n(t);let l=o.get(s);l?i&&l.p(t,e):(l=c(s,t),l.c()),v.set(s,g[f]=l),s in m&&b.set(s,Math.abs(f-m[s]))}const y=new Set,w=new Set;function x(t){et(t,1),t.m(s,u),o.set(t.key,t),u=t.first,p--}for(;h&&p;){const e=g[p-1],n=t[h-1],i=e.key,r=n.key;e===n?(u=e.first,h--,p--):v.has(r)?!o.has(i)||y.has(i)?x(e):w.has(r)?h--:b.get(i)>b.get(r)?(w.add(i),x(e)):(y.add(r),h--):(l(n,o),h--)}for(;h--;){const e=t[h];v.has(e.key)||l(e,o)}for(;p;)x(g[p-1]);return g}function st(t){t&&t.c()}function lt(t,e,i){const{fragment:o,on_mount:s,on_destroy:l,after_update:c}=t.$$;o&&o.m(e,i),W(()=>{const e=s.map(n).filter(a);l?l.push(...e):r(e),t.$$.on_mount=[]}),c.forEach(W)}function ct(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ut(t,e){-1===t.$$.dirty[0]&&(I.push(t),U||(U=!0,A.then(q)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function dt(e,n,a,o,s,l,c=[-1]){const u=L;F(e);const d=n.props||{},h=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:s,bound:i(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:i(),dirty:c,skip_bound:!1};let p=!1;if(h.ctx=a?a(e,d,(t,n,...i)=>{const r=i.length?i[0]:n;return h.ctx&&s(h.ctx[t],h.ctx[t]=r)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](r),p&&ut(e,t)),n}):[],h.update(),p=!0,r(h.before_update),h.fragment=!!o&&o(h.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);h.fragment&&h.fragment.l(t),t.forEach(b)}else h.fragment&&h.fragment.c();n.intro&&et(e.$$.fragment),lt(e,n.target,n.anchor),q()}F(u)}class ht{$destroy(){ct(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var pt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var ft={arrayKeyExists:function(t,e){return t in e},b64toBlob:function(t,e,n){e=e||"image/png",n=n||512;for(var i=atob(t),r=[],a=0;a<i.length;a+=n){for(var o=i.slice(a,a+n),s=new Array(o.length),l=0;l<o.length;l++)s[l]=o.charCodeAt(l);var c=new Uint8Array(s);r.push(c)}return new Blob(r,{type:e})},basename:function(t,e=!0){let n=t.split(/[\\/]/).pop();if(!1===e){if(!1===this.str_contains(n,"."))return n;let t=n.split(".");return t.pop(),t.join(".")}return n},compareBlobs:async function(t,e,n=!0){if(t.size!==e.size)return!1;if(!0===n&&t.size>1048576)return!0;let i=await t.arrayBuffer(),r=await e.arrayBuffer();return this._compareBuffers(i,r)},compareObjects:function(t,e){if(null==t||null==e)return t===e;if(t.constructor!==e.constructor)return!1;if(t instanceof Function)return t===e;if(t instanceof RegExp)return t===e;if(t===e||t.valueOf()===e.valueOf())return!0;if(Array.isArray(t)&&t.length!==e.length)return!1;if(t instanceof Date)return!1;if(!(t instanceof Object))return!1;if(!(e instanceof Object))return!1;var n=Object.keys(t);return Object.keys(e).every(t=>-1!==n.indexOf(t))&&n.every(n=>this.compareObjects(t[n],e[n]))},convertHumanSizeToBytes:function(){},cssId:function(t="jsx"){return t+"-"+this.getRandomNumber(0,1e6)},dirname:function(t){var e=t.replace(/\\/g,"/").replace(/\/[^/]*\/?$/,"");return"/"===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),e},escapeHtml:function(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return t.replace(/[&<>"']/g,(function(t){return e[t]}))},extend:function(){var t={},e=!1,n=0,i=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(e=arguments[0],n++);for(var r=n=>{for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e&&"[object Object]"===Object.prototype.toString.call(n[i])?t[i]=this.extend(!0,t[i],n[i]):t[i]=n[i])};n<i;n++){var a=arguments[n];r(a)}return t},fetchBlob:async function(t,e={}){let n=await fetch(t,e);if(!1===n.ok)throw new Error(`Unexpected response with status ${n.status}: ${n.statusText}.`);return await n.blob()},fetchJson:async function(t,e={}){let n=await fetch(t,e);if(!1===n.ok)throw new Error(`Unexpected response with status ${n.status}: ${n.statusText}.`);return await n.json()},getFileExtension:function(t){return!1===this.str_contains(t,".")?"":t.split(".").pop()},getRandomNumber:function(t,e){return Math.floor(Math.random()*e)+t},humanSize:function(t,e){if(0===t)return"0 Bytes";var n=e||2,i=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,i)).toFixed(n))+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][i]},inArray:function(t,e){for(var n=e.length,i=0;i<n;i++)if(t===e[i])return!0;return!1},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){return"[object Object]"===Object.prototype.toString.call(t)},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)},mimeIsImage:function(t){return!!t.match(/^image\//)},objectToQueryString:function(t,e){return this._serialize(t,e)},async post(t,e){var n=null;if(e instanceof FormData)n=e;else{if(!this.isPlainObject(e))throw console.error(e),new Error("Unknown payload case.");if(!0===e.hasOwnProperty("post")&&!0===e.hasOwnProperty("get")&&!0===e.hasOwnProperty("files")){var i=e.post,r=e.get,a=e.files;!1===this.isEmptyObject(r)&&(t=this.url_merge_params(t,r)),n=new FormData,this.toFormData(i,n),this.toFormData(a,n)}else n=this.toFormData(e)}return await fetch(t,{method:"POST",body:n})},queryStringToObject:function(t){let e=t.split("?").pop(),n={};return this._parse_str(e,n),n},reindex:function(t){return t.filter((function(t){return void 0!==t}))},removeEntryByIndex:function(t,e){t.splice(e,1)},startsWith:function(t,e){return t.substring(0,e.length)===e},str_contains:function(t,e){return-1!==t.indexOf(e)},toBool:function(t){return"0"!==t&&!!t},toFormData:function(t,e=null){var n;return null===e&&(e=new FormData),(n=t=>e=>e(n=>t(t)(e)(n)))(n)(t=>e=>n=>i=>(i instanceof Object&&Object.keys(i).forEach(r=>{const a=i[r];if(n&&(r=`${n}[${r}]`),!(!(a instanceof Object)||a instanceof Date||a instanceof File))return t(e)(r)(a);e.append(r,a)}),e))(e)()(t)},toInt:function(t){if(!0===t)return 1;if(!1===t)return 0;let e=parseInt(t);return isNaN(e)?0:e},uploadFileProgress:async function(t,e,n,i){return new Promise((r,a)=>{let o;if(e instanceof FormData)o=e;else{o=new FormData;for(let t in e)o.append(t,e[t])}var s=new XMLHttpRequest;this.isFunction(i)&&i(s),s.upload.addEventListener("progress",(function(t){var e=Math.round(t.loaded/t.total*100,2);n(t,e,t.loaded,t.total)}),!1),s.addEventListener("load",(function(t){t.stopPropagation(),t.preventDefault()}),!1),s.addEventListener("error",(function(t){t.stopPropagation(),t.preventDefault(),"onError"in options&&a(t)}),!1),s.addEventListener("abort",(function(t){t.stopPropagation(),t.preventDefault(),"onAbort"in options&&a(t)}),!1),s.open("POST",t),s.onreadystatechange=function(){4===s.readyState&&r(s)},s.send(o)})},url_merge_params:function(t,e,n=!0){let i=t.split("?",2),r="",a=i.shift();1===i.length&&(r=i.shift());let o=this.queryStringToObject(r),s=this.extend(o,e),l=this.objectToQueryString(s,n);return l.length>0&&(a+="?"+l),a},_serialize:function(t,e,n){var i,r=[];for(i in t)if(t.hasOwnProperty(i)){var a=n?n+"["+i+"]":i,o=t[i];null!==o&&"object"==typeof o?r.push(this._serialize(o,e,a)):!0===e?r.push(encodeURIComponent(a)+"="+encodeURIComponent(o)):r.push(a+"="+o)}return r.join("&")},_testTypes:function(){console.log(Object.prototype.toString.call([])),console.log(Object.prototype.toString.call({})),console.log(Object.prototype.toString.call("")),console.log(Object.prototype.toString.call(new Date)),console.log(Object.prototype.toString.call(1)),console.log(Object.prototype.toString.call((function(){}))),console.log(Object.prototype.toString.call(/test/i)),console.log(Object.prototype.toString.call(!0)),console.log(Object.prototype.toString.call(null)),console.log(Object.prototype.toString.call())},_compareBuffers:function(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;const n=new DataView(t),i=new DataView(e);for(var r=t.byteLength;r--;)if(n.getUint8(r)!==i.getUint8(r))return!1;return!0},_parse_str:function(t,e){var n,i,r,a,o,s,l,c,u,d,h,p,f,m=String(t).replace(/^&/,"").replace(/&$/,"").split("&"),g=m.length,v=function(t){return decodeURIComponent(t.replace(/\+/g,"%20"))},b="undefined"!=typeof window?window:pt;b.$locutus=b.$locutus||{};var y=b.$locutus;for(y.php=y.php||{},e||(e=b),n=0;n<g;n++){for(u=v((c=m[n].split("="))[0]),d=c.length<2?"":v(c[1]);" "===u.charAt(0);)u=u.slice(1);if(u.indexOf("\0")>-1&&(u=u.slice(0,u.indexOf("\0"))),u&&"["!==u.charAt(0)){for(p=[],h=0,i=0;i<u.length;i++)if("["!==u.charAt(i)||h){if("]"===u.charAt(i)&&h&&(p.length||p.push(u.slice(0,h-1)),p.push(u.substr(h,i-h)),h=0,"["!==u.charAt(i+1)))break}else h=i+1;for(p.length||(p=[u]),i=0;i<p[0].length&&(" "!==(l=p[0].charAt(i))&&"."!==l&&"["!==l||(p[0]=p[0].substr(0,i)+"_"+p[0].substr(i+1)),"["!==l);i++);for(s=e,i=0,f=p.length;i<f;i++){if(o=s,(""===(u=p[i].replace(/^['"]/,"").replace(/['"]$/,""))||" "===u)&&0!==i){for(a in r=-1,s)s.hasOwnProperty(a)&&+a>r&&a.match(/^\d+$/g)&&(r=+a);u=r+1}Object(s[u])!==s[u]&&(s[u]={}),s=s[u]}o[u]=d}}}};function mt(t,{delay:n=0,duration:i=400,easing:r=e}){const a=+getComputedStyle(t).opacity;return{delay:n,duration:i,easing:r,css:t=>"opacity: "+t*a}}var gt=function(t){return t.replace(/__panda_comma__/g,",",t).trim()};function vt(t,e){var n={};for(let a of t){var[i,r]=a;if("panda__arrays"!==i&&ft.startsWith(i,"panda_"))if(i=i.substr(6),ft.inArray(i,e)){!1===ft.arrayKeyExists(i,n)&&(n[i]=[]);let t=r.split(",");for(let e in t){let r=gt(t[e]);n[i].push(r)}}else r=gt(r),n[i]=r}return n}var bt={getPandaHeaders:function(t){var e=[];return t.has("panda__arrays")&&(e=t.get("panda__arrays").split(",")),vt(t,e)},getPandaHeadersByXMLHttpRequest:function(t){var e=t.getAllResponseHeaders().trim().split(/[\r\n]+/),n={};e.forEach((function(t){let e=t.split(": "),i=e.shift(),r=e.join(": ");n[i]=r}));var i=[];return"panda__arrays"in n&&(i=n.panda__arrays.split(",")),vt(Object.entries(n),i)}};class yt{constructor(){this.events=null,this.rules=[],this.translatee=null}addRule(t){this.rules.push(t)}setTranslator(t){this.translatee=t}test(t){var e;for(var n in this.rules){if(!0!==(e=(0,this.rules[n])(t)))return e}return!0}init(t){if(t.hasOwnProperty("maxFileSize")&&-1!==t.maxFileSize){var e=ft.convertHumanSizeToBytes(t.maxFileSize);this.addRule(t=>{if(t.size>e){var n={fileName:"<strong>"+t.name+"</strong>",maxSize:ft.humanSize(e),fileSize:ft.humanSize(t.size)};return this.translatee._("err.maxFileExceeded",n)}return!0})}if(t.hasOwnProperty("maxFileNameLength")&&this.addRule(e=>{if(e.name.length>t.maxFileNameLength){var n={fileName:"<strong>"+e.name+"</strong>",maxLength:t.maxFileNameLength,length:e.name.length};return this.translatee._("err.maxFileNameLength",n)}return!0}),t.hasOwnProperty("mimeType")&&null!==t.mimeType){var n=t.mimeType;"string"==typeof n&&(n=[n]),this.addRule(t=>{if(-1===n.indexOf(t.type)){var e={fileName:"<strong>"+t.name+"</strong>",fileMimeType:"<strong>"+t.type+"</strong>",allowedMimeTypes:n.join(", ")};return this.translatee._("err.wrongMimeType",e)}return!0})}if(t.hasOwnProperty("allowedFileExtension")&&null!==t.allowedFileExtension){var i=t.allowedFileExtension;"string"==typeof i&&(i=[i]),this.addRule(t=>{t.name;var e=ft.getFileExtension(t.name);if(-1===i.indexOf(e)){var n={fileName:"<strong>"+t.name+"</strong>",fileExtension:"<strong>"+e+"</strong>",allowedFileExtensions:i.join(", ")};return this.translatee._("err.wrongFileExtension",n)}return!0})}}}class wt{constructor(){this.nbItems=0,this.totalWeight=0,this.slots={}}registerItems(t){this.nbItems=0,this.totalWeight=0,this.slots={};for(let e of t)2===e.status&&(this.slots[e.id]=0,this.totalWeight+=e.size,this.nbItems++)}addProgress(t,e){var n=Math.round(100/this.nbItems,2);this.slots[t]=e*n/100}getPercent(){var t=0;for(var e in this.slots)t+=this.slots[e];return t}getTotalWeight(){return this.totalWeight}}var xt=class{constructor(){this.dictionaries={},this.pluralSelectors={},this.defaultLang="eng",this.strictMode=!0}setDefaultLang(t){this.defaultLang=t}setStrictMode(t){this.strictMode=t}addDictionary(t,e,n=null){null===n&&(n=this._getDefaultPluralSelector(t)),this.pluralSelectors[t]=n,this.dictionaries[t]=e}_(t,e={},n=null){if(null===n&&(n=this.defaultLang),n in this.dictionaries){var i=this.dictionaries[n];if(t in i){var r=i[t][0];for(var a in e)r=r.replace("{"+a+"}",e[a]);return r}return!0===this.strictMode&&this._error(`Message not found with id = ${t} and langId = ${n}.`),t}return!0===this.strictMode&&this._error(`Dictionary not loaded with langId = ${n}.`),t}_n(t,e,n={},i=null){if(null===i&&(i=this.defaultLang),i in this.dictionaries){var r=this.dictionaries[i];if(t in r){var a=(0,this.pluralSelectors[i])(e);if(a<r[t].length){var o=r[t][a];for(var s in n)o=o.replace("{"+s+"}",n[s]);return o=o.replace("{x}",e)}return!0===this.strictMode&&this._error(`Plural form not found with id = ${t}, pluralIndex=${a} and langId = ${i}.`),t}return!0===this.strictMode&&this._error(`Message not found with id = ${t} and langId = ${i}.`),t}return!0===this.strictMode&&this._error(`Dictionary not loaded with langId = ${i}.`),t}_error(t){throw new Error("Translatee error: "+t)}_getDefaultPluralSelector(t){switch(t){case"en":case"eng":case"fr":case"fra":default:return function(t){return 1===t?0:1}}}};var Ct=class{constructor(t){this.options=Object.assign({container:null,cssClass:"dropzone-hover",onDrop:function(t){console.log("the files have been dropped.",t)}},t),this.container=this.options.container}start(){const t=this.options.cssClass,e=this.options.onDrop,n=this.container;n.addEventListener("dragstart",(function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.effectAllowed="copyMove"}),!1),n.addEventListener("dragenter",(function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"}),!1),n.addEventListener("dragleave",(function(e){e.stopPropagation(),e.preventDefault(),n.classList.remove(t)}),!1),n.addEventListener("dragover",(function(e){e.stopPropagation(),e.preventDefault(),!1===n.classList.contains(t)&&n.classList.add(t),e.dataTransfer.dropEffect="copy"}),!1),n.addEventListener("drop",(function(i){i.stopPropagation(),i.preventDefault(),n.classList.remove(t);const r=i.dataTransfer.files;let a=[];for(let t=0;t<r.length;t++)a.push(r[t]);e(a)}),!1)}};var Et=class{constructor(t){this.timer=t.timer||1,this.sliceSize=t.chunkSize||5242880,this.serverUrl=t.serverUrl||"/chunk-uploader.php",this.onChunkLoaded=t.onChunkLoaded||function(t,e,n,i){let r=Math.round(e/n*100,2);console.log(r+"% of the chunks loaded")},this.onChunkAborted=t.onChunkAborted||function(t,e,n){console.log(`The chunk has been aborted: ${t}-${e}, isLastChunk=${n}.`)},this.onChunkResponseReceived=t.onChunkResponseReceived||async function(t){return!0},this._xhr=null,this.controller=new AbortController,this._is_aborted=!1,this._chunkFailed=!1}abort(){this._is_aborted=!0,null!==this._xhr?this._xhr.abort():this.controller.abort()}async sendByChunks(t,e,n){var i=n.start||0;return this._is_aborted=!1,this._chunkFailed=!1,new Promise((n,r)=>{var a=this,o=t.size;setTimeout((async function s(){var l=!1,c=i+a.sliceSize;o-c<=0&&(l=!0,c=o);var u=a._slice(t,i,c);!1===a._chunkFailed&&(await a._send(n,r,u,i,c,o,l,e),c<o&&(i+=a.sliceSize,setTimeout(s,a.timer)))}),this.timer)})}async _send(t,e,n,i,r,a,o,s){var l=new FormData;return l.append("start",i),l.append("end",r),l.append("file",n),l.append("last_chunk",o?1:0),l=ft.toFormData(s,l),this._sendViaFetch(t,e,l,i,r,a,o)}_slice(t,e,n){return(t.mozSlice?t.mozSlice:t.webkitSlice?t.webkitSlice:t.slice?t.slice:this._noop).bind(t)(e,n)}_noop(){}_sendViaFetch(t,e,n,i,r,a,o){return new Promise(async(e,s)=>{let l=`ChunkUploader: an error occurred with the chunk request (start:${i}, end: ${r}).`;var c=await fetch(this.serverUrl,{body:n,method:"POST",signal:this.controller.signal}).catch(t=>{!0===this._is_aborted?this.onChunkAborted(i,r,o):s(l)});if(!0===this._is_aborted)this.onChunkAborted(i,r,o);else if(!0===c.ok){let n=await this.onChunkResponseReceived(c.clone());!0===n?(this.onChunkLoaded(i,r,a,o),e(),!0===o&&t(c)):("string"==typeof n&&(l=n),s(l))}else s(l)}).catch(t=>{e(t),this._chunkFailed=!0})}_sendViaXMLHttpRequest(t,e,n,i,r,a,o){return new Promise((s,l)=>{var c=new XMLHttpRequest;this._xhr=c,c.open("POST",this.serverUrl,!0),c.addEventListener("error",t=>{t.stopPropagation(),t.preventDefault();let n=`ChunkUploader: an error occurred with the chunk request (start:${i}, end: ${r}).`;l(n),e(n)},!1),c.onreadystatechange=()=>{4===c.readyState&&(this.onChunkLoaded(i,r,a,o),s(),!0===o&&t(c))},c.send(n)})}},_t=function(t,e){return Array.prototype.slice.call(t,e)},kt="function"==typeof setImmediate?function(t){setImmediate(t)}:function(t){setTimeout(t,0)},Mt=function(t,e,n){t&&kt((function(){t.apply(n||null,e||[])}))},Ot=function(t,e){var n=e||{},i={};return void 0===t&&(t={}),t.on=function(e,n){return i[e]?i[e].push(n):i[e]=[n],t},t.once=function(e,n){return n._once=!0,t.on(e,n),t},t.off=function(e,n){var r=arguments.length;if(1===r)delete i[e];else if(0===r)i={};else{var a=i[e];if(!a)return t;a.splice(a.indexOf(n),1)}return t},t.emit=function(){var e=_t(arguments);return t.emitterSnapshot(e.shift()).apply(this,e)},t.emitterSnapshot=function(e){var r=(i[e]||[]).slice(0);return function(){var i=_t(arguments),a=this||t;if("error"===e&&!1!==n.throws&&!r.length)throw 1===i.length?i[0]:i;return r.forEach((function(r){n.async?Mt(r,i,a):r.apply(a,i),r._once&&t.off(e,r)})),t}},t},Dt=pt.CustomEvent;var Tt=function(){try{var t=new Dt("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}()?Dt:"function"==typeof document.createEvent?function(t,e){var n=document.createEvent("CustomEvent");return e?n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail):n.initCustomEvent(t,!1,!1,void 0),n}:function(t,e){var n=document.createEventObject();return n.type=t,e?(n.bubbles=Boolean(e.bubbles),n.cancelable=Boolean(e.cancelable),n.detail=e.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n},St=[],$t="",Lt=/^on/;for($t in pt)Lt.test($t)&&St.push($t.slice(2));var Bt=St,zt=pt.document,jt=function(t,e,n,i){return t.addEventListener(e,n,i)},Ft=function(t,e,n,i){return t.removeEventListener(e,n,i)},Nt=[];pt.addEventListener||(jt=function(t,e,n){return t.attachEvent("on"+e,function(t,e,n){var i=Ht(t,e,n)||function(t,e,n){return function(e){var i=e||pt.event;i.target=i.target||i.srcElement,i.preventDefault=i.preventDefault||function(){i.returnValue=!1},i.stopPropagation=i.stopPropagation||function(){i.cancelBubble=!0},i.which=i.which||i.keyCode,n.call(t,i)}}(t,0,n);return Nt.push({wrapper:i,element:t,type:e,fn:n}),i}(t,e,n))},Ft=function(t,e,n){var i=Ht(t,e,n);if(i)return t.detachEvent("on"+e,i)});var It={add:jt,remove:Ft,fabricate:function(t,e,n){var i=-1===Bt.indexOf(e)?new Tt(e,{detail:n}):function(){var t;zt.createEvent?(t=zt.createEvent("Event")).initEvent(e,!0,!0):zt.createEventObject&&(t=zt.createEventObject());return t}();t.dispatchEvent?t.dispatchEvent(i):t.fireEvent("on"+e,i)}};function Ht(t,e,n){var i=function(t,e,n){var i,r;for(i=0;i<Nt.length;i++)if((r=Nt[i]).element===t&&r.type===e&&r.fn===n)return i}(t,e,n);if(i){var r=Nt[i].wrapper;return Nt.splice(i,1),r}}var Rt={};function Pt(t){var e=Rt[t];return e?e.lastIndex=0:Rt[t]=e=new RegExp("(?:^|\\s)"+t+"(?:\\s|$)","g"),e}var At={add:function(t,e){var n=t.className;n.length?Pt(e).test(n)||(t.className+=" "+e):t.className=e},rm:function(t,e){t.className=t.className.replace(Pt(e)," ").trim()}},Ut=document,Wt=Ut.documentElement;function Xt(t,e,n,i){pt.navigator.pointerEnabled?It[e](t,{mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"}[n],i):pt.navigator.msPointerEnabled?It[e](t,{mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"}[n],i):(It[e](t,{mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"}[n],i),It[e](t,n,i))}function Yt(t){if(void 0!==t.touches)return t.touches.length;if(void 0!==t.which&&0!==t.which)return t.which;if(void 0!==t.buttons)return t.buttons;var e=t.button;return void 0!==e?1&e?1:2&e?3:4&e?2:0:void 0}function qt(t){var e=t.getBoundingClientRect();return{left:e.left+Kt("scrollLeft","pageXOffset"),top:e.top+Kt("scrollTop","pageYOffset")}}function Kt(t,e){return void 0!==pt[e]?pt[e]:Wt.clientHeight?Wt[t]:Ut.body[t]}function Vt(t,e,n){var i,r=t||{},a=r.className;return r.className+=" gu-hide",i=Ut.elementFromPoint(e,n),r.className=a,i}function Qt(){return!1}function Zt(){return!0}function Gt(t){return t.width||t.right-t.left}function Jt(t){return t.height||t.bottom-t.top}function te(t){return t.parentNode===Ut?null:t.parentNode}function ee(t){return"INPUT"===t.tagName||"TEXTAREA"===t.tagName||"SELECT"===t.tagName||function t(e){if(!e)return!1;if("false"===e.contentEditable)return!1;if("true"===e.contentEditable)return!0;return t(te(e))}(t)}function ne(t){return t.nextElementSibling||function(){var e=t;do{e=e.nextSibling}while(e&&1!==e.nodeType);return e}()}function ie(t,e){var n=function(t){return t.targetTouches&&t.targetTouches.length?t.targetTouches[0]:t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t}(e),i={pageX:"clientX",pageY:"clientY"};return t in i&&!(t in n)&&i[t]in n&&(t=i[t]),n[t]}var re=function(t,e){var n,i,r,a,o,s,l,c,u,d,h,p=arguments.length;1===p&&!1===Array.isArray(t)&&(e=t,t=[]);var f,m=null,g=e||{};void 0===g.moves&&(g.moves=Zt),void 0===g.accepts&&(g.accepts=Zt),void 0===g.invalid&&(g.invalid=S),void 0===g.containers&&(g.containers=t||[]),void 0===g.isContainer&&(g.isContainer=Qt),void 0===g.copy&&(g.copy=!1),void 0===g.copySortSource&&(g.copySortSource=!1),void 0===g.revertOnSpill&&(g.revertOnSpill=!1),void 0===g.removeOnSpill&&(g.removeOnSpill=!1),void 0===g.direction&&(g.direction="vertical"),void 0===g.ignoreInputTextSelection&&(g.ignoreInputTextSelection=!0),void 0===g.mirrorContainer&&(g.mirrorContainer=Ut.body);var v=Ot({containers:g.containers,start:D,end:$,cancel:F,remove:j,destroy:C,canMove:O,dragging:!1});return!0===g.removeOnSpill&&v.on("over",P).on("out",A),y(),v;function b(t){return-1!==v.containers.indexOf(t)||g.isContainer(t)}function y(t){var e=t?"remove":"add";Xt(Wt,e,"mousedown",_),Xt(Wt,e,"mouseup",B)}function w(t){Xt(Wt,t?"remove":"add","mousemove",k)}function x(t){var e=t?"remove":"add";It[e](Wt,"selectstart",E),It[e](Wt,"click",E)}function C(){y(!0),B({})}function E(t){f&&t.preventDefault()}function _(t){if(s=t.clientX,l=t.clientY,!(1!==Yt(t)||t.metaKey||t.ctrlKey)){var e=t.target,n=M(e);n&&(f=n,w(),"mousedown"===t.type&&(ee(e)?e.focus():t.preventDefault()))}}function k(t){if(f)if(0!==Yt(t)){if(void 0===t.clientX||t.clientX!==s||void 0===t.clientY||t.clientY!==l){if(g.ignoreInputTextSelection){var e=ie("clientX",t),n=ie("clientY",t);if(ee(Ut.elementFromPoint(e,n)))return}var i=f;w(!0),x(),$(),T(i);var c=qt(r);a=ie("pageX",t)-c.left,o=ie("pageY",t)-c.top,At.add(d||r,"gu-transit"),U(),R(t)}}else B({})}function M(t){if(!(v.dragging&&n||b(t))){for(var e=t;te(t)&&!1===b(te(t));){if(g.invalid(t,e))return;if(!(t=te(t)))return}var i=te(t);if(i)if(!g.invalid(t,e))if(g.moves(t,i,e,ne(t)))return{item:t,source:i}}}function O(t){return!!M(t)}function D(t){var e=M(t);e&&T(e)}function T(t){q(t.item,t.source)&&(d=t.item.cloneNode(!0),v.emit("cloned",d,t.item,"copy")),i=t.source,r=t.item,c=u=ne(t.item),v.dragging=!0,v.emit("drag",r,i)}function S(){return!1}function $(){if(v.dragging){var t=d||r;z(t,te(t))}}function L(){f=!1,w(!0),x(!0)}function B(t){if(L(),v.dragging){var e=d||r,a=ie("clientX",t),o=ie("clientY",t),s=H(Vt(n,a,o),a,o);s&&(d&&g.copySortSource||!d||s!==i)?z(e,s):g.removeOnSpill?j():F()}}function z(t,e){var n=te(t);d&&g.copySortSource&&e===i&&n.removeChild(r),I(e)?v.emit("cancel",t,i,i):v.emit("drop",t,e,i,u),N()}function j(){if(v.dragging){var t=d||r,e=te(t);e&&e.removeChild(t),v.emit(d?"cancel":"remove",t,e,i),N()}}function F(t){if(v.dragging){var e=arguments.length>0?t:g.revertOnSpill,n=d||r,a=te(n),o=I(a);!1===o&&e&&(d?a&&a.removeChild(d):i.insertBefore(n,c)),o||e?v.emit("cancel",n,i,i):v.emit("drop",n,a,i,u),N()}}function N(){var t=d||r;L(),W(),t&&At.rm(t,"gu-transit"),h&&clearTimeout(h),v.dragging=!1,m&&v.emit("out",t,m,i),v.emit("dragend",t),i=r=d=c=u=h=m=null}function I(t,e){var a;return a=void 0!==e?e:n?u:ne(d||r),t===i&&a===c}function H(t,e,n){for(var a=t;a&&!o();)a=te(a);return a;function o(){if(!1===b(a))return!1;var o=X(a,t),s=Y(a,o,e,n);return!!I(a,s)||g.accepts(r,a,i,s)}}function R(t){if(n){t.preventDefault();var e=ie("clientX",t),s=ie("clientY",t),l=e-a,h=s-o;n.style.left=l+"px",n.style.top=h+"px";var p=d||r,f=Vt(n,e,s),b=H(f,e,s),y=null!==b&&b!==m;(y||null===b)&&(m&&E("out"),m=b,y&&E("over"));var w=te(p);if(b!==i||!d||g.copySortSource){var x,C=X(b,f);if(null!==C)x=Y(b,C,e,s);else{if(!0!==g.revertOnSpill||d)return void(d&&w&&w.removeChild(p));x=c,b=i}(null===x&&y||x!==p&&x!==ne(p))&&(u=x,b.insertBefore(p,x),v.emit("shadow",p,b,i))}else w&&w.removeChild(p)}function E(t){v.emit(t,p,m,i)}}function P(t){At.rm(t,"gu-hide")}function A(t){v.dragging&&At.add(t,"gu-hide")}function U(){if(!n){var t=r.getBoundingClientRect();(n=r.cloneNode(!0)).style.width=Gt(t)+"px",n.style.height=Jt(t)+"px",At.rm(n,"gu-transit"),At.add(n,"gu-mirror"),g.mirrorContainer.appendChild(n),Xt(Wt,"add","mousemove",R),At.add(g.mirrorContainer,"gu-unselectable"),v.emit("cloned",n,r,"mirror")}}function W(){n&&(At.rm(g.mirrorContainer,"gu-unselectable"),Xt(Wt,"remove","mousemove",R),te(n).removeChild(n),n=null)}function X(t,e){for(var n=e;n!==t&&te(n)!==t;)n=te(n);return n===Wt?null:n}function Y(t,e,n,i){var r="horizontal"===g.direction;return e!==t?function(){var t=e.getBoundingClientRect();if(r)return a(n>t.left+Gt(t)/2);return a(i>t.top+Jt(t)/2)}():function(){var e,a,o,s=t.children.length;for(e=0;e<s;e++){if(a=t.children[e],o=a.getBoundingClientRect(),r&&o.left+o.width/2>n)return a;if(!r&&o.top+o.height/2>i)return a}return null}();function a(t){return t?ne(e):e}}function q(t,e){return"boolean"==typeof g.copy?g.copy:g.copy(t,e)}};const ae=[];function oe(t,e={}){let n,i,r=Object.assign({startClick:"main",onStartDragBefore:function(t){}},e),a=!1;function o(e){let o=r.startClick;!1===Array.isArray(r.startClick)&&(o=[r.startClick]),o=o.map(t=>{let e;switch(t){case"main":e=0;break;case"aux":e=1;break;case"secondary":e=2}return e}),!1!==o.includes(e.button)&&!1!==r.onStartDragBefore(e)&&(a=!0,n=e.clientX,i=e.clientY,t.dispatchEvent(new CustomEvent("dragstart",{detail:{x:n,y:i}})),window.addEventListener("mousemove",s),window.addEventListener("mouseup",l))}function s(e){if(!1===a)return;const r=e.clientX-n,o=e.clientY-i;n=e.clientX,i=e.clientY,t.dispatchEvent(new CustomEvent("dragmove",{detail:{x:n,y:i,dx:r,dy:o}}))}function l(e){a=!1,n=e.clientX,i=e.clientY,t.dispatchEvent(new CustomEvent("dragend",{detail:{x:n,y:i}})),window.removeEventListener("mousemove",s),window.removeEventListener("mouseup",l)}return t.addEventListener("mousedown",o),{destroy(){t.removeEventListener("mousedown",o)}}}function se(e){let n,i,o,s,u,d;const h=e[9].default,p=function(t,e,n,i){if(t){const r=l(t,e,n,i);return t[0](r)}}(h,e,e[8],null);return{c(){n=w("div"),p&&p.c(),M(n,"style",i="\n        "+e[0]+"\n        transform: translate("+e[1].x+"px,"+e[1].y+"px)\n        ")},m(i,r){var l;v(i,n,r),p&&p.m(n,null),s=!0,u||(d=[(l=o=oe.call(null,n,e[3]),l&&a(l.destroy)?l.destroy:t),_(n,"dragstart",e[5]),_(n,"dragmove",e[4]),_(n,"dragend",ce)],u=!0)},p(t,[e]){p&&p.p&&256&e&&c(p,h,t,t[8],e,null,null),(!s||3&e&&i!==(i="\n        "+t[0]+"\n        transform: translate("+t[1].x+"px,"+t[1].y+"px)\n        "))&&M(n,"style",i)},i(t){s||(et(p,t),s=!0)},o(t){nt(p,t),s=!1},d(t){t&&b(n),p&&p.d(t),u=!1,r(d)}}}const le="my-draggable-tmp-style";function ce(t){this.classList.remove("draggable-unselectable");let e=document.getElementById(le);null!==e&&e.remove()}function ue(e,n,i){let r,{$$slots:a={},$$scope:l}=n,{options:c={}}=n,{open:u=!0}=n,d=0,h=0,p=0,f=0;const m=function(e,n=t){let i;const r=[];function a(t){if(o(e,t)&&(e=t,i)){const t=!ae.length;for(let t=0;t<r.length;t+=1){const n=r[t];n[1](),ae.push(n,e)}if(t){for(let t=0;t<ae.length;t+=2)ae[t][0](ae[t+1]);ae.length=0}}}return{set:a,update:function(t){a(t(e))},subscribe:function(o,s=t){const l=[o,s];return r.push(l),1===r.length&&(i=n(a)||t),o(e),()=>{const t=r.indexOf(l);-1!==t&&r.splice(t,1),0===r.length&&(i(),i=null)}}}}({x:0,y:0});s(e,m,t=>i(1,r=t));const g=function(){const t=N();return(e,n)=>{const i=t.$$.callbacks[e];if(i){const r=S(e,n);i.slice().forEach(e=>{e.call(t,r)})}}}();let v={startClick:"main",onStartDragBefore(t){if(null!==y.dragHandle){if(null===t.target.closest(y.dragHandle))return!1}}},b="",y=Object.assign({dragHandle:null,keepInViewport:!0},c);var w;return function(){if("function"==typeof window.CustomEvent)return!1;window.CustomEvent=function(t,e){e=e||{bubbles:!1,cancelable:!1,detail:null};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}}(),w=()=>{i(0,b=!0===u?"":"display: none;")},N().$$.before_update.push(w),e.$$set=t=>{"options"in t&&i(7,c=t.options),"open"in t&&i(6,u=t.open),"$$scope"in t&&i(8,l=t.$$scope)},[b,r,m,v,function(t){m.update(e=>{let n=e.x+t.detail.dx,i=e.y+t.detail.dy;return!0===y.keepInViewport&&(n<f&&(n=f),n>h&&(n=h),i<d&&(i=d),i>p&&(i=p)),{x:n,y:i}}),g("dragmove",t.detail)},function(t){let e=document.getElementById(le);if(null===e){var n=document.getElementsByTagName("head")[0];e=document.createElement("style"),e.type="text/css",n.appendChild(e),e.id=le,e.innerHTML=".draggable-unselectable > * {user-select: none;}"}if(this.classList.add("draggable-unselectable"),!0===y.keepInViewport){let e=t.target.firstChild.getBoundingClientRect();f=-e.left+r.x,h=window.innerWidth-e.right+r.x,d=-e.top+r.y,p=window.innerHeight-e.bottom+r.y}},u,c,l,a]}class de extends ht{constructor(t){super(),dt(this,t,ue,se,o,{options:7,open:6})}}var he=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t,e){
/*!
     * Cropper.js v1.5.6
     * https://fengyuanchen.github.io/cropperjs
     *
     * Copyright 2015-present Chen Fengyuan
     * Released under the MIT license
     *
     * Date: 2019-10-04T04:33:48.372Z
     */
t.exports=function(){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(n,!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function o(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var s="undefined"!=typeof window&&void 0!==window.document,l=s?window:{},c=!!s&&"ontouchstart"in l.document.documentElement,u=!!s&&"PointerEvent"in l,d="".concat("cropper","-crop"),h="".concat("cropper","-disabled"),p="".concat("cropper","-hidden"),f="".concat("cropper","-hide"),m="".concat("cropper","-invisible"),g="".concat("cropper","-modal"),v="".concat("cropper","-move"),b="".concat("cropper","Action"),y="".concat("cropper","Preview"),w=c?"touchstart":"mousedown",x=c?"touchmove":"mousemove",C=c?"touchend touchcancel":"mouseup",E=u?"pointerdown":w,_=u?"pointermove":x,k=u?"pointerup pointercancel":C,M=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,O=/^data:/,D=/^data:image\/jpeg;base64,/,T=/^img|canvas$/i,S={viewMode:0,dragMode:"crop",initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},$=Number.isNaN||l.isNaN;function L(t){return"number"==typeof t&&!$(t)}var B=function(t){return t>0&&t<1/0};function z(t){return void 0===t}function j(e){return"object"===t(e)&&null!==e}var F=Object.prototype.hasOwnProperty;function N(t){if(!j(t))return!1;try{var e=t.constructor,n=e.prototype;return e&&n&&F.call(n,"isPrototypeOf")}catch(t){return!1}}function I(t){return"function"==typeof t}var H=Array.prototype.slice;function R(t){return Array.from?Array.from(t):H.call(t)}function P(t,e){return t&&I(e)&&(Array.isArray(t)||L(t.length)?R(t).forEach((function(n,i){e.call(t,n,i,t)})):j(t)&&Object.keys(t).forEach((function(n){e.call(t,t[n],n,t)}))),t}var A=Object.assign||function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return j(t)&&n.length>0&&n.forEach((function(e){j(e)&&Object.keys(e).forEach((function(n){t[n]=e[n]}))})),t},U=/\.\d*(?:0|9){12}\d*$/;function W(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return U.test(t)?Math.round(t*e)/e:t}var X=/^width|height|left|top|marginLeft|marginTop$/;function Y(t,e){var n=t.style;P(e,(function(t,e){X.test(e)&&L(t)&&(t="".concat(t,"px")),n[e]=t}))}function q(t,e){if(e)if(L(t.length))P(t,(function(t){q(t,e)}));else if(t.classList)t.classList.add(e);else{var n=t.className.trim();n?n.indexOf(e)<0&&(t.className="".concat(n," ").concat(e)):t.className=e}}function K(t,e){e&&(L(t.length)?P(t,(function(t){K(t,e)})):t.classList?t.classList.remove(e):t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,"")))}function V(t,e,n){e&&(L(t.length)?P(t,(function(t){V(t,e,n)})):n?q(t,e):K(t,e))}var Q=/([a-z\d])([A-Z])/g;function Z(t){return t.replace(Q,"$1-$2").toLowerCase()}function G(t,e){return j(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(Z(e)))}function J(t,e,n){j(n)?t[e]=n:t.dataset?t.dataset[e]=n:t.setAttribute("data-".concat(Z(e)),n)}var tt=/\s\s*/,et=function(){var t=!1;if(s){var e=!1,n=function(){},i=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(t){e=t}});l.addEventListener("test",n,i),l.removeEventListener("test",n,i)}return t}();function nt(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=n;e.trim().split(tt).forEach((function(e){if(!et){var a=t.listeners;a&&a[e]&&a[e][n]&&(r=a[e][n],delete a[e][n],0===Object.keys(a[e]).length&&delete a[e],0===Object.keys(a).length&&delete t.listeners)}t.removeEventListener(e,r,i)}))}function it(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=n;e.trim().split(tt).forEach((function(e){if(i.once&&!et){var a=t.listeners,o=void 0===a?{}:a;r=function(){delete o[e][n],t.removeEventListener(e,r,i);for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];n.apply(t,s)},o[e]||(o[e]={}),o[e][n]&&t.removeEventListener(e,o[e][n],i),o[e][n]=r,t.listeners=o}t.addEventListener(e,r,i)}))}function rt(t,e,n){var i;return I(Event)&&I(CustomEvent)?i=new CustomEvent(e,{detail:n,bubbles:!0,cancelable:!0}):(i=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,n),t.dispatchEvent(i)}function at(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var ot=l.location,st=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function lt(t){var e=t.match(st);return null!==e&&(e[1]!==ot.protocol||e[2]!==ot.hostname||e[3]!==ot.port)}function ct(t){var e="timestamp=".concat((new Date).getTime());return t+(-1===t.indexOf("?")?"?":"&")+e}function ut(t){var e=t.rotate,n=t.scaleX,i=t.scaleY,r=t.translateX,a=t.translateY,o=[];L(r)&&0!==r&&o.push("translateX(".concat(r,"px)")),L(a)&&0!==a&&o.push("translateY(".concat(a,"px)")),L(e)&&0!==e&&o.push("rotate(".concat(e,"deg)")),L(n)&&1!==n&&o.push("scaleX(".concat(n,")")),L(i)&&1!==i&&o.push("scaleY(".concat(i,")"));var s=o.length?o.join(" "):"none";return{WebkitTransform:s,msTransform:s,transform:s}}function dt(t,e){var n=t.pageX,i=t.pageY,r={endX:n,endY:i};return e?r:a({startX:n,startY:i},r)}function ht(t){var e=t.aspectRatio,n=t.height,i=t.width,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",a=B(i),o=B(n);if(a&&o){var s=n*e;"contain"===r&&s>i||"cover"===r&&s<i?n=i/e:i=n*e}else a?n=i/e:o&&(i=n*e);return{width:i,height:n}}function pt(t,e,n,i){var r=e.aspectRatio,a=e.naturalWidth,s=e.naturalHeight,l=e.rotate,c=void 0===l?0:l,u=e.scaleX,d=void 0===u?1:u,h=e.scaleY,p=void 0===h?1:h,f=n.aspectRatio,m=n.naturalWidth,g=n.naturalHeight,v=i.fillColor,b=void 0===v?"transparent":v,y=i.imageSmoothingEnabled,w=void 0===y||y,x=i.imageSmoothingQuality,C=void 0===x?"low":x,E=i.maxWidth,_=void 0===E?1/0:E,k=i.maxHeight,M=void 0===k?1/0:k,O=i.minWidth,D=void 0===O?0:O,T=i.minHeight,S=void 0===T?0:T,$=document.createElement("canvas"),L=$.getContext("2d"),B=ht({aspectRatio:f,width:_,height:M}),z=ht({aspectRatio:f,width:D,height:S},"cover"),j=Math.min(B.width,Math.max(z.width,m)),F=Math.min(B.height,Math.max(z.height,g)),N=ht({aspectRatio:r,width:_,height:M}),I=ht({aspectRatio:r,width:D,height:S},"cover"),H=Math.min(N.width,Math.max(I.width,a)),R=Math.min(N.height,Math.max(I.height,s)),P=[-H/2,-R/2,H,R];return $.width=W(j),$.height=W(F),L.fillStyle=b,L.fillRect(0,0,j,F),L.save(),L.translate(j/2,F/2),L.rotate(c*Math.PI/180),L.scale(d,p),L.imageSmoothingEnabled=w,L.imageSmoothingQuality=C,L.drawImage.apply(L,[t].concat(o(P.map((function(t){return Math.floor(W(t))}))))),L.restore(),$}var ft=String.fromCharCode,mt=/^data:.*,/;function gt(t){var e,n=new DataView(t);try{var i,r,a;if(255===n.getUint8(0)&&216===n.getUint8(1))for(var o=n.byteLength,s=2;s+1<o;){if(255===n.getUint8(s)&&225===n.getUint8(s+1)){r=s;break}s+=1}if(r){var l=r+10;if("Exif"===function(t,e,n){var i="";n+=e;for(var r=e;r<n;r+=1)i+=ft(t.getUint8(r));return i}(n,r+4,4)){var c=n.getUint16(l);if(((i=18761===c)||19789===c)&&42===n.getUint16(l+2,i)){var u=n.getUint32(l+4,i);u>=8&&(a=l+u)}}}if(a){var d,h,p=n.getUint16(a,i);for(h=0;h<p;h+=1)if(d=a+12*h+2,274===n.getUint16(d,i)){d+=8,e=n.getUint16(d,i),n.setUint16(d,1,i);break}}}catch(t){e=1}return e}var vt={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,e=this.options,n=this.container,i=this.cropper;q(i,p),K(t,p);var r={width:Math.max(n.offsetWidth,Number(e.minContainerWidth)||200),height:Math.max(n.offsetHeight,Number(e.minContainerHeight)||100)};this.containerData=r,Y(i,{width:r.width,height:r.height}),q(t,p),K(i,p)},initCanvas:function(){var t=this.containerData,e=this.imageData,n=this.options.viewMode,i=Math.abs(e.rotate)%180==90,r=i?e.naturalHeight:e.naturalWidth,a=i?e.naturalWidth:e.naturalHeight,o=r/a,s=t.width,l=t.height;t.height*o>t.width?3===n?s=t.height*o:l=t.width/o:3===n?l=t.width/o:s=t.height*o;var c={aspectRatio:o,naturalWidth:r,naturalHeight:a,width:s,height:l};c.left=(t.width-s)/2,c.top=(t.height-l)/2,c.oldLeft=c.left,c.oldTop=c.top,this.canvasData=c,this.limited=1===n||2===n,this.limitCanvas(!0,!0),this.initialImageData=A({},e),this.initialCanvasData=A({},c)},limitCanvas:function(t,e){var n=this.options,i=this.containerData,r=this.canvasData,a=this.cropBoxData,o=n.viewMode,s=r.aspectRatio,l=this.cropped&&a;if(t){var c=Number(n.minCanvasWidth)||0,u=Number(n.minCanvasHeight)||0;o>1?(c=Math.max(c,i.width),u=Math.max(u,i.height),3===o&&(u*s>c?c=u*s:u=c/s)):o>0&&(c?c=Math.max(c,l?a.width:0):u?u=Math.max(u,l?a.height:0):l&&(c=a.width,(u=a.height)*s>c?c=u*s:u=c/s));var d=ht({aspectRatio:s,width:c,height:u});c=d.width,u=d.height,r.minWidth=c,r.minHeight=u,r.maxWidth=1/0,r.maxHeight=1/0}if(e)if(o>(l?0:1)){var h=i.width-r.width,p=i.height-r.height;r.minLeft=Math.min(0,h),r.minTop=Math.min(0,p),r.maxLeft=Math.max(0,h),r.maxTop=Math.max(0,p),l&&this.limited&&(r.minLeft=Math.min(a.left,a.left+(a.width-r.width)),r.minTop=Math.min(a.top,a.top+(a.height-r.height)),r.maxLeft=a.left,r.maxTop=a.top,2===o&&(r.width>=i.width&&(r.minLeft=Math.min(0,h),r.maxLeft=Math.max(0,h)),r.height>=i.height&&(r.minTop=Math.min(0,p),r.maxTop=Math.max(0,p))))}else r.minLeft=-r.width,r.minTop=-r.height,r.maxLeft=i.width,r.maxTop=i.height},renderCanvas:function(t,e){var n=this.canvasData,i=this.imageData;if(e){var r=function(t){var e=t.width,n=t.height,i=t.degree;if(90==(i=Math.abs(i)%180))return{width:n,height:e};var r=i%90*Math.PI/180,a=Math.sin(r),o=Math.cos(r),s=e*o+n*a,l=e*a+n*o;return i>90?{width:l,height:s}:{width:s,height:l}}({width:i.naturalWidth*Math.abs(i.scaleX||1),height:i.naturalHeight*Math.abs(i.scaleY||1),degree:i.rotate||0}),a=r.width,o=r.height,s=n.width*(a/n.naturalWidth),l=n.height*(o/n.naturalHeight);n.left-=(s-n.width)/2,n.top-=(l-n.height)/2,n.width=s,n.height=l,n.aspectRatio=a/o,n.naturalWidth=a,n.naturalHeight=o,this.limitCanvas(!0,!1)}(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCanvas(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,Y(this.canvas,A({width:n.width,height:n.height},ut({translateX:n.left,translateY:n.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var e=this.canvasData,n=this.imageData,i=n.naturalWidth*(e.width/e.naturalWidth),r=n.naturalHeight*(e.height/e.naturalHeight);A(n,{width:i,height:r,left:(e.width-i)/2,top:(e.height-r)/2}),Y(this.image,A({width:n.width,height:n.height},ut(A({translateX:n.left,translateY:n.top},n)))),t&&this.output()},initCropBox:function(){var t=this.options,e=this.canvasData,n=t.aspectRatio||t.initialAspectRatio,i=Number(t.autoCropArea)||.8,r={width:e.width,height:e.height};n&&(e.height*n>e.width?r.height=r.width/n:r.width=r.height*n),this.cropBoxData=r,this.limitCropBox(!0,!0),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),r.width=Math.max(r.minWidth,r.width*i),r.height=Math.max(r.minHeight,r.height*i),r.left=e.left+(e.width-r.width)/2,r.top=e.top+(e.height-r.height)/2,r.oldLeft=r.left,r.oldTop=r.top,this.initialCropBoxData=A({},r)},limitCropBox:function(t,e){var n=this.options,i=this.containerData,r=this.canvasData,a=this.cropBoxData,o=this.limited,s=n.aspectRatio;if(t){var l=Number(n.minCropBoxWidth)||0,c=Number(n.minCropBoxHeight)||0,u=o?Math.min(i.width,r.width,r.width+r.left,i.width-r.left):i.width,d=o?Math.min(i.height,r.height,r.height+r.top,i.height-r.top):i.height;l=Math.min(l,i.width),c=Math.min(c,i.height),s&&(l&&c?c*s>l?c=l/s:l=c*s:l?c=l/s:c&&(l=c*s),d*s>u?d=u/s:u=d*s),a.minWidth=Math.min(l,u),a.minHeight=Math.min(c,d),a.maxWidth=u,a.maxHeight=d}e&&(o?(a.minLeft=Math.max(0,r.left),a.minTop=Math.max(0,r.top),a.maxLeft=Math.min(i.width,r.left+r.width)-a.width,a.maxTop=Math.min(i.height,r.top+r.height)-a.height):(a.minLeft=0,a.minTop=0,a.maxLeft=i.width-a.width,a.maxTop=i.height-a.height))},renderCropBox:function(){var t=this.options,e=this.containerData,n=this.cropBoxData;(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCropBox(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,t.movable&&t.cropBoxMovable&&J(this.face,b,n.width>=e.width&&n.height>=e.height?"move":"all"),Y(this.cropBox,A({width:n.width,height:n.height},ut({translateX:n.left,translateY:n.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),rt(this.element,"crop",this.getData())}},bt={initPreview:function(){var t=this.element,e=this.crossOrigin,n=this.options.preview,i=e?this.crossOriginUrl:this.url,r=t.alt||"The image to preview",a=document.createElement("img");if(e&&(a.crossOrigin=e),a.src=i,a.alt=r,this.viewBox.appendChild(a),this.viewBoxImage=a,n){var o=n;"string"==typeof n?o=t.ownerDocument.querySelectorAll(n):n.querySelector&&(o=[n]),this.previews=o,P(o,(function(t){var n=document.createElement("img");J(t,y,{width:t.offsetWidth,height:t.offsetHeight,html:t.innerHTML}),e&&(n.crossOrigin=e),n.src=i,n.alt=r,n.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',t.innerHTML="",t.appendChild(n)}))}},resetPreview:function(){P(this.previews,(function(t){var e=G(t,y);Y(t,{width:e.width,height:e.height}),t.innerHTML=e.html,function(t,e){if(j(t[e]))try{delete t[e]}catch(n){t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch(n){t.dataset[e]=void 0}else t.removeAttribute("data-".concat(Z(e)))}(t,y)}))},preview:function(){var t=this.imageData,e=this.canvasData,n=this.cropBoxData,i=n.width,r=n.height,a=t.width,o=t.height,s=n.left-e.left-t.left,l=n.top-e.top-t.top;this.cropped&&!this.disabled&&(Y(this.viewBoxImage,A({width:a,height:o},ut(A({translateX:-s,translateY:-l},t)))),P(this.previews,(function(e){var n=G(e,y),c=n.width,u=n.height,d=c,h=u,p=1;i&&(h=r*(p=c/i)),r&&h>u&&(d=i*(p=u/r),h=u),Y(e,{width:d,height:h}),Y(e.getElementsByTagName("img")[0],A({width:a*p,height:o*p},ut(A({translateX:-s*p,translateY:-l*p},t))))})))}},yt={bind:function(){var t=this.element,e=this.options,n=this.cropper;I(e.cropstart)&&it(t,"cropstart",e.cropstart),I(e.cropmove)&&it(t,"cropmove",e.cropmove),I(e.cropend)&&it(t,"cropend",e.cropend),I(e.crop)&&it(t,"crop",e.crop),I(e.zoom)&&it(t,"zoom",e.zoom),it(n,E,this.onCropStart=this.cropStart.bind(this)),e.zoomable&&e.zoomOnWheel&&it(n,"wheel",this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&it(n,"dblclick",this.onDblclick=this.dblclick.bind(this)),it(t.ownerDocument,_,this.onCropMove=this.cropMove.bind(this)),it(t.ownerDocument,k,this.onCropEnd=this.cropEnd.bind(this)),e.responsive&&it(window,"resize",this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,e=this.options,n=this.cropper;I(e.cropstart)&&nt(t,"cropstart",e.cropstart),I(e.cropmove)&&nt(t,"cropmove",e.cropmove),I(e.cropend)&&nt(t,"cropend",e.cropend),I(e.crop)&&nt(t,"crop",e.crop),I(e.zoom)&&nt(t,"zoom",e.zoom),nt(n,E,this.onCropStart),e.zoomable&&e.zoomOnWheel&&nt(n,"wheel",this.onWheel,{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&nt(n,"dblclick",this.onDblclick),nt(t.ownerDocument,_,this.onCropMove),nt(t.ownerDocument,k,this.onCropEnd),e.responsive&&nt(window,"resize",this.onResize)}},wt={resize:function(){var t=this.options,e=this.container,n=this.containerData,i=Number(t.minContainerWidth)||200,r=Number(t.minContainerHeight)||100;if(!(this.disabled||n.width<=i||n.height<=r)){var a,o,s=e.offsetWidth/n.width;1===s&&e.offsetHeight===n.height||(t.restore&&(a=this.getCanvasData(),o=this.getCropBoxData()),this.render(),t.restore&&(this.setCanvasData(P(a,(function(t,e){a[e]=t*s}))),this.setCropBoxData(P(o,(function(t,e){o[e]=t*s})))))}},dblclick:function(){this.disabled||"none"===this.options.dragMode||this.setDragMode(function(t,e){return t.classList?t.classList.contains(e):t.className.indexOf(e)>-1}(this.dragBox,d)?"move":"crop")},wheel:function(t){var e=this,n=Number(this.options.wheelZoomRatio)||.1,i=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout((function(){e.wheeling=!1}),50),t.deltaY?i=t.deltaY>0?1:-1:t.wheelDelta?i=-t.wheelDelta/120:t.detail&&(i=t.detail>0?1:-1),this.zoom(-i*n,t)))},cropStart:function(t){var e=t.buttons,n=t.button;if(!(this.disabled||("mousedown"===t.type||"pointerdown"===t.type&&"mouse"===t.pointerType)&&(L(e)&&1!==e||L(n)&&0!==n||t.ctrlKey))){var i,r=this.options,a=this.pointers;t.changedTouches?P(t.changedTouches,(function(t){a[t.identifier]=dt(t)})):a[t.pointerId||0]=dt(t),i=Object.keys(a).length>1&&r.zoomable&&r.zoomOnTouch?"zoom":G(t.target,b),M.test(i)&&!1!==rt(this.element,"cropstart",{originalEvent:t,action:i})&&(t.preventDefault(),this.action=i,this.cropping=!1,"crop"===i&&(this.cropping=!0,q(this.dragBox,g)))}},cropMove:function(t){var e=this.action;if(!this.disabled&&e){var n=this.pointers;t.preventDefault(),!1!==rt(this.element,"cropmove",{originalEvent:t,action:e})&&(t.changedTouches?P(t.changedTouches,(function(t){A(n[t.identifier]||{},dt(t,!0))})):A(n[t.pointerId||0]||{},dt(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var e=this.action,n=this.pointers;t.changedTouches?P(t.changedTouches,(function(t){delete n[t.identifier]})):delete n[t.pointerId||0],e&&(t.preventDefault(),Object.keys(n).length||(this.action=""),this.cropping&&(this.cropping=!1,V(this.dragBox,g,this.cropped&&this.options.modal)),rt(this.element,"cropend",{originalEvent:t,action:e}))}}},xt={change:function(t){var e,n=this.options,i=this.canvasData,r=this.containerData,o=this.cropBoxData,s=this.pointers,l=this.action,c=n.aspectRatio,u=o.left,d=o.top,h=o.width,f=o.height,m=u+h,g=d+f,v=0,b=0,y=r.width,w=r.height,x=!0;!c&&t.shiftKey&&(c=h&&f?h/f:1),this.limited&&(v=o.minLeft,b=o.minTop,y=v+Math.min(r.width,i.width,i.left+i.width),w=b+Math.min(r.height,i.height,i.top+i.height));var C=s[Object.keys(s)[0]],E={x:C.endX-C.startX,y:C.endY-C.startY},_=function(t){switch(t){case"e":m+E.x>y&&(E.x=y-m);break;case"w":u+E.x<v&&(E.x=v-u);break;case"n":d+E.y<b&&(E.y=b-d);break;case"s":g+E.y>w&&(E.y=w-g)}};switch(l){case"all":u+=E.x,d+=E.y;break;case"e":if(E.x>=0&&(m>=y||c&&(d<=b||g>=w))){x=!1;break}_("e"),(h+=E.x)<0&&(l="w",u-=h=-h),c&&(f=h/c,d+=(o.height-f)/2);break;case"n":if(E.y<=0&&(d<=b||c&&(u<=v||m>=y))){x=!1;break}_("n"),f-=E.y,d+=E.y,f<0&&(l="s",d-=f=-f),c&&(h=f*c,u+=(o.width-h)/2);break;case"w":if(E.x<=0&&(u<=v||c&&(d<=b||g>=w))){x=!1;break}_("w"),h-=E.x,u+=E.x,h<0&&(l="e",u-=h=-h),c&&(f=h/c,d+=(o.height-f)/2);break;case"s":if(E.y>=0&&(g>=w||c&&(u<=v||m>=y))){x=!1;break}_("s"),(f+=E.y)<0&&(l="n",d-=f=-f),c&&(h=f*c,u+=(o.width-h)/2);break;case"ne":if(c){if(E.y<=0&&(d<=b||m>=y)){x=!1;break}_("n"),f-=E.y,d+=E.y,h=f*c}else _("n"),_("e"),E.x>=0?m<y?h+=E.x:E.y<=0&&d<=b&&(x=!1):h+=E.x,E.y<=0?d>b&&(f-=E.y,d+=E.y):(f-=E.y,d+=E.y);h<0&&f<0?(l="sw",d-=f=-f,u-=h=-h):h<0?(l="nw",u-=h=-h):f<0&&(l="se",d-=f=-f);break;case"nw":if(c){if(E.y<=0&&(d<=b||u<=v)){x=!1;break}_("n"),f-=E.y,d+=E.y,h=f*c,u+=o.width-h}else _("n"),_("w"),E.x<=0?u>v?(h-=E.x,u+=E.x):E.y<=0&&d<=b&&(x=!1):(h-=E.x,u+=E.x),E.y<=0?d>b&&(f-=E.y,d+=E.y):(f-=E.y,d+=E.y);h<0&&f<0?(l="se",d-=f=-f,u-=h=-h):h<0?(l="ne",u-=h=-h):f<0&&(l="sw",d-=f=-f);break;case"sw":if(c){if(E.x<=0&&(u<=v||g>=w)){x=!1;break}_("w"),h-=E.x,u+=E.x,f=h/c}else _("s"),_("w"),E.x<=0?u>v?(h-=E.x,u+=E.x):E.y>=0&&g>=w&&(x=!1):(h-=E.x,u+=E.x),E.y>=0?g<w&&(f+=E.y):f+=E.y;h<0&&f<0?(l="ne",d-=f=-f,u-=h=-h):h<0?(l="se",u-=h=-h):f<0&&(l="nw",d-=f=-f);break;case"se":if(c){if(E.x>=0&&(m>=y||g>=w)){x=!1;break}_("e"),f=(h+=E.x)/c}else _("s"),_("e"),E.x>=0?m<y?h+=E.x:E.y>=0&&g>=w&&(x=!1):h+=E.x,E.y>=0?g<w&&(f+=E.y):f+=E.y;h<0&&f<0?(l="nw",d-=f=-f,u-=h=-h):h<0?(l="sw",u-=h=-h):f<0&&(l="ne",d-=f=-f);break;case"move":this.move(E.x,E.y),x=!1;break;case"zoom":this.zoom(function(t){var e=a({},t),n=[];return P(t,(function(t,i){delete e[i],P(e,(function(e){var i=Math.abs(t.startX-e.startX),r=Math.abs(t.startY-e.startY),a=Math.abs(t.endX-e.endX),o=Math.abs(t.endY-e.endY),s=Math.sqrt(i*i+r*r),l=(Math.sqrt(a*a+o*o)-s)/s;n.push(l)}))})),n.sort((function(t,e){return Math.abs(t)<Math.abs(e)})),n[0]}(s),t),x=!1;break;case"crop":if(!E.x||!E.y){x=!1;break}e=at(this.cropper),u=C.startX-e.left,d=C.startY-e.top,h=o.minWidth,f=o.minHeight,E.x>0?l=E.y>0?"se":"ne":E.x<0&&(u-=h,l=E.y>0?"sw":"nw"),E.y<0&&(d-=f),this.cropped||(K(this.cropBox,p),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}x&&(o.width=h,o.height=f,o.left=u,o.top=d,this.action=l,this.renderCropBox()),P(s,(function(t){t.startX=t.endX,t.startY=t.endY}))}},Ct={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&q(this.dragBox,g),K(this.cropBox,p),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=A({},this.initialImageData),this.canvasData=A({},this.initialCanvasData),this.cropBoxData=A({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(A(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),K(this.dragBox,g),q(this.cropBox,p)),this},replace:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,P(this.previews,(function(e){e.getElementsByTagName("img")[0].src=t})))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,K(this.cropper,h)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,q(this.cropper,h)),this},destroy:function(){var t=this.element;return t.cropper?(t.cropper=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=this.canvasData,i=n.left,r=n.top;return this.moveTo(z(t)?t:i+Number(t),z(e)?e:r+Number(e))},moveTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=this.canvasData,i=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(L(t)&&(n.left=t,i=!0),L(e)&&(n.top=e,i=!0),i&&this.renderCanvas(!0)),this},zoom:function(t,e){var n=this.canvasData;return t=(t=Number(t))<0?1/(1-t):1+t,this.zoomTo(n.width*t/n.naturalWidth,null,e)},zoomTo:function(t,e,n){var i=this.options,r=this.canvasData,a=r.width,o=r.height,s=r.naturalWidth,l=r.naturalHeight;if((t=Number(t))>=0&&this.ready&&!this.disabled&&i.zoomable){var c=s*t,u=l*t;if(!1===rt(this.element,"zoom",{ratio:t,oldRatio:a/s,originalEvent:n}))return this;if(n){var d=this.pointers,h=at(this.cropper),p=d&&Object.keys(d).length?function(t){var e=0,n=0,i=0;return P(t,(function(t){var r=t.startX,a=t.startY;e+=r,n+=a,i+=1})),{pageX:e/=i,pageY:n/=i}}(d):{pageX:n.pageX,pageY:n.pageY};r.left-=(c-a)*((p.pageX-h.left-r.left)/a),r.top-=(u-o)*((p.pageY-h.top-r.top)/o)}else N(e)&&L(e.x)&&L(e.y)?(r.left-=(c-a)*((e.x-r.left)/a),r.top-=(u-o)*((e.y-r.top)/o)):(r.left-=(c-a)/2,r.top-=(u-o)/2);r.width=c,r.height=u,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return L(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,L(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(L(e)?e:1,t)},scale:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=this.imageData,i=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(L(t)&&(n.scaleX=t,i=!0),L(e)&&(n.scaleY=e,i=!0),i&&this.renderCanvas(!0,!0)),this},getData:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.options,i=this.imageData,r=this.canvasData,a=this.cropBoxData;if(this.ready&&this.cropped){t={x:a.left-r.left,y:a.top-r.top,width:a.width,height:a.height};var o=i.width/i.naturalWidth;if(P(t,(function(e,n){t[n]=e/o})),e){var s=Math.round(t.y+t.height),l=Math.round(t.x+t.width);t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=l-t.x,t.height=s-t.y}}else t={x:0,y:0,width:0,height:0};return n.rotatable&&(t.rotate=i.rotate||0),n.scalable&&(t.scaleX=i.scaleX||1,t.scaleY=i.scaleY||1),t},setData:function(t){var e=this.options,n=this.imageData,i=this.canvasData,r={};if(this.ready&&!this.disabled&&N(t)){var a=!1;e.rotatable&&L(t.rotate)&&t.rotate!==n.rotate&&(n.rotate=t.rotate,a=!0),e.scalable&&(L(t.scaleX)&&t.scaleX!==n.scaleX&&(n.scaleX=t.scaleX,a=!0),L(t.scaleY)&&t.scaleY!==n.scaleY&&(n.scaleY=t.scaleY,a=!0)),a&&this.renderCanvas(!0,!0);var o=n.width/n.naturalWidth;L(t.x)&&(r.left=t.x*o+i.left),L(t.y)&&(r.top=t.y*o+i.top),L(t.width)&&(r.width=t.width*o),L(t.height)&&(r.height=t.height*o),this.setCropBoxData(r)}return this},getContainerData:function(){return this.ready?A({},this.containerData):{}},getImageData:function(){return this.sized?A({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,e={};return this.ready&&P(["left","top","width","height","naturalWidth","naturalHeight"],(function(n){e[n]=t[n]})),e},setCanvasData:function(t){var e=this.canvasData,n=e.aspectRatio;return this.ready&&!this.disabled&&N(t)&&(L(t.left)&&(e.left=t.left),L(t.top)&&(e.top=t.top),L(t.width)?(e.width=t.width,e.height=t.width/n):L(t.height)&&(e.height=t.height,e.width=t.height*n),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,e=this.cropBoxData;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(t){var e,n,i=this.cropBoxData,r=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&N(t)&&(L(t.left)&&(i.left=t.left),L(t.top)&&(i.top=t.top),L(t.width)&&t.width!==i.width&&(e=!0,i.width=t.width),L(t.height)&&t.height!==i.height&&(n=!0,i.height=t.height),r&&(e?i.height=i.width/r:n&&(i.width=i.height*r)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e=this.canvasData,n=pt(this.image,this.imageData,e,t);if(!this.cropped)return n;var i=this.getData(),r=i.x,a=i.y,s=i.width,l=i.height,c=n.width/Math.floor(e.naturalWidth);1!==c&&(r*=c,a*=c,s*=c,l*=c);var u=s/l,d=ht({aspectRatio:u,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),h=ht({aspectRatio:u,width:t.minWidth||0,height:t.minHeight||0},"cover"),p=ht({aspectRatio:u,width:t.width||(1!==c?n.width:s),height:t.height||(1!==c?n.height:l)}),f=p.width,m=p.height;f=Math.min(d.width,Math.max(h.width,f)),m=Math.min(d.height,Math.max(h.height,m));var g=document.createElement("canvas"),v=g.getContext("2d");g.width=W(f),g.height=W(m),v.fillStyle=t.fillColor||"transparent",v.fillRect(0,0,f,m);var b=t.imageSmoothingEnabled,y=void 0===b||b,w=t.imageSmoothingQuality;v.imageSmoothingEnabled=y,w&&(v.imageSmoothingQuality=w);var x,C,E,_,k,M,O=n.width,D=n.height,T=r,S=a;T<=-s||T>O?(T=0,x=0,E=0,k=0):T<=0?(E=-T,T=0,k=x=Math.min(O,s+T)):T<=O&&(E=0,k=x=Math.min(s,O-T)),x<=0||S<=-l||S>D?(S=0,C=0,_=0,M=0):S<=0?(_=-S,S=0,M=C=Math.min(D,l+S)):S<=D&&(_=0,M=C=Math.min(l,D-S));var $=[T,S,x,C];if(k>0&&M>0){var L=f/s;$.push(E*L,_*L,k*L,M*L)}return v.drawImage.apply(v,[n].concat(o($.map((function(t){return Math.floor(W(t))}))))),g},setAspectRatio:function(t){var e=this.options;return this.disabled||z(t)||(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var e=this.options,n=this.dragBox,i=this.face;if(this.ready&&!this.disabled){var r="crop"===t,a=e.movable&&"move"===t;t=r||a?t:"none",e.dragMode=t,J(n,b,t),V(n,d,r),V(n,v,a),e.cropBoxMovable||(J(i,b,t),V(i,d,r),V(i,v,a))}return this}},Et=l.Cropper,_t=function(){function t(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e(this,t),!n||!T.test(n.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=n,this.options=A({},S,N(i)&&i),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}var i,r,a;return i=t,a=[{key:"noConflict",value:function(){return window.Cropper=Et,t}},{key:"setDefaults",value:function(t){A(S,N(t)&&t)}}],(r=[{key:"init",value:function(){var t,e=this.element,n=e.tagName.toLowerCase();if(!e.cropper){if(e.cropper=this,"img"===n){if(this.isImg=!0,t=e.getAttribute("src")||"",this.originalUrl=t,!t)return;t=e.src}else"canvas"===n&&window.HTMLCanvasElement&&(t=e.toDataURL());this.load(t)}}},{key:"load",value:function(t){var e=this;if(t){this.url=t,this.imageData={};var n=this.element,i=this.options;if(i.rotatable||i.scalable||(i.checkOrientation=!1),i.checkOrientation&&window.ArrayBuffer)if(O.test(t))D.test(t)?this.read((r=t.replace(mt,""),a=atob(r),o=new ArrayBuffer(a.length),P(s=new Uint8Array(o),(function(t,e){s[e]=a.charCodeAt(e)})),o)):this.clone();else{var r,a,o,s,l=new XMLHttpRequest,c=this.clone.bind(this);this.reloading=!0,this.xhr=l,l.onabort=c,l.onerror=c,l.ontimeout=c,l.onprogress=function(){"image/jpeg"!==l.getResponseHeader("content-type")&&l.abort()},l.onload=function(){e.read(l.response)},l.onloadend=function(){e.reloading=!1,e.xhr=null},i.checkCrossOrigin&&lt(t)&&n.crossOrigin&&(t=ct(t)),l.open("GET",t),l.responseType="arraybuffer",l.withCredentials="use-credentials"===n.crossOrigin,l.send()}else this.clone()}}},{key:"read",value:function(t){var e=this.options,n=this.imageData,i=gt(t),r=0,a=1,o=1;if(i>1){this.url=function(t,e){for(var n=[],i=new Uint8Array(t);i.length>0;)n.push(ft.apply(null,R(i.subarray(0,8192)))),i=i.subarray(8192);return"data:".concat(e,";base64,").concat(btoa(n.join("")))}(t,"image/jpeg");var s=function(t){var e=0,n=1,i=1;switch(t){case 2:n=-1;break;case 3:e=-180;break;case 4:i=-1;break;case 5:e=90,i=-1;break;case 6:e=90;break;case 7:e=90,n=-1;break;case 8:e=-90}return{rotate:e,scaleX:n,scaleY:i}}(i);r=s.rotate,a=s.scaleX,o=s.scaleY}e.rotatable&&(n.rotate=r),e.scalable&&(n.scaleX=a,n.scaleY=o),this.clone()}},{key:"clone",value:function(){var t=this.element,e=this.url,n=t.crossOrigin,i=e;this.options.checkCrossOrigin&&lt(e)&&(n||(n="anonymous"),i=ct(e)),this.crossOrigin=n,this.crossOriginUrl=i;var r=document.createElement("img");n&&(r.crossOrigin=n),r.src=i||e,r.alt=t.alt||"The image to crop",this.image=r,r.onload=this.start.bind(this),r.onerror=this.stop.bind(this),q(r,f),t.parentNode.insertBefore(r,t.nextSibling)}},{key:"start",value:function(){var t=this,e=this.image;e.onload=null,e.onerror=null,this.sizing=!0;var n=l.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(l.navigator.userAgent),i=function(e,n){A(t.imageData,{naturalWidth:e,naturalHeight:n,aspectRatio:e/n}),t.sizing=!1,t.sized=!0,t.build()};if(!e.naturalWidth||n){var r=document.createElement("img"),a=document.body||document.documentElement;this.sizingImage=r,r.onload=function(){i(r.width,r.height),n||a.removeChild(r)},r.src=e.src,n||(r.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",a.appendChild(r))}else i(e.naturalWidth,e.naturalHeight)}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var t=this.element,e=this.options,n=this.image,i=t.parentNode,r=document.createElement("div");r.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var a=r.querySelector(".".concat("cropper","-container")),o=a.querySelector(".".concat("cropper","-canvas")),s=a.querySelector(".".concat("cropper","-drag-box")),l=a.querySelector(".".concat("cropper","-crop-box")),c=l.querySelector(".".concat("cropper","-face"));this.container=i,this.cropper=a,this.canvas=o,this.dragBox=s,this.cropBox=l,this.viewBox=a.querySelector(".".concat("cropper","-view-box")),this.face=c,o.appendChild(n),q(t,p),i.insertBefore(a,t.nextSibling),this.isImg||K(n,f),this.initPreview(),this.bind(),e.initialAspectRatio=Math.max(0,e.initialAspectRatio)||NaN,e.aspectRatio=Math.max(0,e.aspectRatio)||NaN,e.viewMode=Math.max(0,Math.min(3,Math.round(e.viewMode)))||0,q(l,p),e.guides||q(l.getElementsByClassName("".concat("cropper","-dashed")),p),e.center||q(l.getElementsByClassName("".concat("cropper","-center")),p),e.background&&q(a,"".concat("cropper","-bg")),e.highlight||q(c,m),e.cropBoxMovable&&(q(c,v),J(c,b,"all")),e.cropBoxResizable||(q(l.getElementsByClassName("".concat("cropper","-line")),p),q(l.getElementsByClassName("".concat("cropper","-point")),p)),this.render(),this.ready=!0,this.setDragMode(e.dragMode),e.autoCrop&&this.crop(),this.setData(e.data),I(e.ready)&&it(t,"ready",e.ready,{once:!0}),rt(t,"ready")}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),K(this.element,p))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}])&&n(i.prototype,r),a&&n(i,a),t}();return A(_t.prototype,vt,bt,yt,wt,xt,Ct),_t}()}));function pe(t,e,n){const i=t.slice();return i[28]=e[n],i}function fe(t,e,n){const i=t.slice();return i[31]=e[n],i}function me(t){let e,n,i,r;return n=new de({props:{open:t[1],options:{dragHandle:".header"},$$slots:{default:[ke]},$$scope:{ctx:t}}}),{c(){e=w("div"),st(n.$$.fragment),M(e,"class","overlay svelte-1ap2r11")},m(t,i){v(t,e,i),lt(n,e,null),r=!0},p(t,e){const i={};2&e[0]&&(i.open=t[1]),1021&e[0]|8&e[1]&&(i.$$scope={dirty:e,ctx:t}),n.$set(i)},i(t){r||(et(n.$$.fragment,t),W(()=>{i||(i=rt(e,mt,{},!0)),i.run(1)}),r=!0)},o(t){nt(n.$$.fragment,t),i||(i=rt(e,mt,{},!1)),i.run(0),r=!1},d(t){t&&b(e),ct(n),t&&i&&i.end()}}}function ge(t){let e,n,i,r,a,o,s,l=t[31]+"";return{c(){e=w("div"),n=w("span"),i=C(),r=w("span"),r.innerHTML='<i class="btn-close-error far fa-window-close svelte-1ap2r11"></i>',a=C(),M(r,"class","btn-close-error svelte-1ap2r11"),M(e,"class","file-editor-error svelte-1ap2r11")},m(t,c){v(t,e,c),g(e,n),n.innerHTML=l,g(e,i),g(e,r),g(e,a),o||(s=_(r,"click",Oe),o=!0)},p(t,e){1&e[0]&&l!==(l=t[31]+"")&&(n.innerHTML=l)},d(t){t&&b(e),o=!1,s()}}}function ve(e){let n;return{c(){n=w("span"),n.textContent=""+e[10].directory,M(n,"class","element-dirname svelte-1ap2r11")},m(t,e){v(t,n,e)},p:t,d(t){t&&b(n)}}}function be(t){let e,n,i;return{c(){e=w("input"),M(e,"id",n="id-fileuploader-dirname-"+t[11]),M(e,"type","text"),M(e,"name","dirname"),e.value=i=t[2].directory,M(e,"class","input-dirname svelte-1ap2r11")},m(t,n){v(t,e,n)},p(t,n){4&n[0]&&i!==(i=t[2].directory)&&e.value!==i&&(e.value=i)},d(t){t&&b(e)}}}function ye(t){let e,n,i,r=t[28]+"";return{c(){e=w("option"),n=x(r),e.__value=i=t[28],e.value=e.__value,e.selected="selected"},m(t,i){v(t,e,i),g(e,n)},p(t,a){4&a[0]&&r!==(r=t[28]+"")&&O(n,r),4&a[0]&&i!==(i=t[28])&&(e.__value=i,e.value=e.__value)},d(t){t&&b(e)}}}function we(t){let e,n,i,r,a,o,s=!0===t[10].useKeepOriginalImage&&null!==t[2].original_url&&xe(t);function l(t,e){return!0===t[2].is_loading||!0===t[9]?Ee:Ce}let c=l(t),u=c(t);return{c(){e=w("div"),n=w("div"),i=w("div"),i.textContent="Image Editor",r=C(),s&&s.c(),a=C(),o=w("div"),u.c(),M(n,"class","image-editor-header svelte-1ap2r11"),M(o,"class","image-editor-body svelte-1ap2r11"),M(e,"class","control-group image-editor-container svelte-1ap2r11")},m(t,l){v(t,e,l),g(e,n),g(n,i),g(n,r),s&&s.m(n,null),g(e,a),g(e,o),u.m(o,null)},p(t,e){!0===t[10].useKeepOriginalImage&&null!==t[2].original_url?s?s.p(t,e):(s=xe(t),s.c(),s.m(n,null)):s&&(s.d(1),s=null),c!==(c=l(t))&&(u.d(1),u=c(t),u&&(u.c(),u.m(o,null)))},d(t){t&&b(e),s&&s.d(),u.d()}}}function xe(t){let e,n,i,r,a,o,s,l,c;return{c(){e=w("div"),n=w("label"),i=x("Use original\n                                                    image"),a=C(),o=w("input"),M(n,"for",r="id-fileuploader-original-toggle-"+t[11]),M(n,"class","svelte-1ap2r11"),M(o,"id",s="id-fileuploader-original-toggle-"+t[11]),M(o,"type","checkbox"),o.value="1",o.checked=t[4],M(o,"class","input-original-toggle"),M(e,"class","control-original-toggle svelte-1ap2r11")},m(r,s){v(r,e,s),g(e,n),g(n,i),g(e,a),g(e,o),l||(c=_(o,"change",t[14]),l=!0)},p(t,e){16&e[0]&&(o.checked=t[4])},d(t){t&&b(e),l=!1,c()}}}function Ce(t){let e,n,i;return{c(){e=w("div"),e.innerHTML='<div class="img-container svelte-1ap2r11"><img class="image-original svelte-1ap2r11" src="" alt="Canvas for the cropper editor"/></div> \n\n\n                                                <div class="image-editor-toolbar svelte-1ap2r11"><div class="btn-group"><button type="button" class="btn btn-primary svelte-1ap2r11" data-method="zoom" data-option="0.1" title="Zoom In"><span class="fa fa-search-plus"></span></button> \n                                                        <button type="button" class="btn btn-primary svelte-1ap2r11" data-method="zoom" data-option="-0.1" title="Zoom Out"><span class="fa fa-search-minus"></span></button></div> \n\n                                                    <div class="btn-group"><button type="button" class="btn btn-primary svelte-1ap2r11" data-method="rotate" data-option="-45" title="Rotate Left"><span class="fa fa-undo-alt"></span></button> \n\n                                                        <button type="button" class="btn btn-primary svelte-1ap2r11" data-method="rotate" data-option="45" title="Rotate Right"><span class="fa fa-redo-alt"></span></button></div> \n\n                                                    <div class="btn-group"><button type="button" class="btn btn-primary svelte-1ap2r11" data-method="scaleX" data-option="-1" title="Flip Horizontal"><span class="fa fa-arrows-alt-h"></span></button> \n\n                                                        <button type="button" class="btn btn-primary svelte-1ap2r11" data-method="scaleY" data-option="-1" title="Flip Vertical"><span class="fa fa-arrows-alt-v"></span></button></div> \n\n                                                    <div class="btn-group"><button type="button" class="btn btn-primary svelte-1ap2r11" data-method="reset" title="Reset"><span class="fa fa-sync-alt"></span></button></div></div>',n=C(),i=w("div"),i.innerHTML='<div class="img-preview preview-lg svelte-1ap2r11"></div>',M(e,"class","left svelte-1ap2r11"),M(i,"class","img-preview-container svelte-1ap2r11")},m(t,r){v(t,e,r),v(t,n,r),v(t,i,r)},d(t){t&&b(e),t&&b(n),t&&b(i)}}}function Ee(t){let e;return{c(){e=w("div"),e.innerHTML='<div class="img-container is-loading svelte-1ap2r11"><div class="spinner svelte-1ap2r11"><i class="fas fa-cog fa-spin fa-5x svelte-1ap2r11"></i></div></div>',M(e,"class","left svelte-1ap2r11")},m(t,n){v(t,e,n)},d(t){t&&b(e)}}}function _e(t){let e;return{c(){e=w("div"),e.innerHTML='<i class="fas fa-circle-notch fa-spin fa-2x svelte-1ap2r11"></i>',M(e,"class","spinner svelte-1ap2r11")},m(t,n){v(t,e,n)},d(t){t&&b(e)}}}function ke(t){let e,n,i,a,o,s,l,c,d,h,p,f,m,S,$,L,B,z,j,F,N,I,H,R,P,A,U,W,X,Y,q,K,V,Q,Z,G,J,tt,et,nt,it,rt,at,ot,st,lt,ct,ut,dt,ht,pt,mt,gt=t[2].progress+"",vt=t[0],bt=[];for(let e=0;e<vt.length;e+=1)bt[e]=ge(fe(t,vt,e));let yt=!0===t[10].useDirectory&&function(t){let e,n,i,r,a,o=function(t,e){return!0===t[10].directoryCanBeUpdated?be:ve}(t)(t);return{c(){e=w("label"),n=x("Parent dir:"),r=C(),o.c(),a=E(),M(e,"for",i="id-fileuploader-dirname-"+t[11]),M(e,"class","svelte-1ap2r11")},m(t,i){v(t,e,i),g(e,n),v(t,r,i),o.m(t,i),v(t,a,i)},p(t,e){o.p(t,e)},d(t){t&&b(e),t&&b(r),o.d(t),t&&b(a)}}}(t),wt=!0===t[10].usePrivacy&&function(t){let e,n,i,r,a,o,s,l;return{c(){e=w("div"),n=w("label"),i=x("Is private"),a=C(),o=w("input"),M(n,"for",r="id-fileuploader-privacy-"+t[11]),M(n,"class","svelte-1ap2r11"),M(o,"id",s="id-fileuploader-privacy-"+t[11]),M(o,"type","checkbox"),M(o,"name","is_private"),o.value="1",M(o,"class","input-privacy"),o.checked=l=ft.toBool(t[2].is_private),M(e,"class","control-group control-privacy svelte-1ap2r11")},m(t,r){v(t,e,r),g(e,n),g(n,i),g(e,a),g(e,o)},p(t,e){4&e[0]&&l!==(l=ft.toBool(t[2].is_private))&&(o.checked=l)},d(t){t&&b(e)}}}(t),xt=!0===t[10].useTags&&function(t){let e,n,i,r,a,o,s,l=t[2].tags,c=[];for(let e=0;e<l.length;e+=1)c[e]=ye(pe(t,l,e));return{c(){e=w("div"),n=w("label"),i=x("Tags"),a=C(),o=w("select");for(let t=0;t<c.length;t+=1)c[t].c();M(n,"for",r="id-fileuploader-tags-"+t[11]),M(n,"class","svelte-1ap2r11"),M(o,"class","select-tags svelte-1ap2r11"),M(o,"id",s="id-fileuploader-tags-"+t[11]),M(o,"name","tags[]"),o.multiple=!0,M(e,"class","control-group control-tags svelte-1ap2r11")},m(t,r){v(t,e,r),g(e,n),g(n,i),g(e,a),g(e,o);for(let t=0;t<c.length;t+=1)c[t].m(o,null)},p(t,e){if(4&e[0]){let n;for(l=t[2].tags,n=0;n<l.length;n+=1){const i=pe(t,l,n);c[n]?c[n].p(i,e):(c[n]=ye(i),c[n].c(),c[n].m(o,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=l.length}},d(t){t&&b(e),y(c,t)}}}(t),Ct=!0===t[10].useImageEditor&&!0===t[8]&&we(t),Et=!0===t[2].is_loading&&!1==(!0===t[10].useImageEditor&&!0===t[8])&&_e();return{c(){e=w("div"),n=w("div"),i=x(t[5]),a=C(),o=w("div"),s=w("span"),l=x(t[3]),c=C(),d=w("span"),h=C(),p=w("div"),f=w("div"),m=w("div");for(let t=0;t<bt.length;t+=1)bt[t].c();S=C(),$=w("form"),L=w("div"),B=w("div"),yt&&yt.c(),z=C(),wt&&wt.c(),j=C(),F=w("div"),N=w("label"),I=x("File name"),R=C(),P=w("div"),A=w("input"),X=C(),Y=w("input"),V=C(),xt&&xt.c(),Q=C(),Ct&&Ct.c(),Z=C(),G=w("div"),Et&&Et.c(),J=C(),tt=w("div"),et=x("Uploading... "),nt=x(gt),it=x("%"),rt=C(),at=w("button"),ot=x("Cancel"),lt=C(),ct=w("button"),ut=x("Update"),D(n,"display","none"),M(s,"class","title"),M(d,"class","close-modal-btn far fa-times-circle svelte-1ap2r11"),M(o,"class","header svelte-1ap2r11"),M(m,"class","file-editor-error-container"),M(B,"class","control-group control-dirname svelte-1ap2r11"),M(L,"class","file-editor-block-1 svelte-1ap2r11"),M(N,"for",H="id-fileuploader-filename-"+t[11]),M(N,"class","svelte-1ap2r11"),M(A,"id",U="id-fileuploader-filename-"+t[11]),M(A,"type","text"),M(A,"name","basename"),A.value=W=ft.basename(t[2].name,!1),M(A,"class","input-basename svelte-1ap2r11"),M(Y,"type","text"),M(Y,"name","extension"),Y.value=q=ft.getFileExtension(t[2].name),M(Y,"class","input-extension svelte-1ap2r11"),Y.disabled=K=!1===t[10].fileExtensionCanBeUpdated,M(P,"class","filename-inputs-container svelte-1ap2r11"),M(F,"class","control-group control-filename svelte-1ap2r11"),M($,"action",""),M($,"method","post"),M(tt,"class","progress-bar svelte-1ap2r11"),T(tt,"show",t[2].progress>0&&t[2].progress<100),M(at,"class",st=u(t[6])+" svelte-1ap2r11"),M(ct,"class",dt=u(t[7])+" svelte-1ap2r11"),M(G,"class","buttons-bar svelte-1ap2r11"),M(f,"title","File Editor"),M(f,"class","dialog-file-editor"),M(p,"class","body file-editor"),M(e,"class","container file-editor-container svelte-1ap2r11"),M(e,"id",ht="file-editor-dialog-"+t[11])},m(r,u){v(r,e,u),g(e,n),g(n,i),g(e,a),g(e,o),g(o,s),g(s,l),g(o,c),g(o,d),g(e,h),g(e,p),g(p,f),g(f,m);for(let t=0;t<bt.length;t+=1)bt[t].m(m,null);g(f,S),g(f,$),g($,L),g(L,B),yt&&yt.m(B,null),g(L,z),wt&&wt.m(L,null),g($,j),g($,F),g(F,N),g(N,I),g(F,R),g(F,P),g(P,A),g(P,X),g(P,Y),g($,V),xt&&xt.m($,null),g($,Q),Ct&&Ct.m($,null),g(f,Z),g(f,G),Et&&Et.m(G,null),g(G,J),g(G,tt),g(tt,et),g(tt,nt),g(tt,it),g(G,rt),g(G,at),g(at,ot),g(G,lt),g(G,ct),g(ct,ut),pt||(mt=[_(d,"click",t[13]),_(at,"click",k(t[13])),_(ct,"click",k(t[12]))],pt=!0)},p(t,e){if(32&e[0]&&O(i,t[5]),8&e[0]&&O(l,t[3]),1&e[0]){let n;for(vt=t[0],n=0;n<vt.length;n+=1){const i=fe(t,vt,n);bt[n]?bt[n].p(i,e):(bt[n]=ge(i),bt[n].c(),bt[n].m(m,null))}for(;n<bt.length;n+=1)bt[n].d(1);bt.length=vt.length}!0===t[10].useDirectory&&yt.p(t,e),!0===t[10].usePrivacy&&wt.p(t,e),4&e[0]&&W!==(W=ft.basename(t[2].name,!1))&&A.value!==W&&(A.value=W),4&e[0]&&q!==(q=ft.getFileExtension(t[2].name))&&Y.value!==q&&(Y.value=q),!0===t[10].useTags&&xt.p(t,e),!0===t[10].useImageEditor&&!0===t[8]?Ct?Ct.p(t,e):(Ct=we(t),Ct.c(),Ct.m($,null)):Ct&&(Ct.d(1),Ct=null),!0===t[2].is_loading&&!1==(!0===t[10].useImageEditor&&!0===t[8])?Et||(Et=_e(),Et.c(),Et.m(G,J)):Et&&(Et.d(1),Et=null),4&e[0]&&gt!==(gt=t[2].progress+"")&&O(nt,gt),4&e[0]&&T(tt,"show",t[2].progress>0&&t[2].progress<100),64&e[0]&&st!==(st=u(t[6])+" svelte-1ap2r11")&&M(at,"class",st),128&e[0]&&dt!==(dt=u(t[7])+" svelte-1ap2r11")&&M(ct,"class",dt)},d(t){t&&b(e),y(bt,t),yt&&yt.d(),wt&&wt.d(),xt&&xt.d(),Ct&&Ct.d(),Et&&Et.d(),pt=!1,r(mt)}}}function Me(t){let e,n,i=null!==t[2]&&!0===t[1]&&me(t);return{c(){i&&i.c(),e=E()},m(t,r){i&&i.m(t,r),v(t,e,r),n=!0},p(t,n){null!==t[2]&&!0===t[1]?i?(i.p(t,n),6&n[0]&&et(i,1)):(i=me(t),i.c(),et(i,1),i.m(e.parentNode,e)):i&&(J(),nt(i,1,1,()=>{i=null}),tt())},i(t){n||(et(i),n=!0)},o(t){nt(i),n=!1},d(t){i&&i.d(t),t&&b(e)}}}function Oe(t){t.target.closest(".file-editor-error").remove()}function De(t,e,n){let{isOpen:i=!1}=e,{uFile:r={}}=e,{title:a="FileEditor"}=e,{errors:o=[]}=e,s=!1,l=0;const{onCloseFileEditorBtnClicked:c,onFileEditorFileDropped:u,onFileEditorUpdated:d,fileEditorOptions:h}=(p="fileUploader",N().$$.context.get(p));var p;const f=h;let m="btn-cancel",g="btn-update";!0===f.useBootstrap&&(m="btn btn-danger mr-2",g="btn btn-success");let v,b,y=ft.cssId(),w=!1,x=null,C=null,E=!1,_=null,k=null;var M;function O(){null!==_&&_.destroy(),_=null}function D(){C=null,c()}function T(t){n(0,o=[...o,t])}return M=()=>{if(!0===i){if(v=jQuery("#file-editor-dialog-"+y),!0===f.useTags){b=jQuery("#id-fileuploader-tags-"+y);let t={};f.availableTags.length>0&&(t.data=function(t){var e=[];for(var n in t){var i=t[n];e.push({id:i,text:i})}return e}(f.availableTags)),!0===f.allowCustomTags&&(t.tags=!0),t.maximumSelectionLength=f.nbTagsAllowed,b.select2(t)}n(8,w=ft.mimeIsImage(r.type)),!1===E&&(!0===w?setTimeout(()=>{let t=v.find(".image-original");if(t.length){let e,n=t[0];e=!0===s&&null!==C?URL.createObjectURL(C):URL.createObjectURL(r.file),n.src=e;let i={preview:".img-preview",viewMode:1,autoCropArea:1,ready(){x=_.getData()}};_=new he(n,i),v.find(".image-editor-toolbar").off("click").on("click","[data-method]",(function(){var t,e,n=jQuery(this),i=n.data();if(!n.prop("disabled")&&!n.hasClass("disabled")&&_&&i.method){if(void 0!==(i=jQuery.extend({},i)).target&&(e=jQuery(i.target),void 0===i.option))try{i.option=JSON.parse(e.val())}catch(t){console.log(t.message)}switch(t=_.cropped,i.method){case"rotate":t&&_.clear()}switch(_[i.method](i.option,i.secondOption),i.method){case"rotate":t&&_.crop();break;case"scaleX":case"scaleY":jQuery(this).data("option",-i.option)}}}))}},1):O()),null===k&&(k=new Ct({container:v[0],cssClass:f.dropzoneOverClass||"dropzone-hover",onDrop:t=>{n(4,s=!1),C=null,u(r,t[0])}}),k.start())}else O(),k=null},N().$$.after_update.push(M),t.$$set=t=>{"isOpen"in t&&n(1,i=t.isOpen),"uFile"in t&&n(2,r=t.uFile),"title"in t&&n(3,a=t.title),"errors"in t&&n(0,o=t.errors)},[o,i,r,a,s,l,m,g,w,E,f,y,async function(){let t=!1;null!==_&&(t=!1===ft.compareObjects(x,_.getData())),await d(r,await async function(){let t,e={};!0===f.useDirectory&&(t=!0===f.directoryCanBeUpdated?v.find(".input-dirname").val():f.directory,e.directory=t);if(e.name=v.find(".input-basename").val()+"."+v.find(".input-extension").val(),!0===f.usePrivacy){let t=ft.toInt(v.find(".input-privacy").prop("checked"));e.is_private=t}if(!0===f.useTags){let t=v.find(".select-tags").val();e.tags=t}let n=r.file;null!==_&&(n=await async function(t){return new Promise((e,n)=>{t.getCroppedCanvas().toBlob(t=>{e(t)})})}(_));return e.file=n,e}(),{cropped:t,dropped:!1,original:s}),0===o.length&&(D(),n(4,s=!1))},D,async function(t){if(O(),!0===t.target.checked){if(n(4,s=!0),null!==r.original_url)if(null===C){n(9,E=!0);let t=await fetch(r.original_url).catch(t=>{T("Server error: "+t.message)});if(!0===t.ok){let e=await t.blob().catch(t=>{T("Blob error: could not convert the url into a blob ("+r.original_url+")")});setTimeout((function(){C=e,n(9,E=!1)}),1)}else T("Server error: "+t.statusText)}else n(9,E=!1),n(5,l++,l)}else n(4,s=!1),n(9,E=!1),n(5,l++,l)}]}class Te extends ht{constructor(t){super(),dt(this,t,De,Me,o,{isOpen:1,uFile:2,title:3,errors:0},[-1,-1])}}function Se(t,e,n){const i=t.slice();return i[73]=e[n],i}function $e(t,e,n){const i=t.slice();return i[73]=e[n],i}function Le(t,e,n){const i=t.slice();return i[78]=e[n],i}function Be(t,e,n){const i=t.slice();return i[73]=e[n],i}function ze(t,e){let n,i;return{key:t,first:null,c(){n=w("input"),M(n,"type","text"),n.readOnly=!0,M(n,"name",e[1]),n.value=i=e[73].url,M(n,"class","svelte-ibtpdm"),this.first=n},m(t,e){v(t,n,e)},p(t,e){2&e[0]&&M(n,"name",t[1]),2048&e[0]&&i!==(i=t[73].url)&&n.value!==i&&(n.value=i)},d(t){t&&b(n)}}}function je(t){let e,n,i,r,a,o,s,l=t[78]+"";return{c(){e=w("div"),n=w("span"),i=C(),r=w("button"),r.innerHTML='<i class="fas fa-times-circle btn-remove-error svelte-ibtpdm"></i>',a=C(),M(r,"class","btn-remove-error svelte-ibtpdm"),M(e,"class","error-item svelte-ibtpdm")},m(t,c){v(t,e,c),g(e,n),n.innerHTML=l,g(e,i),g(e,r),g(e,a),o||(s=_(r,"click",k(nn)),o=!0)},p(t,e){131072&e[0]&&l!==(l=t[78]+"")&&(n.innerHTML=l)},d(t){t&&b(e),o=!1,s()}}}function Fe(t){let e,n,i,r,a,o,s,l,c,u,d,h,p,f,m=t[73].name+"",y=ft.humanSize(t[73].size)+"",E=!0===t[73].is_loading&&Ie();function _(t,e){return t[73].status<2?Re:He}let k=_(t),D=k(t),T=!0===t[0].useFileEditor&&Pe(t),S=!0===t[0].useDelete&&Ae(t);return{c(){e=w("li"),n=w("div"),i=x(m),r=C(),E&&E.c(),a=C(),o=w("div"),D.c(),s=C(),l=w("div"),c=x(y),u=C(),d=w("div"),T&&T.c(),h=C(),S&&S.c(),p=C(),M(n,"class","cell-name svelte-ibtpdm"),M(o,"class","cell-status svelte-ibtpdm"),M(l,"class","cell-size svelte-ibtpdm"),M(d,"class","cell-action gu-hide svelte-ibtpdm"),M(e,"class","dropzone-text-item-container fileuploader-item svelte-ibtpdm"),M(e,"data-id",f=t[73].id)},m(t,f){v(t,e,f),g(e,n),g(n,i),g(n,r),E&&E.m(n,null),g(e,a),g(e,o),D.m(o,null),g(e,s),g(e,l),g(l,c),g(e,u),g(e,d),T&&T.m(d,null),g(d,h),S&&S.m(d,null),g(e,p)},p(t,r){2048&r[0]&&m!==(m=t[73].name+"")&&O(i,m),!0===t[73].is_loading?E||(E=Ie(),E.c(),E.m(n,null)):E&&(E.d(1),E=null),k===(k=_(t))&&D?D.p(t,r):(D.d(1),D=k(t),D&&(D.c(),D.m(o,null))),2048&r[0]&&y!==(y=ft.humanSize(t[73].size)+"")&&O(c,y),!0===t[0].useFileEditor?T?T.p(t,r):(T=Pe(t),T.c(),T.m(d,h)):T&&(T.d(1),T=null),!0===t[0].useDelete?S?S.p(t,r):(S=Ae(t),S.c(),S.m(d,null)):S&&(S.d(1),S=null),2048&r[0]&&f!==(f=t[73].id)&&M(e,"data-id",f)},d(t){t&&b(e),E&&E.d(),D.d(),T&&T.d(),S&&S.d()}}}function Ne(t){let e,n,i,r,a,o,s,l,c,u,d,h=t[73].name+"";return{c(){e=w("li"),n=w("div"),i=x(h),r=C(),a=w("div"),a.textContent=""+t[24]._("Loading..."),o=C(),s=w("div"),s.textContent=" ",l=C(),c=w("div"),c.textContent=" ",u=C(),M(n,"class","cell-name svelte-ibtpdm"),M(a,"class","cell-status svelte-ibtpdm"),M(s,"class","cell-size svelte-ibtpdm"),M(c,"class","cell-action gu-hide svelte-ibtpdm"),M(e,"class","dropzone-text-item-container fileuploader-item ui-placeholder svelte-ibtpdm"),M(e,"data-id",d=t[73].id)},m(t,d){v(t,e,d),g(e,n),g(n,i),g(e,r),g(e,a),g(e,o),g(e,s),g(e,l),g(e,c),g(e,u)},p(t,n){2048&n[0]&&h!==(h=t[73].name+"")&&O(i,h),2048&n[0]&&d!==(d=t[73].id)&&M(e,"data-id",d)},d(t){t&&b(e)}}}function Ie(t){let e;return{c(){e=w("i"),M(e,"class","fas fa-circle-notch fa-spin svelte-ibtpdm")},m(t,n){v(t,e,n)},d(t){t&&b(e)}}}function He(t){let e,n,i=t[73].progress+"";return{c(){e=x(i),n=x("%")},m(t,i){v(t,e,i),v(t,n,i)},p(t,n){2048&n[0]&&i!==(i=t[73].progress+"")&&O(e,i)},d(t){t&&b(e),t&&b(n)}}}function Re(e){let n;return{c(){n=x("-")},m(t,e){v(t,n,e)},p:t,d(t){t&&b(n)}}}function Pe(t){let e,n,i;function r(...e){return t[34](t[73],...e)}return{c(){e=w("button"),e.innerHTML='<i class="btn-edit-file fas fa-edit svelte-ibtpdm"></i>',M(e,"class","btn-edit-file svelte-ibtpdm")},m(t,a){v(t,e,a),n||(i=_(e,"click",k(r)),n=!0)},p(e,n){t=e},d(t){t&&b(e),n=!1,i()}}}function Ae(t){let e,n,i;function r(...e){return t[35](t[73],...e)}return{c(){e=w("button"),e.innerHTML='<i class="fas fa-minus-circle btn-remove-file svelte-ibtpdm"></i>',M(e,"class","btn-remove-file svelte-ibtpdm")},m(t,a){v(t,e,a),n||(i=_(e,"click",k(r)),n=!0)},p(e,n){t=e},d(t){t&&b(e),n=!1,i()}}}function Ue(t,e){let n,i;function r(t,e){return 0===t[73].status?Ne:Fe}let a=r(e),o=a(e);return{key:t,first:null,c(){n=E(),o.c(),i=E(),this.first=n},m(t,e){v(t,n,e),o.m(t,e),v(t,i,e)},p(t,e){a===(a=r(t))&&o?o.p(t,e):(o.d(1),o=a(t),o&&(o.c(),o.m(i.parentNode,i)))},d(t){t&&b(n),o.d(t),t&&b(i)}}}function We(t){let e,n,i,r,a,o,s,l,c,u,d,h,p,f,m,y,E=t[73].name+"",_=ft.humanSize(t[73].size)+"";function k(t,e){return(null==r||2048&e[0])&&(r=!(!0!==ft.mimeIsImage(t[73].type))),r?qe:Ye}let D=k(t,[-1]),T=D(t),S=!0===t[0].useFileEditor&&Ke(t),$=!0===t[0].useDelete&&Ve(t),L=!0===t[73].is_loading&&Qe();return{c(){e=w("div"),n=w("div"),i=w("div"),T.c(),a=C(),o=w("div"),s=x(E),l=C(),c=w("div"),u=x(_),d=C(),h=w("div"),S&&S.c(),p=C(),$&&$.c(),f=C(),L&&L.c(),m=C(),M(i,"class","cell-image svelte-ibtpdm"),M(o,"class","cell-name svelte-ibtpdm"),M(c,"class","cell-size svelte-ibtpdm"),M(n,"class","cell-content"),M(h,"class","cell-action gu-hide svelte-ibtpdm"),M(e,"class","dropzone-image-item-container fileuploader-item svelte-ibtpdm"),M(e,"data-id",y=t[73].id)},m(t,r){v(t,e,r),g(e,n),g(n,i),T.m(i,null),g(n,a),g(n,o),g(o,s),g(n,l),g(n,c),g(c,u),g(e,d),g(e,h),S&&S.m(h,null),g(h,p),$&&$.m(h,null),g(e,f),L&&L.m(e,null),g(e,m)},p(t,n){D===(D=k(t,n))&&T?T.p(t,n):(T.d(1),T=D(t),T&&(T.c(),T.m(i,null))),2048&n[0]&&E!==(E=t[73].name+"")&&O(s,E),2048&n[0]&&_!==(_=ft.humanSize(t[73].size)+"")&&O(u,_),!0===t[0].useFileEditor?S?S.p(t,n):(S=Ke(t),S.c(),S.m(h,p)):S&&(S.d(1),S=null),!0===t[0].useDelete?$?$.p(t,n):($=Ve(t),$.c(),$.m(h,null)):$&&($.d(1),$=null),!0===t[73].is_loading?L||(L=Qe(),L.c(),L.m(e,m)):L&&(L.d(1),L=null),2048&n[0]&&y!==(y=t[73].id)&&M(e,"data-id",y)},d(t){t&&b(e),T.d(),S&&S.d(),$&&$.d(),L&&L.d()}}}function Xe(t){let e,n,i,r,a,o,s,l,c,u,d,h,p=t[73].name+"";return{c(){e=w("div"),n=w("div"),i=w("div"),i.innerHTML='<span class="cell-image-img"></span>',r=C(),a=w("div"),o=x(p),s=C(),l=w("div"),c=C(),u=w("div"),u.innerHTML='<i class="fas fa-circle-notch fa-spin fa-2x svelte-ibtpdm"></i>',d=C(),M(i,"class","cell-image svelte-ibtpdm"),M(a,"class","cell-name svelte-ibtpdm"),M(l,"class","cell-size svelte-ibtpdm"),M(n,"class","cell-content"),M(u,"class","image-overlay svelte-ibtpdm"),M(e,"class","dropzone-image-item-container fileuploader-item svelte-ibtpdm"),M(e,"data-id",h=t[73].id)},m(t,h){v(t,e,h),g(e,n),g(n,i),g(n,r),g(n,a),g(a,o),g(n,s),g(n,l),g(e,c),g(e,u),g(e,d)},p(t,n){2048&n[0]&&p!==(p=t[73].name+"")&&O(o,p),2048&n[0]&&h!==(h=t[73].id)&&M(e,"data-id",h)},d(t){t&&b(e)}}}function Ye(e){let n;return{c(){n=w("span"),n.innerHTML='<i class="far fa-file svelte-ibtpdm"></i>',M(n,"class","cell-image-img")},m(t,e){v(t,n,e)},p:t,d(t){t&&b(n)}}}function qe(t){let e,n,i;return{c(){e=w("img"),M(e,"class","cell-image-img svelte-ibtpdm"),e.src!==(n=URL.createObjectURL(t[73].file))&&M(e,"src",n),M(e,"alt",i=t[73].name)},m(t,n){v(t,e,n)},p(t,r){2048&r[0]&&e.src!==(n=URL.createObjectURL(t[73].file))&&M(e,"src",n),2048&r[0]&&i!==(i=t[73].name)&&M(e,"alt",i)},d(t){t&&b(e)}}}function Ke(t){let e,n,i;function r(...e){return t[37](t[73],...e)}return{c(){e=w("button"),e.innerHTML='<i class="btn-edit-file fas fa-edit svelte-ibtpdm"></i>',M(e,"class","btn-edit-file svelte-ibtpdm")},m(t,a){v(t,e,a),n||(i=_(e,"click",k(r)),n=!0)},p(e,n){t=e},d(t){t&&b(e),n=!1,i()}}}function Ve(t){let e,n,i;function r(...e){return t[38](t[73],...e)}return{c(){e=w("button"),e.innerHTML='<i class="fas fa-minus-circle btn-remove-file svelte-ibtpdm"></i>',M(e,"class","btn-remove-file svelte-ibtpdm")},m(t,a){v(t,e,a),n||(i=_(e,"click",k(r)),n=!0)},p(e,n){t=e},d(t){t&&b(e),n=!1,i()}}}function Qe(t){let e;return{c(){e=w("div"),e.innerHTML='<i class="fas fa-circle-notch fa-spin fa-2x svelte-ibtpdm"></i>',M(e,"class","image-overlay svelte-ibtpdm")},m(t,n){v(t,e,n)},d(t){t&&b(e)}}}function Ze(t,e){let n,i;function r(t,e){return 0===t[73].status?Xe:We}let a=r(e),o=a(e);return{key:t,first:null,c(){n=E(),o.c(),i=E(),this.first=n},m(t,e){v(t,n,e),o.m(t,e),v(t,i,e)},p(t,e){a===(a=r(t))&&o?o.p(t,e):(o.d(1),o=a(t),o&&(o.c(),o.m(i.parentNode,i)))},d(t){t&&b(n),o.d(t),t&&b(i)}}}function Ge(t){let e,n,i,r,a,o,s,l;return{c(){e=w("button"),n=w("i"),i=C(),r=w("span"),r.textContent=""+t[24]._("Start upload"),M(n,"class","btn-start-upload fas fa-arrow-circle-right svelte-ibtpdm"),M(r,"class","btn-start-upload"),M(e,"class",a=u(t[8])+" svelte-ibtpdm"),e.disabled=o=!t[23]},m(a,o){v(a,e,o),g(e,n),g(e,i),g(e,r),s||(l=_(e,"click",k(t[30])),s=!0)},p(t,n){256&n[0]&&a!==(a=u(t[8])+" svelte-ibtpdm")&&M(e,"class",a),8388608&n[0]&&o!==(o=!t[23])&&(e.disabled=o)},d(t){t&&b(e),s=!1,l()}}}function Je(t){let e,n,i,r,a;return{c(){e=w("span"),n=x(t[15]),i=x("%")},m(t,r){v(t,e,r),g(e,n),g(e,i),a=!0},p(t,e){(!a||32768&e[0])&&O(n,t[15])},i(t){a||(W(()=>{r||(r=rt(e,mt,{},!0)),r.run(1)}),a=!0)},o(t){r||(r=rt(e,mt,{},!1)),r.run(0),a=!1},d(t){t&&b(e),t&&r&&r.end()}}}function tn(t){let e,n,i,r,a;return{c(){e=w("span"),n=x(t[15]),i=x("%")},m(t,r){v(t,e,r),g(e,n),g(e,i),a=!0},p(t,e){(!a||32768&e[0])&&O(n,t[15])},i(t){a||(W(()=>{r||(r=rt(e,mt,{},!0)),r.run(1)}),a=!0)},o(t){r||(r=rt(e,mt,{},!1)),r.run(0),a=!1},d(t){t&&b(e),t&&r&&r.end()}}}function en(t){let e,n,i,a,o,s,l,c,d,h,p,f,m,E,S,$,L,B,z,j,F,N,I,H,R,P,A,U,W,X,Y,q,K,V,Q,Z,G,it,rt,ut,dt,ht,pt,mt,gt,vt,bt,yt,wt,xt,Ct,Et,_t,kt,Mt,Ot,Dt,Tt,St,$t,Lt,Bt,zt,jt,Ft,Nt,It,Ht,Rt,Pt,At,Ut,Wt=[],Xt=new Map,Yt=[],qt=new Map,Kt=[],Vt=new Map,Qt=(0===t[22]?t[24]._("Add files"):t[24]._n("x files queued",t[22]))+"",Zt=t[24]._n("x files",t[11].length)+"",Gt=t[24]._("Abort")+"",Jt=ft.humanSize(t[21])+"",te=t[11];const ee=t=>t[73].id;for(let e=0;e<te.length;e+=1){let n=Be(t,te,e),i=ee(n);Xt.set(i,Wt[e]=ze(i,n))}let ne=t[17],ie=[];for(let e=0;e<ne.length;e+=1)ie[e]=je(Le(t,ne,e));let re=t[11];const ae=t=>t[73].id;for(let e=0;e<re.length;e+=1){let n=$e(t,re,e),i=ae(n);qt.set(i,Yt[e]=Ue(i,n))}let oe=t[11];const se=t=>t[73].id;for(let e=0;e<oe.length;e+=1){let n=Se(t,oe,e),i=se(n);Vt.set(i,Kt[e]=Ze(i,n))}let le=!1===t[0].immediateUpload&&Ge(t),ce=!0===t[19]&&Je(t),ue=!0===t[20]&&tn(t);return Rt=new Te({props:{isOpen:t[14],uFile:t[12],errors:t[18]}}),{c(){e=w("div"),n=w("div");for(let t=0;t<Wt.length;t+=1)Wt[t].c();i=C(),a=w("div"),o=w("div");for(let t=0;t<ie.length;t+=1)ie[t].c();s=C(),l=w("div"),c=w("div"),c.textContent=""+t[24]._("Select files"),d=C(),h=w("div"),p=w("button"),f=w("i"),E=C(),S=w("button"),$=w("i"),B=C(),z=w("div"),j=w("div"),F=w("div"),N=w("div"),N.textContent=""+t[24]._("Filename"),I=C(),H=w("div"),H.textContent=""+t[24]._("Status"),R=C(),P=w("div"),P.textContent=""+t[24]._("Size"),A=C(),U=w("div"),W=C(),X=w("div"),Y=w("div"),Y.textContent=""+t[24]._("Drag files here."),q=C(),K=w("ul");for(let t=0;t<Yt.length;t+=1)Yt[t].c();V=C(),Q=w("div"),Z=w("div"),Z.textContent=""+t[24]._("Drag files here."),G=C(),it=w("div");for(let t=0;t<Kt.length;t+=1)Kt[t].c();rt=C(),ut=w("div"),dt=w("div"),ht=w("button"),pt=w("i"),mt=C(),gt=w("span"),vt=x(Qt),yt=C(),le&&le.c(),wt=C(),xt=w("div"),Ct=w("span"),Et=w("span"),_t=x(Zt),kt=C(),Mt=w("span"),ce&&ce.c(),Ot=C(),ue&&ue.c(),Dt=C(),Tt=w("button"),St=w("i"),$t=C(),Lt=x(Gt),Bt=C(),zt=w("span"),jt=x(Jt),Ft=C(),Nt=w("div"),It=w("input"),Ht=C(),st(Rt.$$.fragment),M(n,"class","hidden-inputs"),D(n,"display","none"),M(o,"class","error-container-item svelte-ibtpdm"),M(a,"class","error-container svelte-ibtpdm"),M(c,"class","left"),M(f,"class","fas fa-list-ul btn-view-text svelte-ibtpdm"),M(p,"class",m=u(t[9])+" svelte-ibtpdm"),M($,"class","far fa-image btn-view-image svelte-ibtpdm"),M(S,"class",L=u(t[10])+" svelte-ibtpdm"),M(h,"class","right svelte-ibtpdm"),M(l,"class","header svelte-ibtpdm"),M(N,"class","cell-name svelte-ibtpdm"),M(H,"class","cell-status svelte-ibtpdm"),M(P,"class","cell-size svelte-ibtpdm"),M(U,"class","cell-action svelte-ibtpdm"),M(F,"class","dropzone-text-header svelte-ibtpdm"),M(Y,"class","dropzone-droptext svelte-ibtpdm"),M(K,"class","fileuploader-item-container svelte-ibtpdm"),M(X,"class","dropzone-text-container svelte-ibtpdm"),M(j,"class","dropzone-text svelte-ibtpdm"),T(j,"visible","text"===t[13]),M(Z,"class","dropzone-droptext svelte-ibtpdm"),M(it,"class","filelist fileuploader-item-container svelte-ibtpdm"),M(Q,"class","dropzone-image svelte-ibtpdm"),T(Q,"visible","image"===t[13]),M(z,"class","dropzone svelte-ibtpdm"),M(pt,"class","btn-add-file fas fa-plus-circle svelte-ibtpdm"),M(gt,"class","btn-add-file"),M(ht,"class",bt=u(t[7])+" svelte-ibtpdm"),M(dt,"class","left"),M(Et,"class","text-file"),M(Ct,"class","footer-info svelte-ibtpdm"),M(Mt,"class","footer-info global-percent-upload svelte-ibtpdm"),M(St,"class","fas fa-ban btn-abort-upload svelte-ibtpdm"),M(Tt,"class","btn-abort-upload svelte-ibtpdm"),D(Tt,"display",t[16]?"inline-block":"none"),M(zt,"class","footer-info global-size svelte-ibtpdm"),M(xt,"class","right svelte-ibtpdm"),M(ut,"class","footer svelte-ibtpdm"),M(It,"class","input-file svelte-ibtpdm"),It.disabled=!0,M(It,"type","file"),M(It,"name",t[1]),It.multiple=t[2],M(Nt,"class","hidden"),D(Nt,"display","none"),M(e,"class","fileuploader-container svelte-ibtpdm")},m(r,u){v(r,e,u),g(e,n);for(let t=0;t<Wt.length;t+=1)Wt[t].m(n,null);g(e,i),g(e,a),g(a,o);for(let t=0;t<ie.length;t+=1)ie[t].m(o,null);g(e,s),g(e,l),g(l,c),g(l,d),g(l,h),g(h,p),g(p,f),g(h,E),g(h,S),g(S,$),g(e,B),g(e,z),g(z,j),g(j,F),g(F,N),g(F,I),g(F,H),g(F,R),g(F,P),g(F,A),g(F,U),g(j,W),g(j,X),g(X,Y),g(X,q),g(X,K);for(let t=0;t<Yt.length;t+=1)Yt[t].m(K,null);t[36](K),g(z,V),g(z,Q),g(Q,Z),g(Q,G),g(Q,it);for(let t=0;t<Kt.length;t+=1)Kt[t].m(it,null);t[39](it),t[40](z),g(e,rt),g(e,ut),g(ut,dt),g(dt,ht),g(ht,pt),g(ht,mt),g(ht,gt),g(gt,vt),g(dt,yt),le&&le.m(dt,null),g(ut,wt),g(ut,xt),g(xt,Ct),g(Ct,Et),g(Et,_t),g(xt,kt),g(xt,Mt),ce&&ce.m(Mt,null),g(Mt,Ot),ue&&ue.m(Mt,null),g(xt,Dt),g(xt,Tt),g(Tt,St),g(Tt,$t),g(Tt,Lt),g(xt,Bt),g(xt,zt),g(zt,jt),g(e,Ft),g(e,Nt),g(Nt,It),t[41](It),v(r,Ht,u),lt(Rt,r,u),Pt=!0,At||(Ut=[_(p,"click",k(t[32])),_(S,"click",k(t[33])),_(ht,"click",k(t[28])),_(Tt,"click",k(t[29])),_(It,"change",t[42])],At=!0)},p(t,e){if(2050&e[0]){const i=t[11];Wt=ot(Wt,e,ee,1,t,i,Xt,n,at,ze,null,Be)}if(131072&e[0]){let n;for(ne=t[17],n=0;n<ne.length;n+=1){const i=Le(t,ne,n);ie[n]?ie[n].p(i,e):(ie[n]=je(i),ie[n].c(),ie[n].m(o,null))}for(;n<ie.length;n+=1)ie[n].d(1);ie.length=ne.length}if((!Pt||512&e[0]&&m!==(m=u(t[9])+" svelte-ibtpdm"))&&M(p,"class",m),(!Pt||1024&e[0]&&L!==(L=u(t[10])+" svelte-ibtpdm"))&&M(S,"class",L),83888129&e[0]|1&e[1]){const n=t[11];Yt=ot(Yt,e,ae,1,t,n,qt,K,at,Ue,null,$e)}if(8192&e[0]&&T(j,"visible","text"===t[13]),67110913&e[0]|1&e[1]){const n=t[11];Kt=ot(Kt,e,se,1,t,n,Vt,it,at,Ze,null,Se)}8192&e[0]&&T(Q,"visible","image"===t[13]),(!Pt||4194304&e[0])&&Qt!==(Qt=(0===t[22]?t[24]._("Add files"):t[24]._n("x files queued",t[22]))+"")&&O(vt,Qt),(!Pt||128&e[0]&&bt!==(bt=u(t[7])+" svelte-ibtpdm"))&&M(ht,"class",bt),!1===t[0].immediateUpload?le?le.p(t,e):(le=Ge(t),le.c(),le.m(dt,null)):le&&(le.d(1),le=null),(!Pt||2048&e[0])&&Zt!==(Zt=t[24]._n("x files",t[11].length)+"")&&O(_t,Zt),!0===t[19]?ce?(ce.p(t,e),524288&e[0]&&et(ce,1)):(ce=Je(t),ce.c(),et(ce,1),ce.m(Mt,Ot)):ce&&(J(),nt(ce,1,1,()=>{ce=null}),tt()),!0===t[20]?ue?(ue.p(t,e),1048576&e[0]&&et(ue,1)):(ue=tn(t),ue.c(),et(ue,1),ue.m(Mt,null)):ue&&(J(),nt(ue,1,1,()=>{ue=null}),tt()),(!Pt||65536&e[0])&&D(Tt,"display",t[16]?"inline-block":"none"),(!Pt||2097152&e[0])&&Jt!==(Jt=ft.humanSize(t[21])+"")&&O(jt,Jt),(!Pt||2&e[0])&&M(It,"name",t[1]),(!Pt||4&e[0])&&(It.multiple=t[2]);const i={};16384&e[0]&&(i.isOpen=t[14]),4096&e[0]&&(i.uFile=t[12]),262144&e[0]&&(i.errors=t[18]),Rt.$set(i)},i(t){Pt||(et(ce),et(ue),et(Rt.$$.fragment,t),Pt=!0)},o(t){nt(ce),nt(ue),nt(Rt.$$.fragment,t),Pt=!1},d(n){n&&b(e);for(let t=0;t<Wt.length;t+=1)Wt[t].d();y(ie,n);for(let t=0;t<Yt.length;t+=1)Yt[t].d();t[36](null);for(let t=0;t<Kt.length;t+=1)Kt[t].d();t[39](null),t[40](null),le&&le.d(),ce&&ce.d(),ue&&ue.d(),t[41](null),n&&b(Ht),ct(Rt,n),At=!1,r(Ut)}}}function nn(t){let e=t.target.closest(".error-item");null!==e&&e.remove()}function rn(t,e="id"){let n=[],i=t.children;for(let t of i){let i="data-"+e,r=t.getAttribute(i);if(!r)throw new Error("No element found with attribute "+i+". This is a setup error, please fix it now.");n.push(r)}return n}function an(t,e,n){let{options:i={}}=e;i=ft.extend(!0,{useBootstrap:!1,lang:"eng",maxFile:1,dropzoneOverClass:"dropzone-hover",urls:[],name:"the_file",maxFileSize:-1,maxFileNameLength:64,mimeType:null,allowedFileExtension:null,uploadItemName:"file",onServerError(t){console.log(t)},isExternalUrl:t=>!1,serverUrl:"/upload.php",payload:{},immediateUpload:!1,useVirtualServer:!1,useDelete:!1,useKeepOriginalImage:!1,useFileEditor:!1,fileEditor:{fileExtensionCanBeUpdated:!1,useDirectory:!1,directory:"",directoryCanBeUpdated:!0,usePrivacy:!1,useTags:!1,allowCustomTags:!0,availableTags:[],nbTagsAllowed:5,useImageEditor:!1}},i);let r,a,o,s,l=1,c=i.name,u=!1;if(i.maxFile>1&&(c+="[]",u=!0),!1===ft.arrayKeyExists(i.lang,FileUploader._langs))throw new Error("Lang not available: "+i.lang);let d=FileUploader._langs[i.lang],h=new xt;h.setDefaultLang(i.lang),h.addDictionary(i.lang,d);let p=new yt;p.setTranslator(h),p.init(i);let f=new wt,m=null,g="btn-add-file",v="btn-start-upload",b="btn-view-text",y="btn-view-image";!0===i.useBootstrap&&(g+=" btn btn-outline-dark btn-sm",v+=" btn btn-outline-dark btn-sm",b+=" btn btn-info btn-sm",y+=" btn btn-info btn-sm");let w=[],x=null,C="image",E=!1,_=0,k=!1,M=[],O=[],D=i.urls,T=!0,S=!1;var $,L,B;function z(t){n(13,C=t)}function j(t,e){let n=i.fileEditor;if("tags"in i)for(;i.tags.length>n.nbTagsAllowed;)i.tags.pop();return ft.extend({id:F(),url:null,name:t.name,directory:n.directory,file:t,status:0,size:t.size,type:t.type,progress:0,is_private:!1,is_user_data:!1,tags:[],keep_original:ft.toInt(i.useKeepOriginalImage),is_loading:!1},e)}function F(){return"id"+l++}function I(t){n(11,w=[...w,t])}function R(t){for(let e in w){let i=w[e];if(t.id===i.id){n(11,w[e]=t,w);break}}}async function P(t,e=!0){for(let r in w){let a=w[r];if(t===a.id){if(!0!==e||!1!==i.isExternalUrl(a.url)){ft.removeEntryByIndex(w,r),n(11,w);break}{a.is_loading=!0,n(11,w);let t=await K({action:"delete",url:a.url});if(a.is_loading=!1,!0===Q(t)){ft.removeEntryByIndex(w,r),n(11,w);break}}}}}function A(t){let e=t,n=t.split("/").pop(),r={id:F(),status:0,url:t,name:n};I(r),!0===i.useFileEditor&&(t=ft.url_merge_params(t,{m:1})),fetch(t).then(a=>{a.ok?a.blob().then(t=>{let o=function(t,e){return t.lastModifiedDate=new Date,t.name=e,t}(t,n),s={};!0===i.useFileEditor&&(s=bt.getPandaHeaders(a.headers)),R(j(o,ft.extend(s,{status:1,url:e,id:r.id})))}):G(`An error occurred with the request for url ${t}. `+a.status+": "+a.statusText)})}async function U(t){n(3,r.disabled=!0,r);var e=t.length;for(let n=0;n<e;n++){let e=t[n],i=p.test(e);if(!0===i){I(j(e,{status:2})),await W()}else X(i)}!0===i.immediateUpload&&setTimeout((function(){tt()}),1)}async function W(){if(-1!==i.maxFile&&w.length>i.maxFile){let t=w.length-i.maxFile;for(;t>0;){t--;let e=w[0];await P(e.id)}}}function X(t){!0===E?Y(t):n(17,M=[...M,t])}function Y(t){n(18,O=[...O,t])}function q(t){let e=[],i={};w.forEach(t=>{i[t.id]=t}),t.forEach(t=>{e.push(i[t])}),n(11,w=e)}async function K(t,e=!1){t=ft.extend({},i.payload,t);var n=await ft.post(i.serverUrl,t).catch(t=>{G("An error occurred with the request: "+t)});if(!0===n.ok)return!0===e?n:await n.json().catch(t=>{X(t.toString())});G("The server status code was "+n.status)}async function V(){return!0===Q(await K({action:"reset"}))&&(J(),!0)}function Q(t){return!0===Z(t)||(G(t.error),!1)}function Z(t){return!(!ft.isPlainObject(t)||!("type"in t)||"success"!==t.type)}function G(t){X(t)}function J(){n(11,w=[]);let t=i.maxFile;D.forEach(e=>{t>0&&(A(e),t--)})}async function tt(t={}){if(st>0){n(16,k=!0),f.registerItems(w);for(let[e,i]of w.entries()){let r=i.id;if(2===i.status){i.is_loading=!0,n(11,w);let a=await et(i,t);!1!==a?(a.is_loading=!1,n(11,w[e]=a,w)):P(r,!1)}}n(16,k=!1),rt()}}async function et(t,e={},r={}){let a=null,o=r.singleFile||!1;var s=ft.extend({},i.payload,{action:"add",filename:t.name,directory:t.directory,tags:t.tags,is_private:ft.toInt(t.is_private),keep_original:ft.toInt(t.keep_original)},e);!1===ft.mimeIsImage(t.type)&&(s.keep_original=0),s.useChunks=1,m=new Et({serverUrl:i.serverUrl,onChunkAborted:(e,n,i)=>{!function(t){P(t.id)}(t)},onChunkLoaded:(e,i,r,a)=>{let s=Math.round(i/r*100,2),l=t.id;!1===o?(f.addProgress(l,s),n(15,_=f.getPercent().toFixed(2))):n(15,_=s),function(t,e){let i=2;for(let r in w){let a=w[r];if(t===a.id&&(a.progress=e,n(11,w),i--,0===i))break;if(null!==x&&t===x.id&&(n(12,x.progress=e,x),n(12,x),i--,0===i))break}}(l,s)},async onChunkResponseReceived(t){try{return a=await t.json(),!0===Z(a)||a.error}catch(t){return t.toString()}}});try{let e=await m.sendByChunks(t.file,s,{start:0});a=await e.json()}catch(t){a={type:"error",error:t}}return await nt(t,a)}async function nt(t,e){if(!0===Q(e)){if(delete e.type,!0===t.__preserveOriginalUrl){let n=t.original_url;(t=ft.extend(t,e)).original_url=n,delete t.__preserveOriginalUrl}else t=ft.extend(t,e);if(!0===ft.mimeIsImage(t.type)){let e=t.url;!0===i.useVirtualServer&&(e+="&v=1");let n=await ft.fetchBlob(e);t.file=n,t.size=n.size,t.type=n.type}return t.status=3,null!==t.original_url&&(!0===i.useVirtualServer&&(t.original_url=ft.url_merge_params(t.original_url,{v:1})),t.keep_original=0),t}return!1}function it(t){let e=at(t);n(12,x=e),n(14,E=!0)}function rt(){setTimeout(()=>{!0===T?(n(19,T=!1),setTimeout(()=>{n(15,_=0),n(16,k=!1),n(20,S=!0)},500)):(n(20,S=!1),setTimeout(()=>{n(15,_=0),n(16,k=!1),n(19,T=!0)},500))},2e3)}function at(t){for(let e of w)if(t===e.id)return e;throw new Error("uFile not found with id: "+t)}$=async()=>{new Ct({container:a,cssClass:i.dropzoneOverClass,onDrop:t=>{U(t)}}).start();let t=re([s]),e=re([o]);if(t.on("drop",()=>{q(rn(s))}),e.on("drop",()=>{q(rn(o))}),!0===i.useVirtualServer){await V();let t=a.closest("form");null!==t&&t.addEventListener("reset",async()=>{await V()})}else J()},N().$$.on_mount.push($),L="fileUploader",B={onCloseFileEditorBtnClicked:function(){n(14,E=!1)},onFileEditorFileDropped:function(t,e){let r=p.test(e);!0===r?(t.file=e,t.size=e.size,t.type=e.type,t.name=e.name,t.status=2,t.keep_original=ft.toInt(i.useKeepOriginalImage),t.__preserveOriginalUrl=!0,n(12,x=t),R(t),!0===i.immediateUpload&&setTimeout((async function(){try{await tt({action:"update",url:t.url,original_url:t.original_url})}catch(e){t.is_loading=!1,R(t)}let e=at(x.id);n(12,x=e)}),1)):Y(r)},onFileEditorUpdated:async function(t,e,r){let{cropped:a,dropped:o,original:s}=r;t.is_loading=!0,n(12,x=t);let l=!0===a||!0===o||!0===s;t.keep_original=ft.toInt(!0===o&&!1===s&&!1===a);let c,u=i.isExternalUrl(t.url);if(t=ft.extend(t,e),!0===u||!0===l)n(16,k=!0),c=await et(t,{action:"update",url:t.url},{singleFile:!0}),n(16,k=!1),rt();else{var d=ft.extend({},i.payload,{action:"update",url:t.url,filename:t.name,directory:t.directory,tags:t.tags,is_private:ft.toInt(t.is_private)});let e=await K(d);c=await nt(t,e),c.file=t.file,c.original_url=t.original_url,c.type=t.type,c.size=t.size}!1!==c&&(c.is_loading=!1,R(c))},fileEditorOptions:Object.assign(i.fileEditor,{dropzoneOverClass:i.dropzoneOverClass,useKeepOriginalImage:i.useKeepOriginalImage,useBootstrap:i.useBootstrap})},N().$$.context.set(L,B);let ot,st,lt;return t.$$set=t=>{"options"in t&&n(0,i=t.options)},t.$$.update=()=>{2048&t.$$.dirty[0]&&n(21,ot=function(t){let e=0;return t.forEach(t=>{t.size&&(e+=t.size)}),e}(w)),2048&t.$$.dirty[0]&&n(22,st=function(t){let e=0;return t.forEach(t=>{2===t.status&&e++}),e}(w)),4194305&t.$$.dirty[0]&&n(23,lt=!1===i.immediateUpload&&st>0)},[i,c,u,r,a,o,s,g,v,b,y,w,x,C,E,_,k,M,O,T,S,ot,st,lt,h,z,P,U,function(){n(3,r.disabled=!1,r),r.click()},function(){null!==m&&(m.abort(),rt())},tt,it,()=>z("text"),()=>z("image"),t=>it(t.id),t=>P(t.id),function(t){H[t?"unshift":"push"](()=>{o=t,n(5,o)})},t=>it(t.id),t=>P(t.id),function(t){H[t?"unshift":"push"](()=>{s=t,n(6,s)})},function(t){H[t?"unshift":"push"](()=>{a=t,n(4,a)})},function(t){H[t?"unshift":"push"](()=>{r=t,n(3,r)})},t=>U(t.target.files)]}class on extends ht{constructor(t){super(),dt(this,t,an,en,o,{options:0},[-1,-1,-1])}}window.FileUploader=function(t){return new on(t)},FileUploader._langs={},FileUploader.hasLang=function(t){return t in FileUploader._langs},FileUploader.addLang=function(t,e){FileUploader._langs[t]=e}}();
//# sourceMappingURL=bundle.js.map
